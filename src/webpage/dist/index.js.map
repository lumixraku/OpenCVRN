{"version":3,"file":"index.js","sources":["../src/drawing.ts","../src/queue.js","../src/Vector.ts","../src/game.ts","../src/index.ts"],"sourcesContent":["import { Queue } from \"./queue\"\n\nclass Drawing {\n    ctx: CanvasRenderingContext2D\n    faceDataQueue: Queue\n    constructor() {\n        this.ctx = null\n        this.faceDataQueue = null\n    }\n    SetCtx(c) {\n        this.ctx = c\n    }\n    SetFaceDataQueue(queue) {\n        this.faceDataQueue = queue\n    }\n\n    // static Fn(){\n    //     console.log(\"call static\")   \n    // }\n    drawMouth(faceData) {\n        var faceDataQueue = this.faceDataQueue\n        if (!faceData.bottomMouthPosition) {\n            return\n        }\n        var mouthOpenDirection = []\n        var mouthOpenHeight = []\n        // 计算趋势\n        var i = 0\n        faceDataQueue.iterate( (data) => {\n            mouthOpenHeight[i] = this.calcMouthOpenHeight(data)\n            // console.log(\"open height\", mouthOpenHeight[i])\n            if (i > 0) {\n                if (mouthOpenHeight[i] > mouthOpenHeight[i - 1] || mouthOpenHeight[i] > 50) {\n                    mouthOpenDirection.push(\"+\")\n                } else {\n                    mouthOpenDirection.push(\"\")\n                }\n            } else if (i == 0) {\n                mouthOpenDirection.push(\"\")\n            }\n\n            i++\n        });\n\n\n        // console.log(\"mouthOpenDirection\", mouthOpenDirection)\n\n        const { bottomMouthPosition, rightMouthPosition, leftMouthPosition } = faceData\n        this.drawTriangle(bottomMouthPosition, rightMouthPosition, leftMouthPosition)\n\n        var openCount = 0\n        mouthOpenDirection.forEach((data) => {\n            openCount += (data == \"+\") ? 1 : 0\n        })\n        if (openCount / mouthOpenDirection.length > 0.5) {\n            this.drawStatusText(\"mouse open\", { x: 50, y: 50 })\n        } else {\n            this.drawStatusText(\"mouse close\", { x: 50, y: 50 })\n        }\n    }\n\n\n\n    drawTriangle(p1, p2, p3){\n        const ctx = this.ctx\n        ctx.fillStyle = \"rgba(255,0,0,1)\";\n        ctx.beginPath();\n        ctx.moveTo(p1.x, p1.y);\n        ctx.lineTo(p2.x, p2.y);\n        ctx.lineTo(p3.x, p3.y);\n        ctx.fill(); //填充闭合区域。如果path没有闭合，则fill()会自动闭合路径。\n    }\n    \n    drawNose() {\n        // const { noseBasePosition } = faceData\n        \n            \n    }\n    \n    \n    drawStatusText(text, pos) {\n        const ctx = this.ctx\n        ctx.font = \"30px Arial\";\n        ctx.fillText(text, pos.x, pos.y);\n    }\n    \n    calcMouthOpenHeight(faceData) {\n        const { bottomMouthPosition, rightMouthPosition, leftMouthPosition } = faceData\n        const { leftEyePosition, rightEyePosition } = faceData\n    \n        var eyeYPos = (leftEyePosition.y + rightEyePosition.y)/2\n        var upperLipYPos = (rightMouthPosition.y + leftMouthPosition.y) /2 \n        var lowerLipYPos = bottomMouthPosition.y\n        var mouseOpenHeight = Math.max(0, lowerLipYPos - upperLipYPos)\n        return mouseOpenHeight\n    }\n    \n    drawClassification(faceData) {\n        // 因为对前置摄像头做了镜像处理  所以对于左右眼要反向一下\n        if (faceData.leftEyeOpenProbability < 0.3 && faceData.rightEyeOpenProbability > 0.3) {\n            this.drawStatusText(\"right eye close\", { x:350,  y:50})\t\t\n        }\n        else\n        if (faceData.rightEyeOpenProbability < 0.3 && faceData.leftEyeOpenProbability > 0.3) {\n            this.drawStatusText(\"left eye close\", { x:350,  y:50})\t\t\n    \n        }\n        else \n        if (faceData.rightEyeOpenProbability > 0.3 && faceData.leftEyeOpenProbability > 0.3) {\n            this.drawStatusText(\"both open\", { x:350,  y:50})\t\t\n        }\t\n    }\n    \n}\n\nexport default Drawing;","export { Node, Stack, Queue }\n\n\n// Linked List\nfunction Node(data) {\n    this.data = data;\n    this.next = null;\n}\n\n// Stack implemented using LinkedList\nfunction Stack() {\n    this.top = null;\n}\n\nStack.prototype.push = function (data) {\n    var newNode = new Node(data);\n\n    newNode.next = this.top; //Special attention\n    this.top = newNode;\n}\n\nStack.prototype.pop = function () {\n    if (this.top !== null) {\n        var topItem = this.top.data;\n        this.top = this.top.next;\n        return topItem;\n    }\n    return null;\n}\n\nStack.prototype.print = function () {\n    var curr = this.top;\n    while (curr) {\n        console.log(curr.data);\n        curr = curr.next;\n    }\n}\n\n// var stack = new Stack();\n// stack.push(3);\n// stack.push(5);\n// stack.push(7);\n// stack.print();\n\n// Queue implemented using LinkedList\nfunction Queue() {\n    this.head = null;\n    this.tail = null;\n    this.eleCount = 0;\n    this.maxCount = 16\n}\n\nQueue.prototype.enqueue = function (data) {\n    var newNode = new Node(data);\n\n    if (this.eleCount >= this.maxCount) {\n        this.dequeue()\n    }\n\n    if (this.head === null) {\n        this.head = newNode;\n        this.tail = newNode;\n    } else {\n        this.tail.next = newNode;\n        this.tail = newNode;\n    }\n    this.eleCount++;\n}\n\nQueue.prototype.dequeue = function () {\n    var newNode;\n    if (this.head !== null) {\n        newNode = this.head.data;\n        this.head = this.head.next;\n    }\n    return newNode;\n}\n\nQueue.prototype.print = function () {\n    var curr = this.head;\n    while (curr) {\n        console.log(curr.data);\n        curr = curr.next;\n    }\n}\n\nQueue.prototype.iterate = function (fn) {\n    var curr = this.head;\n    while (curr) {\n        fn(curr.data)\n        curr = curr.next;\n    }\n}\n\n","class Vector2 {\n    x: number;\n    y: number;\n    constructor(x: number, y: number){\n        this.x = x\n        this.y = y\n    }\n\n}\n\nexport { Vector2 }","import * as PIXI from 'pixi.js'\nimport * as TWEEN from '@tweenjs/tween.js'\nimport { Vector2 } from './Vector'\nconsole.log(\"pixi......\", PIXI)\nconst Application = PIXI.Application;\nconst Container = PIXI.Container;\nconst loader = PIXI.loader;\nconst resources = PIXI.loader.resources;\nconst TextureCache = PIXI.utils.TextureCache;\nconst Sprite = PIXI.Sprite;\n\n\nconst stageHeight = document.body.clientHeight;\nconst eatPosY = stageHeight/2; //超过这个点还没有吃到的话  视为miss\n\nclass EatGame {\n    app: PIXI.Application;\n    catList: Array<PIXI.Sprite>;\n    constructor() {\n        let app = new PIXI.Application({\n            width: document.body.clientWidth,\n            height: document.body.clientHeight,\n            antialias: true,\n            transparent: true,\n            resolution: 1\n        }\n        );\n        this.app = app;\n\n        this.makeScene = this.makeScene.bind(this)\n\n        document.body.appendChild(app.view);\n        this.loadRes(this.makeScene)\n\n        this.catList = new Array<PIXI.Sprite>();\n        app.ticker.add(delta => this.gameLoop(delta));\n\n\n\n\n    }\n    gameLoop(delta) {\n        TWEEN.update();\n\n        this.moreCats(delta)\n        this.movingCat()\n        this.reachBottomLineCat()\n        this.shouldIEat();\n\n    }\n\n    loadRes(callback) {\n        loader\n            .add(\"/images/animals.json\")\n            .load(callback);\n    }\n\n    makeScene() {\n        this.addCat()\n    }\n\n    // 不断的生成猫猫\n    elapse = 0\n    moreCats(delta) {\n        this.elapse += delta\n        if (this.elapse > 60) {\n            this.elapse = 0\n            this.addCat()\n        }\n    }\n\n\n\n    addCat() {\n        let app = this.app\n        let resourceMap = resources[\"/images/animals.json\"].textures;\n        //The cat\n        let cat = new Sprite(resourceMap[\"cat.png\"]);\n        cat.position.set(16, 16);\n        this.catList.push(cat)\n        app.stage.addChild(cat)\n    }\n\n    movingCat() {\n        for (let cat of this.catList){\n\n            if ( cat.transform  ) {\n                cat.y += 6\n            }\n            // console.log(\"cat\", cat.y)\n        }\n    }\n\n    reachBottomLineCat() {\n        for (let i=0; i<this.catList.length; i++ ) {\n            let cat = this.catList[i] as PIXI.Sprite;\n            if (cat.y >= stageHeight - cat.height) {\n                console.log('miss')\n                \n                cat.destroy()\n                this.catList.splice(i--, 1)\n            }\n        }\n    }\n\n    // 寻找当前列表中第一个不是 miss 的cat\n    getFirstAvailableCat() {\n        for(let cat of this.catList) {\n            if (!cat[\"miss\"]) {\n                return cat\n            }\n        }\n        return null\n    }\n\n    // call Each Frame\n    shouldIEat() {\n        let firstCat = this.getFirstAvailableCat() as PIXI.Sprite;\n        if (firstCat){\n\n            // 调用过 sprite.destroy 之后 sprite下的transform 就是空了\n            if (firstCat && firstCat.transform && firstCat.y > eatPosY ) {\n                let openMouthPropability \n                if ( !firstCat[\"propability\"] ) {\n                    firstCat[\"propability\"] = Math.random()\n                }\n                openMouthPropability = firstCat[\"propability\"]\n\n                if (openMouthPropability > 0.5) {\n                    let cat = this.catList.pop()\n                    console.log(\"eat\", cat.y);\n                    this.eatCat(cat, new Vector2(200, 300))\n\n                    //miss\n                }else {\n                    let resourceMap = resources[\"/images/animals.json\"].textures;\n                    firstCat[\"miss\"] = true\n                    firstCat.texture = resourceMap[\"hedgehog.png\"]                    \n                }\n            }\n        }\n    }\n\n    eatCat(cat: PIXI.Sprite, dest: Vector2) {\n        new TWEEN.Tween({ x: cat.x, y: cat.y })\n            .to({ x: dest.x, y: dest.y }, 900 + Math.random() * 200)\n            .onUpdate((o: any) => {\n                cat.y = o.y\n                cat.x = o.x\n            })\n            .easing(TWEEN.Easing.Quadratic.InOut)\n            // .repeat(Infinity)\n            // .yoyo(true) //到了终点之后 再动画返回原点\n            .start()\n            .onComplete( (e)=> {\n                console.log(\"eat finish\", cat)\n                cat.destroy()\n                this.app.stage.removeChild(cat)\n            } )\n\n\n    }\n}\n\n\nexport default EatGame\n","\n\nimport Drawing from './drawing'\nimport { Queue } from './queue.js'\nimport EatGame from './game'\nvar c:HTMLCanvasElement = <HTMLCanvasElement>document.getElementById('canvas');\nvar ctx = c.getContext('2d');\nc.width = document.body.clientWidth;\nc.height = document.body.clientHeight;\n\n\n\nvar faceDataQueue = new Queue()\n\n\n\nconst drawing = new Drawing();\ndrawing.SetCtx(ctx);\ndrawing.SetFaceDataQueue(faceDataQueue)\n\nsetTimeout( function(){\n\tconsole.log(\"width  height\", document.body.clientWidth, document.body.clientHeight);\n}, 1000);\n\n\nwindow.addEventListener(\"message\", (event: MessageEvent)=> {\n    \n\t// For Chrome, the origin property is in the event.originalEvent\n\t// object.\n\t// 这里不准确，chrome没有这个属性\n\t// var origin = event.origin || event.originalEvent.origin;\n\tvar origin = event.origin;\n\t// console.log(\"screen size:::\", c.clientWidth, c.clientHeight)\n\t// console.log(\"event FROM RN::::\", typeof(event.data),  event.data)\n\n\tctx.clearRect(0, 0, c.width, c.height)\n\n\tfaceDataQueue.enqueue(event.data)\n\tdrawing.drawMouth(event.data)\n\tdrawing.drawClassification(event.data)\n\tif (window[\"ReactNativeWebView\"]) {\n\t\twindow[\"ReactNativeWebView\"].postMessage(\"Hello! From JS\");\n\t}\n\n}, false);\n\nnew EatGame();"],"names":["PIXI.loader","PIXI.utils","PIXI.Sprite","PIXI.Application","TWEEN.update","TWEEN.Tween","TWEEN.Easing"],"mappings":"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"}