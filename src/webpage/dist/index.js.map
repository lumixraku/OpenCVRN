{"version":3,"file":"index.js","sources":["../src/drawing.ts","../src/queue.js","../src/game/Vector.ts","../src/game/CircleTable.ts","../src/game/Mouth.ts","../src/game/Food.ts","../src/game/game.ts","../src/index.ts"],"sourcesContent":["import { Queue } from \"./queue\"\n\nclass Drawing {\n    ctx: CanvasRenderingContext2D\n    faceDataQueue: Queue\n    constructor() {\n        this.ctx = null\n        this.faceDataQueue = null\n    }\n    SetCtx(c) {\n        this.ctx = c\n    }\n    SetFaceDataQueue(queue) {\n        this.faceDataQueue = queue\n    }\n\n    // static Fn(){\n    //     console.log(\"call static\")   \n    // }\n    drawMouth(faceData) {\n        var faceDataQueue = this.faceDataQueue\n        if (!faceData.bottomMouthPosition) {\n            return\n        }\n        var mouthOpenDirection = []\n        var mouthOpenHeight = []\n        // 计算趋势\n        var i = 0\n        faceDataQueue.iterate( (data) => {\n            mouthOpenHeight[i] = this.calcMouthOpenHeight(data)\n            // console.log(\"open height\", mouthOpenHeight[i])\n            if (i > 0) {\n                if (mouthOpenHeight[i] > mouthOpenHeight[i - 1] || mouthOpenHeight[i] > 50) {\n                    mouthOpenDirection.push(\"+\")\n                } else {\n                    mouthOpenDirection.push(\"\")\n                }\n            } else if (i == 0) {\n                mouthOpenDirection.push(\"\")\n            }\n\n            i++\n        });\n\n\n        // console.log(\"mouthOpenDirection\", mouthOpenDirection)\n\n        const { bottomMouthPosition, rightMouthPosition, leftMouthPosition } = faceData\n        this.drawTriangle(bottomMouthPosition, rightMouthPosition, leftMouthPosition)\n\n        var openCount = 0\n        mouthOpenDirection.forEach((data) => {\n            openCount += (data == \"+\") ? 1 : 0\n        })\n        // if (openCount / mouthOpenDirection.length > 0.5) {\n        //     this.drawStatusText(\"mouse open\", { x: 50, y: 50 })\n        // } else {\n        //     this.drawStatusText(\"mouse close\", { x: 50, y: 50 })\n        // }\n    }\n\n\n\n    drawTriangle(p1, p2, p3){\n        const ctx = this.ctx\n        ctx.fillStyle = \"rgba(255,0,0,1)\";\n        ctx.beginPath();\n        ctx.moveTo(p1.x, p1.y);\n        ctx.lineTo(p2.x, p2.y);\n        ctx.lineTo(p3.x, p3.y);\n        ctx.fill(); //填充闭合区域。如果path没有闭合，则fill()会自动闭合路径。\n    }\n    \n    drawNose() {\n        // const { noseBasePosition } = faceData\n        \n            \n    }\n    \n    \n    drawStatusText(text, pos) {\n        const ctx = this.ctx\n        ctx.font = \"30px Arial\";\n        ctx.fillText(text, pos.x, pos.y);\n    }\n    \n    calcMouthOpenHeight(faceData) {\n        const { bottomMouthPosition, rightMouthPosition, leftMouthPosition } = faceData\n        const { leftEyePosition, rightEyePosition } = faceData\n    \n        var eyeYPos = (leftEyePosition.y + rightEyePosition.y)/2\n        var upperLipYPos = (rightMouthPosition.y + leftMouthPosition.y) /2 \n        var lowerLipYPos = bottomMouthPosition.y\n        var mouseOpenHeight = Math.max(0, lowerLipYPos - upperLipYPos)\n        return mouseOpenHeight\n    }\n    \n    drawClassification(faceData) {\n        // 因为对前置摄像头做了镜像处理  所以对于左右眼要反向一下\n        if (faceData.leftEyeOpenProbability < 0.3 && faceData.rightEyeOpenProbability > 0.3) {\n            this.drawStatusText(\"right eye close\", { x:350,  y:50})\t\t\n        }\n        else\n        if (faceData.rightEyeOpenProbability < 0.3 && faceData.leftEyeOpenProbability > 0.3) {\n            this.drawStatusText(\"left eye close\", { x:350,  y:50})\t\t\n    \n        }\n        else \n        if (faceData.rightEyeOpenProbability > 0.3 && faceData.leftEyeOpenProbability > 0.3) {\n            this.drawStatusText(\"both open\", { x:350,  y:50})\t\t\n        }\t\n    }\n    \n}\n\nexport default Drawing;","export { Node, Stack, Queue }\n\n\n// Linked List\nfunction Node(data) {\n    this.data = data;\n    this.next = null;\n}\n\n// Stack implemented using LinkedList\nfunction Stack() {\n    this.top = null;\n}\n\nStack.prototype.push = function (data) {\n    var newNode = new Node(data);\n\n    newNode.next = this.top; //Special attention\n    this.top = newNode;\n}\n\nStack.prototype.pop = function () {\n    if (this.top !== null) {\n        var topItem = this.top.data;\n        this.top = this.top.next;\n        return topItem;\n    }\n    return null;\n}\n\nStack.prototype.print = function () {\n    var curr = this.top;\n    while (curr) {\n        console.log(curr.data);\n        curr = curr.next;\n    }\n}\n\n// var stack = new Stack();\n// stack.push(3);\n// stack.push(5);\n// stack.push(7);\n// stack.print();\n\n// Queue implemented using LinkedList\nfunction Queue() {\n    this.head = null;\n    this.tail = null;\n    this.eleCount = 0;\n    this.maxCount = 16\n}\n\nQueue.prototype.enqueue = function (data) {\n    var newNode = new Node(data);\n\n    if (this.eleCount >= this.maxCount) {\n        this.dequeue()\n    }\n\n    if (this.head === null) {\n        this.head = newNode;\n        this.tail = newNode;\n    } else {\n        this.tail.next = newNode;\n        this.tail = newNode;\n    }\n    this.eleCount++;\n}\n\nQueue.prototype.dequeue = function () {\n    var newNode;\n    if (this.head !== null) {\n        newNode = this.head.data;\n        this.head = this.head.next;\n    }\n    return newNode;\n}\n\nQueue.prototype.print = function () {\n    var curr = this.head;\n    while (curr) {\n        console.log(curr.data);\n        curr = curr.next;\n    }\n}\n\nQueue.prototype.iterate = function (fn) {\n    var curr = this.head;\n    while (curr) {\n        fn(curr.data)\n        curr = curr.next;\n    }\n}\n\n","class Vector2 {\n    x: number;\n    y: number;\n    constructor(x: number, y: number){\n        this.x = x\n        this.y = y\n    }\n\n    add(v: Vector2) {\n        this.x = this.x + v.x\n        this.y = this.y + v.y\n    }\n\n}\n\nexport { Vector2 }","import * as PIXI from 'pixi.js'\nimport { Vector2 } from '@game/Vector'\n\nconst Application = PIXI.Application;\nconst Container = PIXI.Container;\nconst loader = PIXI.loader;\nconst resources = PIXI.loader.resources;\nconst TextureCache = PIXI.utils.TextureCache;\nconst Sprite = PIXI.Sprite;\n\n\n\n\nclass CircleTable extends PIXI.Sprite {\n    origin: Vector2\n    radius: number\n    degree: number\n    graph: PIXI.Graphics\n    bounds: PIXI.Rectangle\n\n    // x y 表示圆桌在画布上的位置\n    constructor(x: number, y: number, radius: number) {\n        // 这样会改变在画布中的额位置\n        // this.x = x\n        // this.y = y\n        let tex: PIXI.Texture = resources['/images/pinwheel.png'].texture\n        super(tex)\n\n        this.origin = new Vector2(x, y)\n        this.radius = radius\n\n        this.bounds = this.getBounds()\n        this.width = this.bounds.width\n        this.height = this.bounds.height\n        this.pivot.x = this.width / 2\n        this.pivot.y = this.height / 2\n\n        this.degree = 0\n\n    }\n\n    draw(parent: PIXI.Container) {\n        // this.beginFill(0xFF0000, 1);\n        // this.drawCircle(0, 0, this.radius); // drawCircle(x, y, radius)\n        // this.endFill();    \n\n        // x y 等 pos 坐标因为 pivot 而改变\n        // 原本 x y 是指图片的左上角\n        // 现在 x y 是图片的中心点\n        this.x = this.origin.x// - this.width/2\n        this.y = this.origin.y// - this.height/2\n\n\n        // this.beginFill(0xFF0000, 1);\n        // this.lineStyle(0, 0xFF0000, 1);\n        // this.moveTo(200, 200);\n        // this.lineTo(200, 300);\n        // this.lineTo(300, 300)        \n\n        // stage.addChild(this.applyTexture())\n        parent.addChild(this)\n    }\n\n\n    create(): PIXI.Graphics {\n\n\n        let newG = new PIXI.Graphics()\n        newG.beginFill(0xe74c3c); // Red\n        newG.drawCircle(this.x, this.y, this.radius);\n        newG.endFill();\n        this.graph = newG\n        return newG\n    }\n\n    // 这个好像不对 \n    // 这是在底部挖了一个洞  当graphic 移动的时候 纹理却没有移动\n    apppplyTexture() {\n        //create a texture\n        let img = new Image();\n        img.src = '/images/logo.png';\n        let base = new PIXI.BaseTexture(img)\n        let texture = new PIXI.Texture(base);// return you the texture        \n\n        let tilingSprite = new PIXI.TilingSprite(texture, 0, 0);\n\n        tilingSprite.mask = this;\n        return tilingSprite\n\n    }\n\n\n    startSpin(delta) {\n        this.degree += delta\n        // angle 为正是顺时针旋转\n\n        this.angle = -this.degree\n        // this.rotation -= 0.01 * delta;\n\n    }\n\n    degreeToPos(deg: number): Vector2 {\n        // Math.cos(x) 这里默认是弧度制\n        // 而参数中的 deg 是角度\n        // 所以要把角度转为弧度\n        deg = Math.PI / 180 * deg\n        let r = this.radius\n        let pos: Vector2\n        if (deg >= 0 && deg <= 90) {\n            pos = new Vector2(Math.cos(deg) * r, Math.sin(deg) * r)\n        } else if (deg > 90 && deg <= 180) {\n            deg = 180 - deg\n            pos = new Vector2(-Math.cos(deg) * r, Math.sin(deg) * r)\n        } else if (deg > 180 && deg <= 270) {\n            deg = deg - 180\n            pos = new Vector2(-Math.cos(deg) * r, -Math.sin(deg) * r)\n\n        } else if (deg > 270 && deg <= 360) {\n            deg = 360 - deg\n            pos = new Vector2(Math.cos(deg) * r, -Math.sin(deg) * r)\n        }\n\n        // 和数学中的坐标系不一样哎                    \n        // pos.add(this.origin)\n        let gamePos = new Vector2(0, 0)\n        gamePos.y = this.origin.y - pos.y\n        gamePos.x = this.origin.x + pos.x\n\n\n\n        return gamePos\n\n    }\n}\n\nexport default CircleTable;\n","\nimport * as PIXI from 'pixi.js'\nimport { Vector2 } from '@game/Vector'\nimport { FaceData } from '@root/faceData';\n\n\nconst Application = PIXI.Application;\nconst Container = PIXI.Container;\nconst loader = PIXI.loader;\nconst resources = PIXI.loader.resources;\nconst TextureCache = PIXI.utils.TextureCache;\nconst Sprite = PIXI.Sprite;\n\n\n\nclass Mouth extends PIXI.Graphics {\n    // 适用于特征点\n    leftPos: Vector2 = new Vector2(0, 0)\n    rightPos: Vector2 = new Vector2(0, 0)\n    bottomPos: Vector2 = new Vector2(0, 0)\n\n    // 适用于轮廓线\n    lowerLipBottom: Vector2[] = []\n    lowerLipTop: Vector2[] = []\n    upperLipTop: Vector2[] = [] // 上嘴唇有 11 个点  其他都是 9个点\n    upperLipBottom: Vector2[] = []\n\n    mouthRect: PIXI.Rectangle\n\n    openThreshold: number = 90\n\n    points: Vector2[]\n\n    // constructor(leftPos: Vector2, rightPos: Vector2, bottomPos: Vector2) {\n    //     super()\n    //     this.leftPos = leftPos\n    //     this.rightPos = rightPos\n    //     this.bottomPos = bottomPos\n    // }\n    constructor(points: Vector2[]) {\n        super()\n        this.points = points\n\n        if (window.navigator.userAgent.indexOf(\"ONEPLUS\") == -1) {\n            this.openThreshold = 0\n\n        }\n    }\n\n\n    refreshByNewContours(face: FaceData) {\n        this.clear()\n        this.lowerLipBottom = face.lowerLipBottom\n        this.lowerLipTop = face.lowerLipTop\n        this.upperLipTop = face.upperLipTop\n        this.upperLipBottom = face.upperLipBottom\n\n\n        this.points = [...face.lowerLipBottom, ...face.lowerLipTop, ...face.upperLipTop, ...face.upperLipBottom]\n        // this.beginFill(0xFF0000, 1);\n        this.lineStyle(5, 0xFF0000, 1);\n\n        let idx = 0;\n        for (let p of this.points) {\n            if (idx == 0) {\n                this.moveTo(p.x, p.y)\n            }\n            this.lineTo(p.x, p.y);\n            idx++\n        }\n        this.calcMouthRect()\n        // this.endFill();\n    }\n\n    refreshByNewPoint(leftPos: Vector2, rightPos: Vector2, bottomPos: Vector2) {\n        this.clear()\n        this.leftPos = leftPos\n        this.rightPos = rightPos\n        this.bottomPos = bottomPos\n        this.beginFill(0xFF0000, 1);\n        this.lineStyle(0, 0xFF0000, 1);\n        this.moveTo(rightPos.x, rightPos.y);\n        this.lineTo(leftPos.x, leftPos.y);\n        this.lineTo(bottomPos.x, bottomPos.y);\n\n\n        //draw Top Line & bottom Line\n        this.beginFill(0x00FF00, 1)\n        this.lineStyle(3, 0x00FF00, 1);\n        this.moveTo(rightPos.x, rightPos.y - 100)\n        this.lineTo(rightPos.x, rightPos.y + 100)\n\n        this.endFill();\n    }\n\n    calcMouthRect() {\n        let topY = 0\n        let bottomY = 0\n        let upperY = this.upperLipTop.map((v: Vector2) => {\n            return v.y\n        })\n\n        let lowerY = this.lowerLipBottom.map((v: Vector2) => {\n            return v.y\n        })\n\n        topY = Math.min(...upperY)\n        bottomY = Math.max(...lowerY)\n\n        let top = topY\n        let left = this.upperLipTop[0].x\n        let right = this.upperLipTop[10].x\n        let width = right - left;\n        let height = bottomY - topY\n\n\n        this.mouthRect = new PIXI.Rectangle(left, top, width, height)\n        topY = Math.min(...upperY) - 100\n        return topY\n    }\n\n    getMouthRect(): PIXI.Rectangle {\n        return this.mouthRect\n    }\n\n\n    // https://firebase.google.com/docs/ml-kit/images/examples/face_contours.svg\n    getMouthCenter() {\n        if (this.upperLipTop.length == 0) {\n            return\n        }\n        const avg = arr => arr.reduce((acc, val) => acc + val, 0) / arr.length;\n\n        let x = avg([this.upperLipTop[4].x, this.upperLipTop[5].x, this.upperLipTop[6].x])\n        let y = avg([this.upperLipTop[5].y, this.upperLipBottom[4].y, this.lowerLipTop[4].y, this.lowerLipBottom[4].y])\n        return new Vector2(x, y)\n    }\n\n    checkOpenRs() {\n        let bottomY = Math.max(Math.max(this.leftPos.y, this.rightPos.y), this.bottomPos.y)\n        let topY = Math.min(this.leftPos.y, this.rightPos.y)\n        return {\n            rs: bottomY - topY > this.openThreshold,\n            val: bottomY - topY\n        }\n    }\n\n    checkMouthOpenByContour() {\n        if (!this.mouthRect) {\n            return {\n                rs: false\n            }\n        }\n\n\n        return {\n            rs: this.mouthRect.height > this.openThreshold,\n            // rs: true,\n            val: this.mouthRect.height\n        }\n    }\n\n    isNearMouth(food: Vector2) {\n        let rect = this.mouthRect\n        if ((food.y < rect.top + rect.height + 100) && (food.y > rect.top - 100)) {\n            return true\n        } else {\n            return false\n        }\n    }\n\n    missedFood(food: Vector2) {\n        let rect = this.mouthRect\n        return (food.y > rect.top + rect.height + 100)\n    }\n}\n\nexport default Mouth","import * as PIXI from 'pixi.js'\nimport { Vector2 } from '@game/Vector'\nimport { IResourceDictionary, ITextureDictionary } from 'pixi.js';\n\n\nconst Application = PIXI.Application;\nconst Container = PIXI.Container;\nconst loader = PIXI.loader;\nconst resources = PIXI.loader.resources;\nconst TextureCache = PIXI.utils.TextureCache;\nconst Sprite = PIXI.Sprite;\n\n\nclass Food extends PIXI.Sprite {\n    eating: boolean\n    moving: boolean\n    miss: boolean\n    textures: ITextureDictionary\n    width: number\n    height: number\n    bounds: PIXI.Rectangle\n    degree: number; //弧度制 45° 就用数字45 表示\n\n    constructor() {\n        let resourceMap = resources[\"/images/animals.json\"].textures;\n        super(resourceMap[\"cat.png\"]);\n        this.textures = resourceMap\n        // new Sprite(resourceMap[\"cat.png\"]);\n        this.bounds = this.getBounds()\n        this.width = this.bounds.width\n        this.height = this.bounds.height\n        this.pivot.x = this.width / 2\n        this.pivot.y = this.height / 2\n\n        this.degree = 0\n    }\n\n    changeTexture() {\n        this.texture = this.textures[\"hedgehog.png\"]\n    }\n\n    centerPosToLeftTopPos(x: number, y: number): Vector2 {\n        return new Vector2(x - this.width / 2, y - this.height / 2)\n    }\n}\n\n\nexport default Food","import * as PIXI from 'pixi.js'\nimport * as TWEEN from '@tweenjs/tween.js'\nimport { Vector2 } from '@game/Vector'\nimport { FaceData } from '@root/faceData'\nimport { IResourceDictionary, ITextureDictionary } from 'pixi.js';\nimport CircleTable from '@game/CircleTable'\nimport Mouth from '@game/Mouth'\nimport Food from '@game/Food'\n\nconst Application = PIXI.Application;\nconst Container = PIXI.Container;\nconst loader = PIXI.loader;\nconst resources = PIXI.loader.resources;\nconst TextureCache = PIXI.utils.TextureCache;\nconst Sprite = PIXI.Sprite;\n\nconst stageHeight = document.body.clientHeight;\nconst stageWidth = document.body.clientWidth;\n\n\nclass EatGame {\n    app: PIXI.Application;\n    foodList: Array<Food>;\n    foodMovingList: Array<Food> //移动向嘴巴的列表\n    // mouthOpen: boolean;\n    mouthText: PIXI.Text;\n    mouth: Mouth;\n    table: CircleTable;\n\n    score: number = 0;\n        scoreText: PIXI.Text;\n\n    constructor() {\n        let app = new PIXI.Application({\n            width: document.body.clientWidth,\n            height: document.body.clientHeight,\n            antialias: true,\n            transparent: true,\n            resolution: 1\n        }\n        );\n        this.app = app;\n\n        this.makeScene = this.makeScene.bind(this)\n        document.body.appendChild(app.view);\n\n\n        this.loadRes(() => {\n            this.makeScene()\n            this.foodList = new Array<Food>();\n            this.foodMovingList = new Array<Food>();\n\n\n            let ct = new CircleTable(stageWidth / 2, stageHeight, 200)\n            ct.draw(this.app.stage)\n            this.table = ct\n\n\n            // 初始化\n            let defaultPos = new Vector2(-100, -100)\n            // this.mouth = new Mouth(defaultPos, defaultPos, defaultPos)\n            this.mouth = new Mouth([])\n\n            this.app.stage.addChild(this.mouth);\n\n            // this.score = 0\n            this.renderScore()\n\n\n            // 收尾\n            this.renderTestText()\n\n        })\n    }\n    testTween() {\n        let resourceMap = resources[\"/images/animals.json\"].textures;\n        //The cat\n        let cat = new Sprite(resourceMap[\"cat.png\"]);\n        cat.position.x = 16\n        cat.position.y = 16\n        this.app.stage.addChild(cat)\n\n        let dest = new Vector2(200, 200)\n        new TWEEN.Tween({ x: cat.x, y: cat.y })\n            .to({ x: dest.x, y: dest.y }, 500)\n            .onUpdate((o: any) => {\n                cat.y = o.y\n                cat.x = o.x\n            })\n            .easing(TWEEN.Easing.Cubic.In)\n            // .repeat(Infinity)\n            // .yoyo(true) //到了终点之后 再动画返回原点\n            .start()\n            .onComplete((e) => {\n                this.app.stage.removeChild(cat)\n            })\n    }\n\n\n    testSpin() {\n        let resourceMap = resources[\"/images/animals.json\"].textures;\n        //The cat\n        let cat = new Sprite(resourceMap[\"cat.png\"]);\n        cat.position.x = 16\n        cat.position.y = 16\n        this.app.stage.addChild(cat)\n        cat.pivot.x = cat.getBounds().x\n        cat.pivot.y = cat.getBounds().y\n\n        let rotation = 0\n\n        let count = 0\n        let setPosFn = (deg) => {\n\n            let pos = this.table.degreeToPos(deg)\n            // let deg = 315\n            cat.x = pos.x\n            cat.y = pos.y\n\n        }\n        this.app.ticker.add(delta => {\n            rotation += 0.1 * delta;\n\n            let deg = rotation % 360\n            setPosFn(deg)\n        });\n\n\n\n\n    }\n\n    elapse = 0\n    genFoodGap = 60\n    frameCount = 0\n    makeScene() {\n        this.app.ticker.add(delta => this.gameUILoop(delta));\n        this.app.ticker.add(delta => this.gameCheckLoop(delta));\n        // this.testSpin()\n\n    }\n\n\n    gameCheckLoop(delta) {\n\n        //60帧 加一次食物\n        if (this.frameCount > this.genFoodGap) {\n\n            this.addMoreFood()\n            this.updateMouthState()\n\n            this.frameCount = 0\n        }\n        this.reachBottomLineCat()\n        this.shouldIEat();\n    }\n\n\n    gameUILoop(delta) {\n        this.elapse++;\n        this.frameCount++;\n\n        TWEEN.update();\n        this.table.startSpin(delta)\n        // this.movingFood()\n        this.movingFoodOnTable(delta)\n    }\n\n    loadRes(callback) {\n        loader\n            .add(\"/images/animals.json\")\n            .add('/images/pinwheel.png')\n            .load(callback);\n    }\n\n\n\n\n    addMoreFood() {\n        console.log(\"more food\")\n        // 桌上最多 6个 食物\n        if (this.foodList.length >= 6) {\n            return\n        }\n\n        let app = this.app\n        let food = new Food()\n\n        food.x = -1000\n        food.y = -1000 + Math.random() * 30\n        // food.visible = false\n\n\n        this.foodList.push(food)\n        app.stage.addChild(food)\n\n    }\n\n    movingFood() {\n        for (let food of this.foodList) {\n            if (food.transform) {\n                if (!food.eating) {\n                    food.y += (3 + Math.random() * 3)\n\n                }\n            }\n\n            //miss\n            if (this.mouth.missedFood(new Vector2(food.x, food.y) ) && !food.miss) {\n                food.miss = true\n                food.changeTexture()\n                // let resourceMap = resources[\"/images/animals.json\"].textures;\n                // food.texture = resourceMap[\"hedgehog.png\"]\n            }\n        }\n    }\n\n    /**\n     * 食物转圈圈\n     * @param delta \n     */\n    movingFoodOnTable(delta) {\n        const foodInTable = (food): boolean => {\n            return food.transform && !food.eating\n        }\n        for (let food of this.foodList) {\n\n            // 逆时针旋转\n            if (foodInTable(food)) {\n                food.degree += delta\n\n                let pos = this.table.degreeToPos(food.degree)\n                food.position.x = pos.x\n                food.position.y = pos.y\n            }\n        }\n\n    }\n\n    reachBottomLineCat() {\n        for (let i = 0; i < this.foodList.length; i++) {\n            let food = this.foodList[i] as PIXI.Sprite;\n            if (food.y >= stageHeight + 400) {\n\n                food.destroy()\n                this.foodList.splice(i--, 1)\n            }\n        }\n    }\n\n    // call Each Frame\n    shouldIEat() {\n        if (this.mouth && this.mouth.checkMouthOpenByContour().rs) {\n\n            for (var i = 0; i < this.foodList.length; i++) {\n                let food = this.foodList[i]\n                if (food && food.transform) {\n                    // 调用过 sprite.destroy 之后 sprite下的transform 就是空了\n                    let mouthRect = this.mouth.getMouthRect()\n                    \n                    if ( this.mouth.isNearMouth( new Vector2(food.x, food.y) ) && !food.eating) {\n                        this.foodList.splice(i--, 1);\n                        let mouthCenter = this.mouth.getMouthCenter()                        \n                        this.eatingFood(food, mouthCenter)\n\n                    }\n                }\n            }\n        }\n    }\n\n    eatingFood(food: Food, dest: Vector2) {\n        // let leftTopPos = food.centerPosToLeftTopPos(dest.x, dest.y)\n        // 注意应该使图片的中心位置移动到 dest\n        food.eating = true\n        new TWEEN.Tween({ x: food.x, y: food.y })\n            .to({ x: dest.x, y: dest.y }, 1000)\n            .onUpdate((o: any) => {\n                food.y = o.y\n                food.x = o.x\n            })\n            .easing(TWEEN.Easing.Quintic.Out)\n            // .repeat(Infinity)\n            // .yoyo(true) //到了终点之后 再动画返回原点\n            .start()\n            .onComplete((e) => {\n                food.destroy()\n                this.app.stage.removeChild(food)\n                this.finishEating()\n\n            })\n    }\n\n    updateMouthState() {\n        // 这里还会有一些其他条件  待补充\n        // if  (Math.random() > 0.4) {\n        //     this.mouthText.text = \"OPEN\"\n        //     this.mouthOpen = true;\n        // }else {\n        //     this.mouthText.text = \"CLOSE\"\n        //     this.mouthOpen = false;\n        // }\n        // let rs = this.mouth.checkOpenRs()\n        // this.mouthText.text = \"\" + rs.val\n    }\n\n    finishEating() {\n\n\n        this.score++;\n        this.renderScore();\n    }\n\n    renderScore() {\n        if (!this.scoreText) {\n            this.scoreText = new PIXI.Text(`Score: ${this.score}`, new PIXI.TextStyle({\n                fontFamily: \"Futura\",\n                fontSize: 24,\n                fill: \"red\"\n            }))\n            this.scoreText.x = stageWidth - 100\n            this.scoreText.y = 25\n            this.app.stage.addChild(this.scoreText)\n        } else {\n            this.scoreText.text = `Score: ${this.score}`\n        }\n    }\n\n\n    renderTestText() {\n\n        let mouthText = new PIXI.Text(\"The End\");\n        this.mouthText = mouthText\n        mouthText.x = 15\n        mouthText.y = 15\n\n        this.app.stage.addChild(mouthText)\n    }\n\n\n    public setMouthPos(faceData: FaceData) {\n        // when landmarks\n        let rightPos = faceData.rightMouthPosition\n        let leftPos = faceData.leftMouthPosition\n        let bottomPos = faceData.bottomMouthPosition\n        \n        // when contour\n\n        if (!this.mouth) {\n            // this.mouth = new Mouth(leftPos, rightPos, bottomPos)\n            this.mouth = new Mouth([])\n            this.app.stage.addChild(this.mouth);\n        } else {\n            // this.mouth.refreshByNewContours(faceData.face)\n            this.mouth.refreshByNewContours(faceData)\n        }\n\n    }\n}\n\n\nexport default EatGame\n","\n\nimport Drawing from '@root/drawing'\nimport { Queue } from './queue'\nimport EatGame from '@game/game'\nimport { FaceData } from '@root/faceData'\n\nvar c:HTMLCanvasElement = <HTMLCanvasElement>document.getElementById('canvas');\nvar ctx = c.getContext('2d');\nc.width = document.body.clientWidth;\nc.height = document.body.clientHeight;\n\n\n\nvar faceDataQueue = new Queue()\n\nvar game = new EatGame();\n\n\nconst drawing = new Drawing();\ndrawing.SetCtx(ctx);\ndrawing.SetFaceDataQueue(faceDataQueue)\n\nsetTimeout( function(){\n\tconsole.log(\"width  height\", document.body.clientWidth, document.body.clientHeight);\n}, 1000);\n\nlet lasttime = +new Date\nwindow.addEventListener(\"message\", (event: MessageEvent)=> {\n    \n\t// For Chrome, the origin property is in the event.originalEvent\n\t// object.\n\t// 这里不准确，chrome没有这个属性\n\t// var origin = event.origin || event.originalEvent.origin;\n\tvar origin = event.origin;\n\t// console.log(\"screen size:::\", c.clientWidth, c.clientHeight)\n\t// console.log(\"event FROM RN::::\", typeof(event.data),  event.data)\n\n\t// ctx.clearRect(0, 0, c.width, c.height)\n\tlet faceData = event.data as FaceData\n\tfaceDataQueue.enqueue(faceData)\n\tgame.setMouthPos(faceData)\n\n\tconsole.log(\"time\", (+new Date) - lasttime )\n\tlasttime = +new Date\n\n\n\tif (window[\"ReactNativeWebView\"]) {\n\t\twindow[\"ReactNativeWebView\"].postMessage(\"Hello! From JS\");\n\t}\n}, false);\n"],"names":["PIXI.loader","PIXI.utils","PIXI.Graphics","PIXI.BaseTexture","PIXI.Texture","PIXI.TilingSprite","PIXI.Sprite","resources","TextureCache","PIXI.Rectangle","PIXI.Application","TWEEN.Tween","TWEEN.Easing","TWEEN.update","PIXI.Text","PIXI.TextStyle"],"mappings":"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"}