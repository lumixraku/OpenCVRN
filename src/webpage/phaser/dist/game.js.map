{"version":3,"file":"game.js","sources":["../src/constants.ts","../node_modules/tslib/tslib.es6.js","../src/game/mouth.ts","../src/game/spinTable.ts","../src/game/facePosCheck.ts","../src/game/cook.ts","../src/game/assetsLoader.ts","../src/game/animate.ts","../src/game/game.ts","../src/UI/DialogManager.ts","../src/UI/EffectManager.ts","../src/BaseScene.ts","../src/test.ts","../src/index.ts"],"sourcesContent":["// Message 类型\nconst MSG_TYPE_FACE = 'face'\nconst MSG_TYPE_CAM = 'cam' // RN  告知 WEB 取景器的位置\nconst MSG_TYPE_WEBVIEW_READY = 'webview_ready' // WEB 告知 RN OnMessage 事件已经准备好 RN可以post 消息了\nconst MSG_TYPE_FACE_TARGET_POS = 'face_target' // WEB 告知 RN 人脸应该固定的位置\n\n\n// scene\nconst BASE_SCENE = 'base'\nconst GAME_SCENE = 'game'\nconst UI_SCENE = 'uiScene'\nconst EF_SCENE = 'effectScene'\n\n// game\nconst DOGLOOK = 'doglook'\nconst DOGCOOK = 'dogcook'\nconst CHECKING_INTERVAL = 2000 // 回头检测的最短间隔\nconst CHECK_PROB = 0.9 //回头检测的概率\nconst CHECKING_DURATION = 3000\nconst FIRST_CHECK_ELAPSE = 2 // 第一次检查的时  游戏已经进行的时间\n\n// animation\nconst COOK_LOOKBACK_ANIMI = 'lookback'\nconst COOK_TOCOOK_ANIMI = 'cookAgain'\n\n\n\nexport {\n  //game\n  MSG_TYPE_FACE,\n  MSG_TYPE_CAM,\n  MSG_TYPE_WEBVIEW_READY,\n  MSG_TYPE_FACE_TARGET_POS,\n  DOGLOOK,\n  DOGCOOK,\n  CHECKING_INTERVAL,\n  CHECK_PROB,\n  CHECKING_DURATION,\n  FIRST_CHECK_ELAPSE,\n\n\n  // animation\n  COOK_LOOKBACK_ANIMI,\n  COOK_TOCOOK_ANIMI,\n\n  // scene\n  BASE_SCENE,\n  GAME_SCENE,\n  UI_SCENE,\n  EF_SCENE\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import PhaserImage = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport Graphics = Phaser.GameObjects.Graphics;\nimport PhaserText = Phaser.GameObjects.Text;\n\nconst stageWidth = document.body.clientWidth;\nconst stageHeight = document.body.clientHeight;\n\nexport default class Mouth {\n    public mouthRect: Rectagle = new Rectagle(0, 0, 0, 0);\n    public mouthAllPoints: Point[];\n    public upperTopPoints: Point[];\n    public upperBottomPoints: Point[];\n    public lowerTopPoints: Point[];\n    public lowerBottomPoints: Point[];\n\n    public mouthContour: Graphics;\n    public mouthStateText: PhaserText;\n\n    // private mouthColor: Graphics;\n\n    constructor(scene: Phaser.Scene) {\n        this.mouthContour = scene.add.graphics()\n        this.mouthStateText = scene.add.text(stageWidth - 100, -100, 'Hello World', { fontFamily: '\"Roboto Condensed\"' });\n    }\n\n    setMouthContourPoints(upperTop: Point[], upperBottom: Point[], lowerTop: Point[], lowerBottom: Point[]){\n        this.upperTopPoints = upperTop;\n        this.upperBottomPoints = upperBottom;\n        this.lowerTopPoints = lowerTop;\n        this.lowerBottomPoints = lowerBottom;\n\n        this.mouthAllPoints = [...upperTop, ...upperBottom, ...lowerTop, ...lowerBottom]\n        this.calcMouthRect()\n        this.drawContour()\n    }\n    calcMouthRect(){\n        let mouthPoints = this.mouthAllPoints;\n\n        let xVals = mouthPoints.map(p => {\n            return p.x\n        })\n        let yVals = mouthPoints.map(p => {\n            return p.y\n        })\n\n        let minX = Math.min(...xVals)\n        let maxX = Math.max(...xVals)\n        let minY = Math.min(...yVals)\n        let maxY = Math.max(...yVals)\n\n        this.mouthRect.setPosition(minX, minY);\n        this.mouthRect.setSize(maxX - minX, maxY - minY)\n    }\n    drawContour(){\n        let mouthPoints = this.mouthAllPoints;\n        this.mouthContour.clear()\n        this.mouthContour.lineStyle(5, 0xFF00FF, 1.0);\n        this.mouthContour.beginPath();\n\n        let idx = 0\n        for (let p of mouthPoints) {\n            if (idx == 0) {\n                this.mouthContour.moveTo(p.x, p.y);\n            } else {\n                this.mouthContour.lineTo(p.x, p.y);\n            }\n            idx++\n\n        }\n        this.mouthContour.closePath();\n        this.mouthContour.strokePath();\n    }\n\n    checkIfMouthClose() {\n        // return false\n        let isClose = false\n        if (this.mouthRect.height < 30 && this.mouthRect.height / this.mouthRect.width < 0.5) {\n            isClose = true\n        }\n\n        this.mouthStateText.text = \"\" + this.mouthRect.height //isClose ? \"close\" : \"open\"\n\n        return isClose\n    }\n\n    // 得到嘴巴中心点 用于确定动画结束的位置\n    getMouthCenter(): Point{\n        let mouthCenterX = this.mouthRect.x + this.mouthRect.width / 2;\n        let mouthCenterY = this.mouthRect.y + this.mouthRect.width / 2;\n\n        return new Point(mouthCenterX, mouthCenterY);\n    }\n}","import PhaserImage = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport Graphics = Phaser.GameObjects.Graphics;\nimport PhaserText = Phaser.GameObjects.Text;\nimport { Scene } from \"phaser\";\n\n\nconst stageWidth = document.body.clientWidth;\nconst stageHeight = document.body.clientHeight;\nimport { isPC } from '@root/test'\n\n\nconst angle2Rad = (angle: number) => {\n    return (Math.PI / 180) * angle\n}\n\nexport default class SpinTable {\n    public spSpin: Sprite;\n    public circle: Circle; //计算位置时用 并不是一个可见的对象\n    public spSpinSpeed: number = 1;\n\n    public circleRadius: number = stageWidth\n    public circleCenter: Point = new Point(stageWidth / 2, stageHeight + this.circleRadius / 2.3);    \n\n\n    public distanceAngle: number = 60  //食物和食物之间的间隔(角度)\n    public tableCapacity: number = 360 / this.distanceAngle; //根据间隔计算得到的桌面容量\n\n\n    constructor(pos: Point, radius: number, spinSpeed: number) {\n        this.circleCenter = pos\n        this.circleRadius = radius\n        this.spSpinSpeed = spinSpeed\n    }\n\n    addToContainer(scene: Scene){\n        this.spSpin = scene.add.sprite(this.circleCenter.x, this.circleCenter.y, 'table');\n        // if (isPC) {\n            this.spSpin.alpha = 0.5\n\n        // }\n        \n\n        let bds: Rectagle = this.spSpin.getBounds()\n        let width = bds.width\n\n        this.spSpin.setScale(this.circleRadius / (width / 2), this.circleRadius / (width / 2))\n\n        this.circle = new Phaser.Geom.Circle(this.circleCenter.x, this.circleCenter.y, this.circleRadius);        \n    }\n\n    setTableCapacity(tableCapacity: number) {\n        this.tableCapacity = tableCapacity\n        this.distanceAngle = 360 / tableCapacity\n    }\n\n    rotateTableSlightly(){\n        // 角度从x轴正方向开始算  顺时针旋转\n        // rotate 是使用的弧度\n        // angle 是角度\n        this.spSpin.angle += this.spSpinSpeed;\n    }\n\n    getAngle(): number {\n        return this.spSpin.angle\n    }\n\n    // 计算第 i 个食物的在当前桌面上的角度\n    // 桌子是顺时针旋转  但是食物的摆放顺序是逆时针\n    // i starts from 0\n    calcFoodIAngle(i: number):number {\n        let rawAngle = this.getAngle()\n        let angle = rawAngle + this.distanceAngle * (this.tableCapacity - i)\n        return angle\n            // 另外注意一下这里的 angle 按照正始终顺序旋转 在第一象限是 0 ~ -90  第二象限是 -90 ~ -180\n            // 第四象限是 0 ~ 90  第三象限是 90 ~ 180\n    }\n\n    calcAngleToPoint(angle:number):Point{\n        let point = new Phaser.Geom.Point(0, 0)\n        Phaser.Geom.Circle.CircumferencePoint(this.circle, angle2Rad(angle), point);\n        return point\n    }\n}","\n\nimport PhaserImage = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Vector2 = Phaser.Math.Vector2;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport Graphics = Phaser.GameObjects.Graphics;\nimport PhaserText = Phaser.GameObjects.Text;\nimport { Bounds } from \"@root/faceData\";\nimport { Scene, Tilemaps } from \"phaser\";\nimport { MSG_TYPE_FACE_TARGET_POS } from \"@root/constants\";\n\nconst stageWidth = document.body.clientWidth;\nconst stageHeight = document.body.clientHeight;\n\ninterface FaceInCircle {\n    pass: boolean\n    bounds: Bounds\n}\nexport { FaceInCircle }\n\nexport default class CamFaceCheck {\n    public facePoint: Point[]\n    public faceBounds: Bounds\n    public faceRect: Graphics\n\n\n    public camPreviewArea: Rectagle\n    public firstSetCamPreviewArea: Rectagle\n    public previewRect: Graphics\n    \n    \n    public facePosText: PhaserText\n\n\n    // 第一次被认为 OK 的脸部位置\n    // 之后人脸应该试图保持在这个位置\n    public targetFaceBounds: Bounds\n    public faceCenterPos: Vector2\n\n    public scene: Scene\n    constructor(scene?: Scene) {\n        this.scene = scene\n        this.faceRect = scene.add.graphics()\n        this.previewRect = scene.add.graphics()\n        this.facePosText = scene.add.text(stageWidth - 100, 250, 'Hello World', { fontFamily: '\"Roboto Condensed\"' });\n    }\n\n    refreshFacePosition(faceBounds: Bounds, facePoints: Point[]) {\n        this.faceBounds = faceBounds\n    }\n\n    // check if face is in the center of preview\n    // private \n    checkFacePosition(faceBounds: Bounds) {\n        let rs: FaceInCircle = {\n            pass: false,\n            bounds: null\n        }\n        if (!this.camPreviewArea) {\n            return rs\n        }        \n        if (faceBounds) {\n            let minFaceX = faceBounds.origin.x\n            let maxFaceX = faceBounds.origin.x + faceBounds.size.width\n\n            let minFaceY = faceBounds.origin.y\n            let maxFaceY = faceBounds.origin.y + faceBounds.size.height\n\n            this.drawFaceBounds(faceBounds)\n            // this.drawPreviewBounds(this.camPreviewArea)\n            let minPreviewX = this.camPreviewArea.x\n            let maxPreviewX = this.camPreviewArea.x + this.camPreviewArea.width\n            let minPreviewY = this.camPreviewArea.y\n            let maxPreviewY = this.camPreviewArea.y + this.camPreviewArea.height\n\n            let paddingLeft = minFaceX - minPreviewX\n            let paddingRight = maxPreviewX - maxFaceX\n            let paddingTop = maxFaceX - minPreviewX\n            let paddingBottom = maxPreviewY - maxFaceY\n\n            // this.facePosText.text = `${paddingLeft.toFixed(2)} --- ${paddingRight.toFixed(2)}`\n\n            if (paddingLeft / paddingRight > 2) {\n                this.facePosText.text = 'to right slightly'\n            } else if (paddingRight / paddingLeft > 2) {  \n                this.facePosText.text = 'to left slightly'\n            } else {\n                this.facePosText.text = 'Hold your phone!'\n                return {\n                    pass: true,\n                    bounds: faceBounds\n                }\n            }\n\n\n        }\n        return rs\n\n    }\n\n    drawPreviewBounds(previewCamArea: Rectagle) {\n        if (!previewCamArea) {\n            return\n        }\n\n        this.previewRect.clear()\n        this.previewRect.lineStyle(5, 0x00FFFF, 1.0);\n        this.previewRect.beginPath();\n\n        let minPreviewX = previewCamArea.x\n        let maxPreviewX = previewCamArea.x + previewCamArea.width\n        let minPreviewY = previewCamArea.y\n        let maxPreviewY = previewCamArea.y + previewCamArea.height\n\n        let points = [\n            new Point(minPreviewX, minPreviewY), new Point(maxPreviewX, minPreviewY),\n            new Point(maxPreviewX, maxPreviewY), new Point(minPreviewX, maxPreviewY)\n        ]\n\n\n        let idx = 0\n        for (let p of points) {\n            if (idx == 0) {\n                this.previewRect.moveTo(p.x, p.y);\n            } else {\n                this.previewRect.lineTo(p.x, p.y);\n            }\n            idx++\n        }\n        this.previewRect.closePath();\n        this.previewRect.strokePath();\n    }\n\n\n\n    drawFaceBounds(faceBounds: Bounds) {\n        this.faceRect.clear()\n        this.faceRect.lineStyle(5, 0xFF00FF, 1.0);\n        this.faceRect.beginPath();\n\n        let minFaceX = faceBounds.origin.x\n        let maxFaceX = faceBounds.origin.x + faceBounds.size.width\n\n        let minFaceY = faceBounds.origin.y\n        let maxFaceY = faceBounds.origin.y + faceBounds.size.height\n        let points = [\n            new Point(minFaceX, minFaceY), new Point(maxFaceX, minFaceY),\n            new Point(maxFaceX, maxFaceY), new Point(minFaceX, maxFaceY)\n        ]\n        let idx = 0\n        for (let p of points) {\n            if (idx == 0) {\n                this.faceRect.moveTo(p.x, p.y);\n            } else {\n                this.faceRect.lineTo(p.x, p.y);\n            }\n            idx++\n        }\n        this.faceRect.closePath();\n        this.faceRect.strokePath();\n\n    }\n    setCameraArea(camPreviewArea: Rectagle) {\n        this.camPreviewArea = camPreviewArea\n        if (!this.firstSetCamPreviewArea) {\n            this.firstSetCamPreviewArea = new Rectagle(0,0,0,0)\n            this.firstSetCamPreviewArea.x = this.camPreviewArea.x\n            this.firstSetCamPreviewArea.y = this.camPreviewArea.y\n            this.firstSetCamPreviewArea.width = this.camPreviewArea.width\n            this.firstSetCamPreviewArea.height = this.camPreviewArea.height\n        }\n    }\n\n    setTargetFaceBounds(facebds: Bounds) {\n\n        if (this.targetFaceBounds == null) {\n            this.targetFaceBounds = facebds\n            let centerX = facebds.origin.x + facebds.size.width\n            let centerY = facebds.origin.y + facebds.size.height\n            let distanceX = this.camPreviewArea.x - centerX\n            let distanceY = this.camPreviewArea.y - centerY      \n            this.faceCenterPos = new Vector2(centerX, centerY)\n            \n            // 同时告知 RN?  //脸的位置确定了\n            if (window[\"ReactNativeWebView\"]) {\n                let msg = {\n                    messageType: MSG_TYPE_FACE_TARGET_POS,                    \n                    actualData: {\n                        bounds: facebds,\n                    },\n                    time: +new Date\n                }\n                window[\"ReactNativeWebView\"].postMessage(JSON.stringify(msg));\n            }            \n\n        }\n    }\n\n    getTargetFaceBounds(): Bounds {\n        return this.faceBounds\n    }\n\n    updatePreviewPosByTarget(){\n        let faceCenterPos = this.faceCenterPos\n        let firstCamPreviewArea = this.firstSetCamPreviewArea\n        if (!firstCamPreviewArea){\n            return\n        }\n\n        if (!faceCenterPos) {\n            return \n        }\n        \n        let originCamArea = this.firstSetCamPreviewArea\n        let faceBounds = this.faceBounds\n        let centerX = faceBounds.origin.x + faceBounds.size.width\n        let centerY = faceBounds.origin.y + faceBounds.size.height\n\n        let distanceX = this.camPreviewArea.x - centerX\n        let distanceY = this.camPreviewArea.y - centerY \n        \n        let offset = new Point(\n            faceCenterPos.x - centerX,\n            faceCenterPos.y - centerY\n        )\n\n        this.camPreviewArea.x = originCamArea.x + offset.x\n        this.camPreviewArea.y = originCamArea.y + offset.y\n        this.drawPreviewBounds(this.camPreviewArea)\n        \n        \n\n\n    }\n}\n","\nimport Image = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\n\nimport { DOGLOOK, DOGCOOK, CHECKING_INTERVAL, COOK_LOOKBACK_ANIMI, COOK_TOCOOK_ANIMI } from '@root/constants'\n\n\n// Phaser.Sprite 中可以 play 动画\n// 但是 Phaser.Image 不行\nexport default class Cook extends Sprite {\n    private image: Image;\n\n\n\n    private checking: boolean;  // 已经完成回头  正在观察\n    private cooking: boolean = true; //做饭  \n    //PS  存在时间差 当cooking false checking也是false 的时候表示在扭头的过程中\n\n\n    private startCheckingTime: number = 0\n    private endCheckingTime: number = 0 //\n    public checkTimeCount: number = 0 //回头检查次数\n\n    constructor(scene: Phaser.Scene, x: number, y: number,) {\n        super(scene, x, y, DOGCOOK, 0)\n        // scene.add.image(0, 0, 'dog', 0)\n        // let img = new Image(scene,x,y,texture);\n        // scene.children.add(this);\n        scene.add.existing(this)\n        this.addAnimationListener()\n    }\n\n    setOriginToTopLeft() {\n        this.setOrigin(0, 0)\n    }\n\n    addAnimationListener() {\n        this.on('animationcomplete', (e) => {\n            console.log(\"animationcomplete\", e)\n            let eventKey = e.key // lookback ....\n\n            switch (eventKey) {\n                // 回头继续做饭动画结束  又开始做饭了\n                case COOK_TOCOOK_ANIMI:\n                    this.endCheckingTime = +new Date\n                    console.log(\"looking back\", this.endCheckingTime - this.startCheckingTime)\n                    this.checkTimeCount++\n                    this.cooking = true\n\n                    break;\n                case COOK_LOOKBACK_ANIMI:\n                    // this.startWatchingTime\n                    this.checkIfEatingAnimation()\n                default:\n                    break;\n            }\n        })\n    }\n\n\n    lookBack() {\n        // this.setTexture('doglook', 0)\n        this.cooking = false\n        this.startCheckingTime = +new Date\n        this.play(COOK_LOOKBACK_ANIMI)\n    }\n\n    // 厨师回头检查的时间在 1S-2S范围内\n    checkIfEatingAnimation() {\n        this.checking = true\n        let duration = Math.random() * 1500 + 1000\n        setTimeout(() => {\n            this.cookAgain()\n        }, duration)\n    }\n\n\n    cookAgain() {\n        // this.setTexture('dogcook', 0)\n        this.checking = false\n        // this.cooking = true  应该时动画结束的时候才开始 cooking  转头有一个过程\n         \n        // endCheckingTime 会在动画结束的时候计算\n        this.play(COOK_TOCOOK_ANIMI)\n    }\n\n    isCooking(): boolean {\n        return this.cooking\n    }\n    isChecking(): boolean {\n        return this.checking\n    }\n    isTurning(): boolean {\n        return !this.checking && !this.cooking\n    }\n\n\n    //是否刚刚回头过\n    ifJustChecked(elapsed: number): boolean {\n        if (this.endCheckingTime != 0 && this.endCheckingTime > this.startCheckingTime) {\n            let timeGap = +new Date - this.endCheckingTime\n            return (timeGap < CHECKING_INTERVAL)\n        }\n        return true\n    }\n\n}","import { Scene } from \"phaser\";\nimport { DOGCOOK } from \"@root/constants\";\n\n\n\nexport default class AssetsLoader {\n    scene: Scene\n    constructor(scene: Scene) {\n        this.scene = scene\n\n    }\n\n    loadPics() {\n        let scene = this.scene;\n        // yarn run dev 的时候 这个资源也还是从 dist 中读取的\n        scene.load.image('bgImg', 'assets/kitchen.png');\n        scene.load.image('table', 'assets/table.png');\n        scene.load.image('light', 'assets/light.png');\n\n        scene.load.image('food0', 'assets/burger.png');\n        scene.load.image('food1', 'assets/burrito.png');\n        scene.load.image('food2', 'assets/cheese-burger.png');\n        scene.load.image('food3', 'assets/chicken-leg.png');\n        scene.load.image('food4', 'assets/french-fries.png');\n        scene.load.image('food5', 'assets/donut.png');\n\n        scene.load.image('doglook', 'assets/front.png');\n\n        // 应当使用 gif 中的某一帧\n        // scene.load.image('dogcook', 'assets/back.png');\n        scene.load.image(DOGCOOK, `assets/dogeFrame/frame_00_delay-0.04s.gif`)\n\n        this.loadEmoji()\n\n        this.loadDogeAnimation()\n    }\n\n    loadDogeAnimation() {\n        let scene = this.scene\n        let endIndex = 47\n    \n        for(let idx = 0; idx<= endIndex; idx++) {\n            let idxStr = (idx < 10) ? '0' + idx : '' + idx\n            let fname = `assets/dogeFrame/frame_${idxStr}_delay-0.04s.gif`\n            let keyname = `dogeFrame${idx}`;\n\n            scene.load.image(keyname, fname)\n\n        }\n    }\n\n    loadEmoji(){\n        let scene = this.scene;\n        scene.load.image('sad', `assets/sad.png`)\n        scene.load.image('cry', `assets/cry.png`)\n        scene.load.image('sour', `assets/sour.png`)\n\n    }\n}","import PhaserImage = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport Graphics = Phaser.GameObjects.Graphics;\nimport PhaserText = Phaser.GameObjects.Text;\nimport Animation = Phaser.Animations.Animation;\nimport AnimationFrameType = Phaser.Types.Animations.AnimationFrame;\nimport { Scene } from \"phaser\"\nimport { COOK_LOOKBACK_ANIMI, COOK_TOCOOK_ANIMI } from \"@root/constants\";\n\nexport default class AnimateManager {\n    doge: Animation | false\n    scene: Scene\n\n    testDog: Sprite\n\n    constructor(scene: Scene) {\n        // 此刻 scene 还没有准备好\n        this.scene = scene\n    }\n\n    registerAnimation(){\n        this.cookLookback()\n        this.cookAgain()\n    }\n\n    cookLookback() {\n        let scene = this.scene\n        let makeFrames = ():AnimationFrameType[] => {\n            let arr: AnimationFrameType[] = []\n\n            let endIndex = 33 // 到 33 的时候停下来\n    \n            for(let idx = 0; idx<= endIndex; idx++) {\n                let keyname = `dogeFrame${idx}`;\n                arr.push( {\n                    key:  keyname,\n                } as AnimationFrameType)\n            }       \n            return arr     \n        }\n\n        // weired !!!\n        this.doge = scene.anims.create({\n            key: COOK_LOOKBACK_ANIMI,\n            frames: makeFrames(),\n            frameRate: 1/0.04, // 原始 gif 每一帧仅占用 0.04s\n            // repeat: -1\n        })\n    }\n    \n    cookAgain() {\n        let scene = this.scene\n        let makeFrames = ():AnimationFrameType[] => {\n            let arr: AnimationFrameType[] = []\n\n            let endIndex = 47 // 到 33 的时候停下来\n    \n            for(let idx = 33; idx<= endIndex; idx++) {\n                let keyname = `dogeFrame${idx}`;\n                arr.push( {\n                    key:  keyname,\n                } as AnimationFrameType)\n            }       \n            return arr     \n        }\n\n        // weired !!!\n        this.doge = scene.anims.create({\n            key: COOK_TOCOOK_ANIMI,\n            frames: makeFrames(),\n            frameRate: 1/0.04, // 原始 gif 每一帧仅占用 0.04s\n            // repeat: -1\n        })\n    }\n\n}","import PhaserImage = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport Graphics = Phaser.GameObjects.Graphics;\nimport PhaserText = Phaser.GameObjects.Text;\n\n\n\nconst stageWidth = document.body.clientWidth;\nconst stageHeight = document.body.clientHeight;\n// 在 RN 中得到的宽和高 是411 * 823\n// 在 webview 得到的宽高是 412 * 804  // 因为我的APP 并没有打开全屏\nimport { MSG_TYPE_FACE, MSG_TYPE_CAM, MSG_TYPE_WEBVIEW_READY, GAME_SCENE, UI_SCENE, EF_SCENE, CHECKING_DURATION, FIRST_CHECK_ELAPSE } from '@root/constants';\nimport { isPC } from '@root/test'\n\n\nimport Mouth from '@game/mouth'\nimport Food from '@game/food'\nimport { FaceData, Bounds } from '@root/faceData';\nimport SpinTable from './spinTable';\nimport CamFaceCheck, { FaceInCircle } from './facePosCheck';\nimport Cook from './cook';\nimport { UIPlugin } from 'UI';\nimport { Scene } from 'phaser';\nimport DialogScene from '@root/UI/DialogManager';\nimport EffectScene from '@root/UI/EffectManager';\nimport AssetsLoader from './assetsLoader';\nimport AnimateManager from './animate';\n\n\nexport default class Demo extends Phaser.Scene {\n    public assetsLoader: AssetsLoader\n    public animateManager: AnimateManager\n    public timer: Phaser.Time.TimerEvent\n\n    // // 旋转圆心\n    public spinTable: SpinTable\n    public spSpinSpeed: number = 1;\n    public circleRadius: number = stageWidth * 1.5\n    public tablePos: Point = new Point(stageWidth / 2 + this.circleRadius/2.2, stageHeight + this.circleRadius / 2);\n\n    public distanceAngle: number = 60  //食物和食物之间的间隔(角度)\n    public tableCapacity: number = 360 / this.distanceAngle; //根据间隔计算得到的桌面容量\n\n    public foodList: Food[] = [...Array(this.tableCapacity)].map(_ => null);\n\n    // mouth\n    public mouthObj: Mouth;\n\n    public camFaceCheck: CamFaceCheck;\n\n    // background\n    public bg: Graphics;\n    public bgImg: PhaserImage;\n\n    // cook\n    public cook: Cook;\n\n\n    //text\n    public mouthStateText: PhaserText;\n    private toastText: PhaserText\n    private scoreText: PhaserText\n    private testText: PhaserText\n    private hasCaughtToast: boolean\n    \n    \n\n    // preview 取景器\n    private previewArea: Rectagle = new Rectagle(0, 0, 0, 0)\n\n    // scene\n    private dialogScene: DialogScene;\n    private effScene: EffectScene;\n\n\n    constructor() {\n        super(GAME_SCENE);\n        this.assetsLoader = new AssetsLoader(this)\n        this.messageListener()\n    }\n\n    preload() {\n        this.assetsLoader.loadPics()\n    }\n\n\n    // preload 中的资源都加载完毕之后 才会调用 create\n    create() {\n\n        \n        this.timer = this.time.addEvent({\n            // delay: 500,                // ms\n            // callback: callback,\n            //args: [],\n            // callbackScope: thisArg,\n            loop: true\n        });        \n\n\n        this.bg = this.add.graphics()\n\n        this.drawBackground()\n        this.addCook()\n        this.addFace()\n        this.drawWheel()\n\n        // Phaser会根据 add 的先后顺序决定层级.\n        this.mouthObj = new Mouth(this);\n        this.refreshMouth([], [], [], [])\n\n\n        this.addText();\n        \n        this.dialogScene =  this.scene.get(UI_SCENE) as DialogScene\n        this.effScene = this.scene.get(EF_SCENE) as EffectScene\n        \n\n        this.animateManager = new AnimateManager(this)        \n        this.animateManager.registerAnimation()\n        \n    }\n\n\n    private frameCounter = 0\n    update(time, delta) {\n\n        this.rotateTable()\n        this.addFoodIfNeed()\n        this.movingFoodOnTable()\n        this.checkIfCouldEat()\n\n        this.frameCounter += 1\n\n        if (this.frameCounter >= 60) {\n            this.frameCounter = 0\n            this.update60Frame()\n        }\n\n    }\n\n    update60Frame() {\n        let elapsed = this.timer.getElapsedSeconds()\n        this.shouldCookLookBack(elapsed)\n    }\n    \n    shouldCookLookBack(elapsed: number) {\n        if (this.cook) {\n            let shouldLookBack =  Math.random()\n            let isCooking = this.cook.isCooking()\n            if (isCooking) {\n\n                if (this.cook.checkTimeCount== 0 ) {\n                    if (elapsed > FIRST_CHECK_ELAPSE ) {\n                        this.cook.lookBack()\n                    }\n                } else {\n    \n                    let isJustChecked = this.cook.ifJustChecked(elapsed)\n                    if (!isJustChecked  && shouldLookBack < 0.9) {\n                        this.cook.lookBack()\n                    }\n                }\n            }\n\n\n        }\n    }\n\n\n    rotateTable() {\n        // 右手顺时针\n        // this.spSpin.angle += this.spSpinSpeed;\n        this.spinTable.rotateTableSlightly()\n        \n    }\n\n    addCounter = 0\n    addFoodIfNeed() {\n        for (let i = 0; i < this.foodList.length; i++) {\n            // i = 0 angle 0\n            // i = 1 angle 60\n            // 盘子是空的, 且恰好转到合适的位置. 就添加食物\n            if (!this.foodList[i]) {\n\n\n                //\n                //               +\n                //               |\n                //               |\n                //               |\n                //   -90 ~ -180  |    0 ~ -90\n                //               |\n                //               |\n                //               |\n                //               |\n                // +-----------------------------+\n                //               |\n                //               |\n                //               |\n                //     90 - 180  |     0 - 90\n                //               |\n                //               |\n                //               |\n                //               |\n                //               +\n\n\n                // 由于phaser 的坐标不是连续的, 因此为了按照顺时针旋转一周得到 360 的角度, 需要做下面的处理\n                let rawAngle = this.spinTable.getAngle()\n                let mathAngle = rawAngle < 0 ? 360 + rawAngle : rawAngle\n                // 只在圆圈的 0° 这个位置(也就是坐标系 x )这个位置生成新的元素.\n                // 根据目前的采样率 得不到 mathAngle 为 1 的情况, 最接近1 是 1.79°\n                if (Math.abs(mathAngle - i * this.distanceAngle) < 2) {\n                    let foodTextureKey = `food${i}`\n                    let food = this.add.image(0, 0, foodTextureKey) as Food\n\n                    food.name = `Food${i}`\n                    food.setScale(2, 2)\n\n                    this.foodList[i] = food\n\n                    // console.log(\"angle add\", rawAngle, mathAngle, food.name)\n                    // this.foodList.push(food)\n                }\n            }\n        }\n    }\n\n    movingFoodOnTable() {\n\n        for (let i = 0; i < this.foodList.length; i++) {\n            let food = this.foodList[i];\n            if (!food) {\n                continue\n            }\n\n            // let rawAngle = this.spinTable.getAngle()\n            // let angle = rawAngle + this.distanceAngle * (this.tableCapacity  - i)\n            // 另外注意一下这里的 angle 按照正始终顺序旋转 在第一象限是 0 ~ -90  第二象限是 -90 ~ -180\n            // 第四象限是 0 ~ 90  第三象限是 90 ~ 180\n            let foodAngle = this.spinTable.calcFoodIAngle(i) //当前食物在桌上的角度\n            let point = this.spinTable.calcAngleToPoint(foodAngle)\n\n            // Phaser.Geom.Circle.CircumferencePoint(this.circle, angle2Rad(angle) , point);\n\n            food.x = point.x\n            food.y = point.y\n        }\n    }\n\n\n    refreshMouth(upperTop: Point[], upperBottom: Point[], lowerTop: Point[], lowerBottom: Point[]) {\n        if (this.mouthObj) {\n            this.mouthObj.setMouthContourPoints(upperTop, upperBottom, lowerTop, lowerBottom)\n\n        } else {\n            console.warn('mouth obj has not ready')\n        }\n\n    }\n\n    messageListener() {\n        window.addEventListener(\"message\", (event) => {\n            switch (event.data.messageType) {\n                case MSG_TYPE_FACE:\n                    // 不论取景器是否有偏移  这里得到的坐标就是相对于 webview 左上角而言的\n                    // offset 的处理已经在 RN 的部分完成\n                    let of: FaceData = event.data.faceData\n                    this.refreshMouth(of.upperLipTop, of.upperLipBottom, of.lowerLipTop, of.lowerLipBottom)\n                    this.refreshFaceBounds(of.bounds, of.face)\n\n                    break;\n                case MSG_TYPE_CAM:\n                    console.log(\"MSG_TYPE_CAM\")\n                    this.setCameraArea(event)\n\n                default:\n                    break;\n            }\n        }, false)\n\n        // 告知 RN webview 事件绑定上了\n        if (window[\"ReactNativeWebView\"]) {\n            let msg = {\n                messageType: MSG_TYPE_WEBVIEW_READY,\n                event: \"bindMessage\",\n                time: +new Date \n            }\n            window[\"ReactNativeWebView\"].postMessage(JSON.stringify(msg));\n        }\n    }\n\n    setCameraArea(event) {\n        if (this.camFaceCheck) {\n\n            let previewArea = event.data.previewArea\n            this.previewArea = previewArea\n            this.camFaceCheck.setCameraArea(previewArea)\n        }else {\n            console.log(\"camFaceCheck not defined!!!\")\n            setTimeout( ()=> {\n                this.setCameraArea(event)\n            }, 100)\n        }\n    }\n\n\n    // 所有的 offset 都移动到了 RN 的部分处理\n    // offsetPoints(webviewWidth: number,  webviewHeight, mouthPoints: Point[]) {\n    //     let scaleX = webviewWidth / this.previewWidth;\n    //     let scaleY = webviewHeight / this.previewHeight;\n\n    //     let newPoints = mouthPoints.map( p => {\n    //         return new Point(p.x + this.previewOffsetX, p.y + this.previewOffsetY )\n    //     })\n    //     return newPoints\n    // }\n\n\n\n\n    checkIfCouldEat() {\n        if (this.mouthObj.checkIfMouthClose()) {\n            return\n        }\n\n        if (this.previewArea.x == 0) {\n            console.warn(\"offsetXPreview is still zero\")\n            return\n        }\n        let offsetXPreview: number = this.previewArea.x\n        let offsetYPreview: number = this.previewArea.y\n        let previewWidth: number = this.previewArea.width\n        let previewHeight: number = this.previewArea.height\n\n\n        let destPos = this.mouthObj.getMouthCenter();\n        for (let i = 0; i < this.foodList.length; i++) {\n\n\n            let food = this.foodList[i]\n            if (!food) {\n                continue\n            }\n\n            if (food.eating) {\n                continue\n            }\n\n            let foodx = food.x\n            let foody = food.y\n\n\n            // 重新修改判定条件\n            // 当food 在摄像头范围内就可以吃\n            if (\n                (offsetXPreview < food.x && food.x < offsetXPreview + previewWidth)\n                &&\n                (offsetYPreview < food.y && food.y < offsetYPreview + previewHeight * 1.2 )\n                &&\n                !food.eating\n            ) {\n                // this.foodList.splice(i--, 1)\n                this.foodList[i] = null\n                this.eatingAnimation(food, destPos)\n                \n\n\n                break\n            }\n\n            // 来到了取景器右边 // 表示miss\n            if (food.x > offsetXPreview + previewWidth && food.y < offsetYPreview + previewHeight * 1.2 ) {\n                console.log('miss')\n            }\n        }\n    }\n\n    eatingAnimation(food: Food, dest: Point) {\n        food.eating = true\n        var tween = this.tweens.add({\n            targets: food,\n            x: dest.x,\n            y: dest.y,\n            scale: 0,\n            duration: 400,\n            ease: 'Power3',\n            onComplete: () => {\n                food.destroy()\n\n                // if not get caught\n                if (this.cook.isCooking()) {\n                    this.effScene.addCoin()\n                }else{\n                    if (this.cook.isChecking())\n                    this.caughtAnimation()\n\n                }\n                this.scoreText.text = +(this.scoreText.text) + 1 + ''\n            }\n        })\n        \n    }\n\n    caughtAnimation() {\n        this.effScene.addHammer()\n        this.dialogScene.createCaughtText(stageWidth/2, stageHeight/2, ()=> {})\n\n    }\n\n    missAnimation(){\n\n    }\n\n    drawHollowBackground() {\n        let faceCenter = new Point(300, 450)\n        let faceRadius = 200\n        this.bg.beginPath()\n        this.bg.moveTo(0, 0)\n        this.bg.lineTo(stageWidth, 0)\n        this.bg.lineTo(stageWidth, faceCenter.y)\n        this.bg.lineTo(faceCenter.x + faceRadius, faceCenter.y)\n        this.bg.arc(faceCenter.x, faceCenter.y, faceRadius, 0, Math.PI, true);\n        this.bg.lineTo(0, faceCenter.y)\n        this.bg.lineTo(0, 0)\n        this.bg.fillStyle(0xffeeff)\n        this.bg.fill()\n\n\n        this.bg.moveTo(stageWidth, stageHeight)\n        this.bg.lineTo(stageWidth, faceCenter.y)\n        this.bg.arc(faceCenter.x, faceCenter.y, faceRadius, 0, Math.PI, false);\n        this.bg.lineTo(0, faceCenter.y)\n        this.bg.lineTo(0, stageHeight)\n        this.bg.lineTo(stageWidth, stageHeight)\n        this.bg.fillStyle(0xffeeff)\n        this.bg.fill()\n    }\n\n    drawBackground() {\n        this.bgImg = this.add.image(0, 0, 'bgImg')\n        let bd: Rectagle = this.bgImg.getBounds()\n\n        this.bgImg.setPosition(0, 0)\n        // Phaser 中 Image 的默认 pivot 就是图片的中心点\n\n        this.bgImg.x = stageWidth / 2\n        this.bgImg.y = stageHeight / 2\n        this.bgImg.setScale(stageWidth / bd.width, stageHeight / bd.height)\n        // if (isPC) {\n            this.bgImg.alpha = 0.5; \n        // }\n\n    }\n\n    drawWheel() {\n        this.spinTable = new SpinTable(this.tablePos, this.circleRadius, this.spSpinSpeed)\n        this.spinTable.addToContainer(this)\n    }\n\n    addFace() {\n        this.camFaceCheck = new CamFaceCheck(this)\n    }\n\n    addText() {\n        // this.mouthStateText = this.add.text(stageWidth - 100, 0, 'Hello World', { fontFamily: '\"Roboto Condensed\"' });\n        // this.testText = this.add.text(170, 170, 'Hello World', { fontFamily: '\"Roboto Condensed\"' });\n        \n        this.scoreText = this.add.text(390, 50, '0', { \n            fontFamily: '\"Roboto Condensed\"',\n            color: 'red'\n        })\n        \n\n    }\n\n    refreshFaceBounds(bounds: Bounds, facePoints: Point[]) {   \n        if (!this.camFaceCheck) {\n            return\n        }\n\n        this.camFaceCheck.refreshFacePosition(bounds, facePoints)  \n        this.camFaceCheck.updatePreviewPosByTarget()\n\n        let rs: FaceInCircle = this.camFaceCheck.checkFacePosition(bounds)\n        if (rs.pass) {\n            this.camFaceCheck.setTargetFaceBounds(bounds)\n        }\n    }\n\n    addCook() {\n        this.cook = new Cook(this, 100, 400)\n    }\n\n    showScoreToast(text: string, delay:number, cb: Function) {\n        let toastText = this.add.text(0, 0, '', { fontFamily: '\"Roboto Condensed\"' })\n\n        toastText.x = stageWidth/2\n        toastText.y = stageWidth / 2\n        toastText.text = text\n        toastText.setFontSize(32)\n        toastText.setColor('red')\n\n        let dest = {\n            x: 390, y:50\n        }\n        setTimeout( ()=> {\n            this.tweens.add({\n                targets: toastText,\n                x: dest.x,\n                y: dest.y,\n                scale: 0,\n                duration: 1000,\n                ease: 'Power3',\n                onComplete: () => {\n                    cb()\n                    toastText.destroy()\n                }\n            })   \n        }, delay)\n    \n    }\n\n\n}\n","import { Scene } from \"phaser\";\nimport PhaserImage = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport Graphics = Phaser.GameObjects.Graphics;\nimport PhaserText = Phaser.GameObjects.Text;\n\n \nimport { UI_SCENE } from \"@root/constants\";\nimport { World } from \"matter\";\nconst stageWidth = document.body.clientWidth;\nconst stageHeight = document.body.clientHeight;\n\n\nexport default class DialogScene extends Phaser.Scene {\n\n\n    public testView: UI.Dialog\n    public welcome: UI.Dialog\n    public getCaught: UI.Dialog\n    public getCaughtText: PhaserText\n\n    constructor() {\n        super(UI_SCENE);\n    }\n\n    \n\n    preload() {\n        this.load.scenePlugin({\n            key: 'rexuiplugin',\n            url: '/rexuiplugin.min.js',\n            sceneKey: 'rexUI'\n        });\n\n\n    }\n\n    create() {\n\n        this.welcome = this.createWelcomeDialog(this, 300, 500)\n        this.testView = this.createDemoDialog(this, 0, 0)\n        // this.getCaught = this.createGetCaughtDialog(stageWidth/2, stageHeight/2) \n        \n\n        this.welcome.visible = false\n        this.testView.visible = false\n\n    }\n\n    update(time, delta) {\n    }\n\n    showWelcome() {\n        this.welcome.visible = true\n    }\n\n\n\n\n    createWelcomeDialog(scene: Scene, width: number, height: number): UI.Dialog {\n\n        let makeContentLabel = (content: string) => {\n\n            let x = width/2\n            let y = height/2\n            let contentLabel = scene.rexUI.add.label({\n                x:0,\n                y:0,\n                width: 40, // Minimum width of round-rectangle\n                height: 340, // Minimum height of round-rectangle            \n                background: scene.rexUI.add.roundRectangle(40, 40, 100, 240, 0, 0x00ccbb),\n                text: scene.add.text(0, 0, content, {\n                    fontSize: '12px',\n                    color: 0x888888\n\n                }),\n                space: {\n                    left: 10,\n                    right: 10,\n                    top: 10,\n                    bottom: 10\n                }\n            }).layout()\n            \n\n            return contentLabel\n        }\n\n        let makeFixWidthPanel = (maxwidth: number, content: string) => {\n            let sizer = this.rexUI.add.fixWidthSizer({\n                // child: makeContentLabel(content),\n                space: {\n                    left: 3,\n                    right: 3,\n                    top: 3,\n                    bottom: 3,\n                    item: 8,\n                    line: 8,\n                }\n            })\n            return sizer\n        }\n\n        let makeScrollSizer = (content: string):UI.ScrollablePanel => {\n            const COLOR_PRIMARY = 0x4e342e;\n            const COLOR_LIGHT = 0x7b5e57;\n            const COLOR_DARK = 0x260e04;\n            \n            let scrollPanel = scene.rexUI.add.scrollablePanel({\n                x: width/2,\n                y: height/2,\n                width: 240, // Minimum width of round-rectangle ???\n                height: 340, // Minimum height of round-rectangle ???      \n    \n                scrollMode: 0,\n                background: this.rexUI.add.roundRectangle(0, 0, 2, 2, 10, 0xcccccc),    \n                panel: {\n                    // child: makeContentLabel(content),\n                    child: makeFixWidthPanel(240, content),\n                    mask: {\n                        padding: 1\n                    },\n                },\n    \n                // slider: {\n                //     track: this.rexUI.add.roundRectangle(0, 0, 20, 10, 10, COLOR_DARK),\n                //     thumb: this.rexUI.add.roundRectangle(0, 0, 0, 0, 13, COLOR_LIGHT),\n                // },\n    \n                space: {\n                    left: 10,\n                    right: 10,\n                    top: 10,\n                    bottom: 10,\n    \n                    panel: 0,\n                }\n            }).layout()    \n            \n            let insertTextToPanel = (panel: UI.ScrollablePanel, content:string) => {\n                    var sizer = panel.getElement('panel');\n                    var scene = panel.scene;\n                \n                    sizer.clear(true);\n                    var lines = content.split('\\n');\n                    for (var li = 0, lcnt = lines.length; li < lcnt; li++) {\n                        var words = lines[li].split(' ');\n                        for (var wi = 0, wcnt = words.length; wi < wcnt; wi++) {\n                            sizer.add(\n                                scene.add.text(0, 0, words[wi], {\n                                    fontSize: 18\n                                })\n                                    // .setInteractive()\n                                    // .on('pointerdown', function () {\n                                    //     this.scene.print.text = this.text;\n                                    //     this.setTint(Phaser.Math.Between(0, 0xffffff))\n                                    // })\n                            );\n                        }\n                        if (li < (lcnt - 1)) {\n                            sizer.addNewLine();\n                        }\n                    }\n                \n                \n                    panel.layout();\n                    return panel;\n\n            }\n            insertTextToPanel(scrollPanel, content)\n            return scrollPanel\n        }\n\n        // x y 用于定位panel的位置  默认 xy 是panel 的中心点\n        let x = stageWidth / 2\n        let y = stageHeight / 2\n\n        let contentStr = `Phaser is a fast, free, and fun open source HTML5 game framework that offers WebGL and Canvas rendering across desktop and mobile web browsers. Games can be compiled to iOS, Android and native apps by using 3rd party tools. You can use JavaScript or TypeScript for development.\n        Along with the fantastic open source community, Phaser is actively developed and maintained by Photon Storm. As a result of rapid support, and a developer friendly API, Phaser is currently one of the most starred game frameworks on GitHub.\n        Thousands of developers from indie and multi-national digital agencies, and universities worldwide use Phaser. You can take a look at their incredible games.`\n\n        // 默认x y 是 Dialog 中心位置   也就是说 Pivot 默认是 center \n        let dialog = scene.rexUI.add.dialog({\n            x: x,\n            y: y,\n            width: width,\n            // height: height,\n\n            // background 并不在意大小的\n            background: scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0xf57f17),\n\n            title: scene.rexUI.add.label({\n                background: scene.rexUI.add.roundRectangle(0, 0, 100, 40, 20, 0xbc5100),\n                text: scene.add.text(0, 0, 'Notice', {\n                    fontSize: '20px'\n                }),\n                space: {\n                    left: 10,\n                    right: 10,\n                    top: 10,\n                    bottom: 10\n                }\n            }),\n\n            // content: makeContentLabel(contentStr),\n            content: makeScrollSizer(contentStr),\n            actions: [\n                this.createButton(this, 'OK', 0xf57f17),\n            ],\n\n            actionsAlign: '  center  ',\n            space: {\n                title: 10,\n                action: 45, // ?? 没有效果 \n                content: 25, //指 content 下方的空白区域高度\n\n                left: 10,\n                right: 10,\n                top: 10,\n                bottom: 10,\n            }\n        })\n\n        dialog\n            .on('button.click', function (button, groupName, index, pointer, event) {\n                // this.print.text += groupName + '-' + index + ': ' + button.text + '\\n';\n                dialog.scaleDownDestroy(100);\n\n            }, this)\n            .on('button.over', function (button, groupName, index, pointer, event) {\n                button.getElement('background').setStrokeStyle(1, 0xffffff);\n            })\n            .on('button.out', function (button, groupName, index, pointer, event) {\n                button.getElement('background').setStrokeStyle();\n            });\n\n        dialog.layout()//.pushIntoBounds()\n        dialog.visible = false\n        return dialog\n    }\n\n    createDemoDialog(scene: Scene, x: number, y: number): UI.Dialog {\n\n        scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0xe91e63)\n        return scene.rexUI.add.dialog({\n            x: x,\n            y: y,\n\n            background: scene.rexUI.add.roundRectangle(0, 0, 100, 100, 20, 0xf57f17),\n\n            title: scene.rexUI.add.label({\n                background: scene.rexUI.add.roundRectangle(0, 0, 100, 40, 20, 0xbc5100),\n                text: scene.add.text(0, 0, 'Pick a color', {\n                    fontSize: '20px'\n                }),\n                space: {\n                    left: 15,\n                    right: 15,\n                    top: 10,\n                    bottom: 10\n                }\n            }),\n\n            actions: [\n                scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0xe91e63),\n                scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0x673ab7),\n                scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0x2196f3),\n                scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0x00bcd4),\n                scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0x4caf50),\n                scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0xcddc39),\n            ],\n\n            actionsAlign: 'left',\n\n            space: {\n                title: 10,\n                action: 5,\n\n                left: 10,\n                right: 10,\n                top: 10,\n                bottom: 10,\n            }\n        })\n            .layout()\n            .pushIntoBounds()\n            //.drawBounds(this.add.graphics(), 0xff0000)\n            .popUp(500);\n\n\n\n    }\n\n    createCaughtText(x:number, y:number, cb: Function ):Phaser.GameObjects.Container  {\n        let containerWidth = 400\n        let containerHeight = 100\n        let containerPos = new Point(stageWidth/2,  stageHeight/2 * 1.6)\n        let container = this.add.container(containerPos.x, stageHeight)\n                \n        let toastText = this.add.text(0, 0, 'You get Caught!!', { fontFamily: '\"Arial\"' })\n        // this.hasCaughtToast = true\n        // toastText.x = stageWidth / 2\n        // toastText.y = stageHeight / 2\n        toastText.setFontSize(42)\n        toastText.setColor('red')\n        // toastText.setScale(0)\n        toastText.setOrigin(0.5)\n\n        // let bg = this.rexUI.add.roundRectangle(0, 0, 100, 240, 0, 0x00ccbb)\n        // 使用graphics的时候都是从左上角开始画  \n        // 而 container 的默认origin 是中心位置， （且无法更改？？）\n        // 添加元素的时候也是将子元素的origin 和 父容器的origin 对齐\n        // graphic 的 origin 是左上角\n        let bg = this.drawRoundRect(\n            new Rectagle(-containerWidth/2, -containerHeight/2, containerWidth, containerHeight), \n            20, \n            0x99aaee,\n            5,\n            0xaabbff,            \n        )\n        \n        \n        container.add([bg, toastText])\n\n        this.tweens.add({\n            targets: container,\n            scale: 1,\n            duration: 232,\n            x: containerPos.x,\n            y: containerPos.y,            \n            ease: 'Power3',\n            onComplete: () => {\n                setTimeout(()=> {\n                    this.tweens.add({\n                        targets: container,\n                        y: stageHeight * 1.2,\n                        alpha:0,\n                        duration: 232,\n                        ease: 'Power3',                    \n                        onComplete: () => {\n                            container.destroy()\n                        }\n                    })\n                }, 432)\n            }\n        })\n        return container        \n    }\n\n    createGetCaughtDialog(x: number, y: number): UI.Dialog {\n        let scene = this\n        scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0xe91e63)\n\n        // 你被抓住了 计划从左往右显示\n        // 然后发现做不到  Dialog 一定会在屏幕区域内显示\n        let popup = scene.rexUI.add.dialog({\n            x: 0, // 所以一开始在左边放起来\n            y: 0,\n\n            background: scene.rexUI.add.roundRectangle(0, 0, 100, 100, 20, 0xf57f17),\n            content: scene.rexUI.add.label({\n                    background: scene.rexUI.add.roundRectangle(0, 0, 100, 40, 20, 0xbc5100),\n                    text: scene.add.text(0, 0, '\\nYou get Caught!!\\n', {\n                        fontSize: '30px'\n                    }),\n                    space: {\n                        left: 15,\n                        right: 15,\n                        top: 10,\n                        bottom: 10\n                    }\n                }),\n            // title: scene.rexUI.add.label({\n            //     background: scene.rexUI.add.roundRectangle(0, 0, 100, 40, 20, 0xbc5100),\n            //     text: scene.add.text(0, 0, 'Pick a color', {\n            //         fontSize: '20px'\n            //     }),\n            //     space: {\n            //         left: 15,\n            //         right: 15,\n            //         top: 10,\n            //         bottom: 10\n            //     }\n            // }),\n\n            // actions: [\n            //     scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0xe91e63),\n            //     scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0x673ab7),\n            //     scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0x2196f3),\n            //     scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0x00bcd4),\n            //     scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0x4caf50),\n            //     scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0xcddc39),\n            // ],\n\n            actionsAlign: 'left',\n\n            space: {\n                title: 10,\n                action: 5,\n\n                left: 10,\n                right: 10,\n                top: 10,\n                bottom: 10,\n            }\n        })\n            .layout()\n            .pushIntoBounds()\n            //.drawBounds(this.add.graphics(), 0xff0000)\n            // .popUp(500);\n\n        // this.tweens.add({\n        //     targets: popup,\n        //     x: stageWidth/2,\n        //     y: stageHeight/2,\n        //     duration: 400,\n        //     ease: 'Power3',\n        //     yoyo: true,\n        //     onComplete: () => {\n\n        //     }\n        // })\n\n        return popup\n        \n    }\n\n    createButton(scene: Scene, text:string, color: any, space?: any) {\n        return scene.rexUI.add.label({\n            x: 0,\n            y: 100,\n            width: 40, // Minimum width of round-rectangle\n            height: 40, // Minimum height of round-rectangle\n          \n            background: scene.rexUI.add.roundRectangle(0, 0, 100, 40, 20, 0x5e92f3),\n\n            text: scene.add.text(0, 0, text, {\n                fontSize: '24px'\n            }),\n    \n            space: space || {\n                left: 10,\n                right: 10,\n                top: 10,\n                bottom: 10\n            }\n        });\n    }\n\n    drawRoundRect(size: Rectagle, radius:number,  color: any, borderWidth?:number, borderColor?: any) {\n\n        \n        let bg = this.add.graphics()\n        bg.clear()\n        bg.beginPath()\n\n        let x = size.x\n        let y = size.y\n        let width = size.width\n        let height = size.height\n        bg.fillStyle(color)\n        // 没有 setOrigin 函数   graphics 的 origin 就是左上角\n        bg.fillRoundedRect(x, y, width, height, radius)\n\n        if (borderWidth) {\n            let x2 = x + borderWidth\n            let y2 = y + borderWidth\n            bg.fillStyle( borderColor )\n            bg.fillRoundedRect(x2, y2, width- 2* borderWidth, height - 2 * borderWidth, radius - borderWidth)\n        }        \n        \n\n        return bg\n\n    }\n\n}\n\n","import { Scene } from \"phaser\";\nimport { EF_SCENE } from \"@root/constants\";\n\nconst stageWidth = document.body.clientWidth;\nconst stageHeight = document.body.clientHeight;\n\ninterface AnimationPlaying {\n    hammer: boolean\n    \n}\n\nexport default class EffectScene extends Phaser.Scene { \n    public coin: PhaserImage\n    public hammer:PhaserImage\n    public emojiFace: PhaserImage\n\n    public animationPlaying: AnimationPlaying = {\n        hammer: false\n    }\n\n    constructor() {\n        super(EF_SCENE);\n    }\n    preload() {\n        // this.load.scenePlugin({\n        //     key: 'rexuiplugin',\n        //     url: '/rexuiplugin.min.js',\n        //     sceneKey: 'rexUI'\n        // });\n        this.load.image('coin', 'assets/coin.png');\n        this.load.image('hammer', 'assets/hammer.png');\n    }\n\n    create(){\n    }\n    \n    addCoin() {\n        this.coin = this.add.image(stageWidth/2, stageHeight/2, 'coin')\n        // this.coin.displayWidth = 64\n        // this.coin.displayHeight = 64\n        // scale 是根据原图的大小而言的。\n        this.coin.setScale(0.1)\n\n\n        let dest = {\n            x: 390, y:50\n        }\n        this.tweens.add({\n            targets: this.coin,\n            scale: 0.5,\n            duration: 132,\n            ease: 'Power4',\n            onComplete: () => {\n                // cb()\n\n                this.tweens.add({\n                    targets: this.coin,\n                    x: dest.x,\n                    y: dest.y,\n                    scale: 0,\n                    duration: 432,\n                    ease: 'Circ',\n                    onComplete: () => {\n                        // cb()\n                        this.coin.destroy()\n                    }\n                })                 \n            }            \n        })\n    }\n\n    addHammer() {\n        if (this.animationPlaying.hammer) {\n            return\n        }\n\n\n        this.animationPlaying.hammer = true\n        let AlternativeEmoji = ['sad', 'cry', 'sour']\n        let hitEmoji = Phaser.Math.RND.pick(AlternativeEmoji)\n\n        this.hammer = this.add.image(258, 327, 'hammer')\n        this.emojiFace = this.add.image(285,520, hitEmoji)\n        this.emojiFace.setScale(0.3)\n\n        this.hammer.setScale(0.3)\n        this.hammer.rotation = 1\n\n        this.tweens.add({\n            targets: this.hammer,\n            rotation: 1.5,\n            duration: 232,\n            hold: 332,\n            yoyo: true,\n            ease: 'Power3',\n            onComplete: () => {\n                this.hammer.destroy()\n                this.emojiFace.destroy()\n\n                this.animationPlaying.hammer = false\n            },             \n        })\n    }\n\n}","import { BASE_SCENE, GAME_SCENE, EF_SCENE, UI_SCENE } from \"./constants\";\nimport { Scene } from \"phaser\";\nimport DialogScene from \"./UI/DialogManager\";\nimport EffectScene from \"./UI/EffectManager\";\n\nconst stageWidth = document.body.clientWidth;\nconst stageHeight = document.body.clientHeight;\n\nexport default class BaseScene extends Phaser.Scene {\n\n    private dialogScene: DialogScene\n\n    constructor() {\n        super(BASE_SCENE)\n    }\n\n\n    init() {\n\n    }\n\n    preload() {\n        this.load.scenePlugin({\n            key: 'rexuiplugin',\n            url: '/rexuiplugin.min.js',\n            sceneKey: 'rexUI'\n        });\n    }\n    create() {\n        this.scene.launch(GAME_SCENE)\n        this.scene.launch(EF_SCENE)\n        this.scene.launch(UI_SCENE)\n        // this.scene.launch(UI_SCENE).start();\n        // this.scene.launch(EF_SCENE);        \n\n\n        // this.scene.launch(UI_SCENE)\n        // this.scene.launch(UI_SCENE).start();\n        // this.scene.launch(EF_SCENE);\n        \n        // this.dialogScene.showWelcome()\n        // this.effScene.addHammer()\n        this.dialogScene = this.scene.get(UI_SCENE) as DialogScene\n        // this.effScene = this.scene.get(EF_SCENE) as EffectScene\n\n        // 此刻调用提示 rexUI undefined\n        // this.dialogScene.createGetCaughtDialog(stageWidth/2, stageHeight/2) \n\n    }\n\n\n}","import Image = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport VConsole from \"vconsole\";\nimport { FaceData, Bounds } from \"./faceData\";\nimport { MSG_TYPE_FACE, MSG_TYPE_CAM, MSG_TYPE_WEBVIEW_READY, GAME_SCENE } from '@root/constants';\n\n// 使用 namespace 定义的类型可以直接用\nimport Coco = MyName.Coco\n\n// 使用 module 定义的一定要 import 才能用\nimport { PIPI } from \"./types/myModule\";\n\nvar offsetXPreview = 170\nvar offsetYPreview = 250\nvar previewWidth = 198\nvar previewHeight = previewWidth * 16 / 9\n\nvar isPC = window.navigator.userAgent.indexOf(\"PCMozilla\") != -1\n\nexport { changeMouth, setPreview, isPC, testClickEvent }\n\n// 给坐标加上取景器的偏移信息\n// 原本的坐标信息是人脸相对取景器的位置\n// 现在坐标信息变为相对整个画布的位置\nfunction addOffsetForFaceData(target) {\n  const checkedType = (target) => {\n    return Object.prototype.toString.call(target).slice(8, -1)\n  }\n  //判断拷贝的数据类型\n  //初始化变量result 成为最终克隆的数据\n  let result\n  let targetType = checkedType(target)\n  if (targetType === 'Object') {\n    result = {}\n  } else if (targetType === 'Array') {\n    result = []\n  } else {\n    return target\n  }\n  //遍历目标数据\n  for (let [key, value] of Object.entries(target)) {\n    //获取遍历数据结构的每一项值。\n    // let value = target[key]\n    //判断目标结构里的每一值是否存在对象/数组\n    if (checkedType(value) === 'Object' ||\n      checkedType(value) === 'Array') { //对象/数组里嵌套了对象/数组\n      //继续遍历获取到value值\n      result[key] = addOffsetForFaceData(value)\n    } else { //获取到value值是基本的数据类型或者是函数。\n\n      if (key == \"x\") {\n        result[key] = offsetXPreview + (value as number)\n\n      } else if (key == \"y\") {\n        result[key] = offsetYPreview + (value as number)\n\n      } else {\n        result[key] = value;\n\n      }\n    }\n  }\n  return result\n}\n// set preview area\n\nfunction setPreview() {\n\n  window.addEventListener(\"load\", () => {\n    setTimeout(() => {\n      window.postMessage({\n        messageType: MSG_TYPE_CAM,\n        previewArea: {\n          y: offsetYPreview,\n          x: offsetXPreview,\n          width: previewWidth,\n          height: previewHeight\n        },\n      }, \"*\")\n    }, 1000)\n\n  }, false)\n}\n\n\n// 测试嘴巴位置\nfunction changeMouth(game: Phaser.Game) {\n\n  //contours sample data\n  window.addEventListener(\"load\", () => {\n    let offsetSpeed = 3\n\n\n    let movingFaceBounds = (bounds: Bounds, dir: number) => {\n      let offset = 0\n      // dir 0下 1左 2上 3右\n\n      if (dir == 0 || dir == 2) {\n        offset = dir == 2 ? -offsetSpeed : offsetSpeed\n        bounds.origin.y = bounds.origin.y + offset\n      } else {\n        offset = dir == 1 ? -offsetSpeed : offsetSpeed\n        bounds.origin.x = bounds.origin.x + offset\n      }\n    }\n    let movingYPoints = (points: Point[], dir) => {\n      // dir 0下 1左 2上 3右\n\n      let offset = 0\n      if (dir == 2) {\n        offset = -offsetSpeed\n      } else {\n        offset = offsetSpeed\n      }\n\n      for (let p of points) {\n        p.y = p.y + offset\n      }\n    }\n\n    let movingXPoints = (points: Point[], dir) => {\n      let offset = 0\n      if (dir == 1) {\n        offset = -offsetSpeed\n      } else {\n        offset = offsetSpeed\n      }\n\n\n      for (let p of points) {\n        p.x = p.x + offset\n      }\n    }\n\n    let moveFace = (oneFace: FaceData, dir: number) => {\n      // dir 0下 1左 2上 3右\n      if (dir == 0 || dir == 2) {\n        movingYPoints(oneFace.lowerLipBottom, dir)\n        movingYPoints(oneFace.lowerLipTop, dir)\n        movingYPoints(oneFace.upperLipBottom, dir)\n        movingYPoints(oneFace.upperLipTop, dir)\n        movingFaceBounds(oneFace.bounds, dir)\n      } else {\n        movingXPoints(oneFace.lowerLipBottom, dir)\n        movingXPoints(oneFace.lowerLipTop, dir)\n        movingXPoints(oneFace.upperLipBottom, dir)\n        movingXPoints(oneFace.upperLipTop, dir)\n        movingFaceBounds(oneFace.bounds, dir)\n      }\n    }\n\n\n    // 这个数据是和取景器大小有关的数据 \n    // 当 RN 的部分设置了取景器大小的时候, 返回的脸的位置也根据 RN 这里的实际尺寸有所压缩\n    // 但是和取景器的位移无关  毕竟安卓端也不知道取景器的相对位置\n    fetch('/assets/sampleContours.json').then(resp => {\n      return resp.json()\n    }).then(data => {\n      setTimeout(() => {\n        // 在PC上调试\n        if (window.navigator.userAgent.indexOf(\"PCMozilla\") != -1) {\n          let oneFace: FaceData = data[0]\n          let i = 0\n\n          let changeDir = 0  // 0下 1上 2左 3右\n          setInterval(() => {\n            if (i++ == 2) {\n              i = 0\n              changeDir = (++changeDir) % 4\n            }\n\n            moveFace(oneFace, changeDir)\n            let afterOffsetForFaceData = addOffsetForFaceData(oneFace)\n\n            window.postMessage({\n              messageType: 'face',\n              faceData: afterOffsetForFaceData\n            }, \"*\")\n\n          }, 100)\n        }\n      }, 1000)\n    })\n  }, false)\n\n\n  // let points = [{x:100, y:500}, {x:200, y:600}, {x:100, y:600}, {x:200, y:600}]\n\n\n}\n\n\n// 获取鼠标点击位置\nfunction testClickEvent(game: Phaser.Game) {\n  window.addEventListener('load', () => {\n    setTimeout(() => {\n      game.scene.getScene(GAME_SCENE).input.on('pointerup', function (pointer) {\n        var touchX = pointer.x;\n        var touchY = pointer.y;\n        // let x = game.input.mousePointer.x;\n        // let y = game.input.mousePointer.y;\n        console.log('clickXY', touchX, touchY)\n        // ...\n      });\n\n    })\n  }, false)\n}\n\n","\r\nconsole.log(Phaser.AUTO)\r\nconsole.log(Phaser.AUTO)\r\n\r\n\r\nimport { MSG_TYPE_FACE, MSG_TYPE_CAM, MSG_TYPE_WEBVIEW_READY, UI_SCENE, BASE_SCENE} from '@root/constants';\r\n// import UIPlugin from 'phaser3-rex-plugins/templates/ui/ui-plugin.js';\r\n\r\n\r\nconst stageWidth = document.body.clientWidth;\r\nconst stageHeight = document.body.clientHeight;\r\n\r\n\r\nimport GameScene from '@game/game'\r\nimport DialogScene from '@root/UI/DialogManager'\r\nimport EFScene from '@root/UI/EffectManager'\r\nimport BaseScene from './BaseScene';\r\n\r\n\r\n\r\nconst config: Phaser.Types.Core.GameConfig = {\r\n    type: Phaser.AUTO,\r\n    parent: 'phaser-example',\r\n    width: stageWidth,\r\n    height: stageHeight,\r\n    scene: [ BaseScene, GameScene,EFScene, DialogScene],\r\n    transparent: true,\r\n    physics: {\r\n        default: 'arcade',\r\n        arcade: {\r\n            gravity: { y: 300 },\r\n            debug: false\r\n        }\r\n    },\r\n    // 这个 npm 包存在问题\r\n    // plugins: {\r\n    //     scene: [\r\n    //     {´´´´´´´´´´´\r\n    //         key: 'rexUI',\r\n    //         plugin: UIPlugin,\r\n    //         mapping: 'rexUI'\r\n    //     },\r\n    //     ]\r\n    // }    \r\n};\r\nconst game = new Phaser.Game(config);\r\nconsole.log(game.scene.isSleeping(BASE_SCENE)) \r\n// game.scene.add(UI_SCENE, UIManagerScene)\r\n// game.scene.getScene()  game.scene 是 SceneManager  getScene()才是 Phaser.Scene\r\n\r\n\r\nimport { changeMouth, setPreview, testClickEvent } from 'test'\r\n\r\nchangeMouth(game)\r\nsetPreview()\r\ntestClickEvent(game)\r\n\r\n"],"names":["Point","stageWidth","stageHeight","Rectagle","GameScene","EFScene"],"mappings":"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"}