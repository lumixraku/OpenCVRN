{"version":3,"file":"game.js","sources":["../src/constants.ts","../node_modules/tslib/tslib.es6.js","../src/test.ts","../src/game/mouth.ts","../src/game/spinTable.ts","../src/game/facePosCheck.ts","../src/game/cook.ts","../src/game/animate.ts","../src/game/soundManager.ts","../src/UI/UIHelper.ts","../src/game/gameUILayer.ts","../src/game/gameEffectLayer.ts","../src/game/DialogLayer.ts","../src/game/game.ts","../src/UI/GameUIScene.ts","../src/UI/EffectScene.ts","../src/UI/SettingsScene.ts","../src/BaseScene.ts","../src/UI/AssetsScene.ts","../src/index.ts"],"sourcesContent":["\nconst stageWidth = document.body.clientWidth;\nconst stageHeight = document.body.clientWidth / 9 * 16;\n\n\n\n// Message 类型\nconst MSG_TYPE_FACE = 'face'\nconst MSG_TYPE_CAM = 'cam' // RN  告知 WEB 取景器的位置\nconst MSG_TYPE_WEBVIEW_READY = 'webview_ready' // WEB 告知 RN OnMessage 事件已经准备好 RN可以post 消息了\nconst MSG_TYPE_FACE_TARGET_POS = 'face_target' // WEB 告知 RN 人脸应该固定的位置\n\n\n// scene\nconst BASE_SCENE = 'base'\nconst GAME_SCENE = 'game'\nconst GAMEUI_SCENE = 'gameUIScene'\nconst EF_SCENE = 'effectScene'\nconst SETTINGS_SCENE = 'settingsScene'\nconst ASSETS_SCENE = 'assetsScene'\nconst LOADING_SCENE = 'loadingScene'\n\n\n// game\nconst DOGLOOK = 'doglook'\nconst DOGCOOK = 'dogcook'\nconst CHECKING_INTERVAL = 2000 // 回头检测的最短间隔\nconst CHECK_PROB = 0.9 //回头检测的概率\nconst CHECKING_DURATION = 3000\nconst FIRST_CHECK_ELAPSE = 2 // 第一次检查的时  游戏已经进行的时间\nconst DISTANCE_ANGLE = 40\n\n// game UI\nconst BACKGROUND = 'background'\nconst SOUNDKEY = 'clickSound'\nconst MUSICKEY = 'music'\n\n// animation\nconst COOK_LOOKBACK_ANIMI = 'lookback'\nconst COOK_TOCOOK_ANIMI = 'cookAgain'\nconst HIT_DIZZY = 'hitDizzy'\n\n// color\nconst MAIN_RED = 0xfc6158\nconst MAIN_RED_LIGHT = 0xf9ebe9\n\n\n// food\nconst FOOD_LIST_FNAME_MAP = {\n  'food0':'010-grapes',\n  'food1':'001-burger',\n  'food2':'001-ice-cream',\n  'food3':'002-burger-1',\n  'food4':'002-ice-cream-1',\n  'food5':'003-french-fries',\n  'food6':'003-ice-cream-2',\n  'food7':'004-fried-egg',\n  'food8':'004-ice-cream-stick',\n  'food9':'005-bottle',\n  'food10': '006-banana',\n  'food11': '007-orange',\n  'food12': '008-orange-1',\n  'food13': '009-apple',\n}\n\nexport {\n  //SCREEN \n  stageWidth, \n  stageHeight,\n\n\n  //game\n  MSG_TYPE_FACE,\n  MSG_TYPE_CAM,\n  MSG_TYPE_WEBVIEW_READY,\n  MSG_TYPE_FACE_TARGET_POS,\n  DOGLOOK,\n  DOGCOOK,\n  CHECKING_INTERVAL,\n  CHECK_PROB,\n  CHECKING_DURATION,\n  FIRST_CHECK_ELAPSE,\n  DISTANCE_ANGLE,\n\n  BACKGROUND,\n  SOUNDKEY,\n  MUSICKEY,\n  FOOD_LIST_FNAME_MAP, \n\n  //color\n  MAIN_RED, \n  MAIN_RED_LIGHT,\n\n\n  // animation\n  COOK_LOOKBACK_ANIMI,\n  COOK_TOCOOK_ANIMI,\n  HIT_DIZZY,\n  \n  // scene\n  BASE_SCENE,\n  GAME_SCENE,\n  GAMEUI_SCENE as UI_SCENE,\n  EF_SCENE,\n  SETTINGS_SCENE,\n  ASSETS_SCENE,\n  LOADING_SCENE,\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import Image = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport VConsole from \"vconsole\";\nimport { FaceData, Bounds } from \"./faceData\";\nimport { MSG_TYPE_FACE, MSG_TYPE_CAM, MSG_TYPE_WEBVIEW_READY, GAME_SCENE } from './constants';\n\n// 使用 namespace 定义的类型可以直接用 (vscode可以直接识别)\n// import Coco = MyName.Coco\n\n// 使用 module 定义的一定要 import 才能用\nimport { PIPI } from \"./types/myModule\";\n\nvar offsetXPreview = 170\nvar offsetYPreview = 250\nvar previewWidth = 198\nvar previewHeight = previewWidth * 16 / 9\n\nvar isPC = window.navigator.userAgent.indexOf(\"PCMozilla\") != -1\n\nexport { changeMouth, setPreview, isPC, testClickEvent }\n\n// 给坐标加上取景器的偏移信息\n// 原本的坐标信息是人脸相对取景器的位置\n// 现在坐标信息变为相对整个画布的位置\nfunction addOffsetForFaceData(target) {\n  const checkedType = (target) => {\n    return Object.prototype.toString.call(target).slice(8, -1)\n  }\n  //判断拷贝的数据类型\n  //初始化变量result 成为最终克隆的数据\n  let result\n  let targetType = checkedType(target)\n  if (targetType === 'Object') {\n    result = {}\n  } else if (targetType === 'Array') {\n    result = []\n  } else {\n    return target\n  }\n  //遍历目标数据\n  for (let [key, value] of Object.entries(target)) {\n    //获取遍历数据结构的每一项值。\n    // let value = target[key]\n    //判断目标结构里的每一值是否存在对象/数组\n    if (checkedType(value) === 'Object' ||\n      checkedType(value) === 'Array') { //对象/数组里嵌套了对象/数组\n      //继续遍历获取到value值\n      result[key] = addOffsetForFaceData(value)\n    } else { //获取到value值是基本的数据类型或者是函数。\n\n      if (key == \"x\") {\n        result[key] = offsetXPreview + (value as number)\n\n      } else if (key == \"y\") {\n        result[key] = offsetYPreview + (value as number)\n\n      } else {\n        result[key] = value;\n\n      }\n    }\n  }\n  return result\n}\n// set preview area\n\nfunction setPreview() {\n\n  window.addEventListener(\"load\", () => {\n    setTimeout(() => {\n      window.postMessage({\n        messageType: MSG_TYPE_CAM,\n        previewArea: {\n          y: offsetYPreview,\n          x: offsetXPreview,\n          width: previewWidth,\n          height: previewHeight\n        },\n      }, \"*\")\n    }, 1000)\n\n  }, false)\n}\n\n\n// 测试嘴巴位置\nfunction changeMouth(game: Phaser.Game) {\n\n  //contours sample data\n  window.addEventListener(\"load\", () => {\n    let offsetSpeed = 3\n\n\n    let movingFaceBounds = (bounds: Bounds, dir: number) => {\n      let offset = 0\n      // dir 0下 1左 2上 3右\n\n      if (dir == 0 || dir == 2) {\n        offset = dir == 2 ? -offsetSpeed : offsetSpeed\n        bounds.origin.y = bounds.origin.y + offset\n      } else {\n        offset = dir == 1 ? -offsetSpeed : offsetSpeed\n        bounds.origin.x = bounds.origin.x + offset\n      }\n    }\n    let movingYPoints = (points: Point[], dir) => {\n      // dir 0下 1左 2上 3右\n\n      let offset = 0\n      if (dir == 2) {\n        offset = -offsetSpeed\n      } else {\n        offset = offsetSpeed\n      }\n\n      for (let p of points) {\n        p.y = p.y + offset\n      }\n    }\n\n    let movingXPoints = (points: Point[], dir) => {\n      let offset = 0\n      if (dir == 1) {\n        offset = -offsetSpeed\n      } else {\n        offset = offsetSpeed\n      }\n\n\n      for (let p of points) {\n        p.x = p.x + offset\n      }\n    }\n\n    let moveFace = (oneFace: FaceData, dir: number) => {\n      // dir 0下 1左 2上 3右\n      if (dir == 0 || dir == 2) {\n        movingYPoints(oneFace.lowerLipBottom, dir)\n        movingYPoints(oneFace.lowerLipTop, dir)\n        movingYPoints(oneFace.upperLipBottom, dir)\n        movingYPoints(oneFace.upperLipTop, dir)\n        movingFaceBounds(oneFace.bounds, dir)\n      } else {\n        movingXPoints(oneFace.lowerLipBottom, dir)\n        movingXPoints(oneFace.lowerLipTop, dir)\n        movingXPoints(oneFace.upperLipBottom, dir)\n        movingXPoints(oneFace.upperLipTop, dir)\n        movingFaceBounds(oneFace.bounds, dir)\n      }\n    }\n\n\n    // 这个数据是和取景器大小有关的数据 \n    // 当 RN 的部分设置了取景器大小的时候, 返回的脸的位置也根据 RN 这里的实际尺寸有所压缩\n    // 但是和取景器的位移无关  毕竟安卓端也不知道取景器的相对位置\n    fetch('/assets/sampleContours.json').then(resp => {\n      return resp.json()\n    }).then(data => {\n      setTimeout(() => {\n        // 在PC上调试\n        if (window.navigator.userAgent.indexOf(\"PCMozilla\") != -1) {\n          let oneFace: FaceData = data[0]\n          let i = 0\n\n          let changeDir = 0  // 0下 1上 2左 3右\n          setInterval(() => {\n            if (i++ == 2) {\n              i = 0\n              changeDir = (++changeDir) % 4\n            }\n\n            // moveFace(oneFace, changeDir)\n            let afterOffsetForFaceData = addOffsetForFaceData(oneFace)\n\n            window.postMessage({\n              messageType: 'face',\n              faceData: afterOffsetForFaceData\n            }, \"*\")\n\n          }, 100)\n        }\n      }, 1000)\n    })\n  }, false)\n\n\n  // let points = [{x:100, y:500}, {x:200, y:600}, {x:100, y:600}, {x:200, y:600}]\n\n\n}\n\n\n// 获取鼠标点击位置\nfunction testClickEvent(game: Phaser.Game) {\n  window.addEventListener('load', () => {\n    setTimeout(() => {\n      game.scene.getScene(GAME_SCENE).input.on('pointerup', function (pointer) {\n        var touchX = pointer.x;\n        var touchY = pointer.y;\n        // let x = game.input.mousePointer.x;\n        // let y = game.input.mousePointer.y;\n        console.log('clickXY', touchX, touchY)\n        // ...\n      });\n\n    })\n  }, false)\n}\n\n","import PhaserImage = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport Graphics = Phaser.GameObjects.Graphics;\nimport PhaserText = Phaser.GameObjects.Text;\n\nconst stageWidth = document.body.clientWidth;\nconst stageHeight = document.body.clientWidth / 9 * 16;\n\nexport default class Mouth {\n    public mouthRect: Rectagle = new Rectagle(0, 0, 0, 0);\n    public mouthAllPoints: Point[];\n    public upperTopPoints: Point[];\n    public upperBottomPoints: Point[];\n    public lowerTopPoints: Point[];\n    public lowerBottomPoints: Point[];\n\n    public mouthContour: Graphics;\n    public mouthCenter: Graphics;\n    public mouthStateText: PhaserText;\n\n    // private mouthColor: Graphics;\n\n    constructor(scene: Phaser.Scene) {\n        this.mouthContour = scene.add.graphics()\n        this.mouthCenter = scene.add.graphics()\n        this.mouthStateText = scene.add.text(stageWidth - 100, 100, '', { fontFamily: '\"Roboto Condensed\"' });\n    }\n\n    setMouthContourPoints(upperTop: Point[] = [], upperBottom: Point[] = [], lowerTop: Point[] = [], lowerBottom: Point[] = []){\n        this.upperTopPoints = upperTop;\n        this.upperBottomPoints = upperBottom;\n        this.lowerTopPoints = lowerTop;\n        this.lowerBottomPoints = lowerBottom;\n\n        this.mouthAllPoints = [...upperTop, ...upperBottom, ...lowerTop, ...lowerBottom]\n        this.calcMouthRect()\n        this.drawContour()\n    }\n    calcMouthRect(){\n        let mouthPoints = this.mouthAllPoints;\n\n        let xVals = mouthPoints.map(p => {\n            return p.x\n        })\n        let yVals = mouthPoints.map(p => {\n            return p.y\n        })\n        // console.log('mouth vals', mouthPoints.length)\n\n        let minX = Math.min(...xVals)\n        let maxX = Math.max(...xVals)\n        let minY = Math.min(...yVals)\n        let maxY = Math.max(...yVals)\n\n        this.mouthCenter.clear()\n        var circle = new Phaser.Geom.Circle( minX + (maxX - minX)/2,  minY + (maxY - minY) /2, 5);\n        this.mouthCenter.fillCircleShape(circle);\n\n        // console.log('center',mouthPoints, minX, minY, maxX, maxY, circle.x, circle.y )\n\n        \n        this.mouthRect.setPosition(minX, minY);\n        this.mouthRect.setSize(maxX - minX, maxY - minY)\n    }\n    drawContour(){\n        let mouthPoints = this.mouthAllPoints;\n        this.mouthContour.clear()\n        this.mouthContour.lineStyle(5, 0xFFBBFF, 1.0);\n        this.mouthContour.beginPath();\n\n        let idx = 0\n        for (let p of mouthPoints) {\n            if (idx == 0) {\n                this.mouthContour.moveTo(p.x, p.y);\n            } else {\n                this.mouthContour.lineTo(p.x, p.y);\n            }\n            idx++\n\n        }\n\n\n\n        this.mouthContour.closePath();\n        this.mouthContour.strokePath();\n    }\n\n    checkIfMouthClose() {\n        if (this.lowerBottomPoints.length == 0 || this.upperBottomPoints.length == 0) {\n            return true\n        }\n\n        let lowerTipTopY = this.lowerTopPoints.map( (p)=> {\n            return p.y\n        } ).filter( (p)=> {\n            // 目前给到的数据存在 undefined\n            if (p) {\n                return p\n            }\n        })\n\n        let upperLipBottomY = this.upperBottomPoints.map( (p)=> {\n            return p.y\n        }).filter( (p)=> {\n            // 目前给到的数据存在没有y的情况  所以经过上面的map 数组中有 undefined 的情况\n            if (p) {\n                return p\n            }\n        })\n\n        let maxYOfLowerLipTop = Math.max(...lowerTipTopY)\n        let minYOfUpperLipBottom = Math.min(...upperLipBottomY)\n\n        // return false\n        let isClose = false\n        // if (this.mouthRect.height < 30 && this.mouthRect.height / this.mouthRect.width < 0.5) {\n        //     isClose = true\n        // }\n        if ( Math.abs(minYOfUpperLipBottom - maxYOfLowerLipTop) < 10 ) {\n            isClose = true\n        }\n\n        this.mouthStateText.text = \"\" + Math.abs(minYOfUpperLipBottom - maxYOfLowerLipTop) \n        // this.mouthStateText.text = \"\" + this.mouthRect.height //isClose ? \"close\" : \"open\"\n\n        return isClose\n    }\n\n    // 得到嘴巴中心点 用于确定动画结束的位置\n    getMouthCenter(): Point{\n        let mouthCenterX = this.mouthRect.x + this.mouthRect.width / 2;\n        let mouthCenterY = this.mouthRect.y + this.mouthRect.width / 2;\n\n        return new Point(mouthCenterX, mouthCenterY);\n    }\n}","import PhaserImage = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport Graphics = Phaser.GameObjects.Graphics;\nimport PhaserText = Phaser.GameObjects.Text;\nimport Container = Phaser.GameObjects.Container\n\nimport { Scene } from \"phaser\";\n\n\n\n\n\n\n// import { isPC } from '../test'\nimport { isPC } from '@root/test'\nimport { ImageButton } from \"@root/UI/UIHelper\";\nimport { DISTANCE_ANGLE, stageWidth, stageHeight } from \"@root/constants\";\n\n\nconst angle2Rad = (angle: number) => {\n    return (Math.PI / 180) * angle\n}\n\nexport default class SpinTable {\n    public tableContainer: Container;\n\n    public spinTable: Sprite;\n\n\n    private angleVal: number = 0;\n    private rotationVal:number = 0;\n    public spSpinSpeed: number = 1;\n    \n    public circle: Circle; //计算位置时用 并不是一个可见的对象\n    public circleRadius: number = stageWidth\n    public circleCenter: Point = new Point(stageWidth / 2 + 200, stageHeight + 200);    \n    // public circleCenter: Point = new Point(stageWidth / 2 , stageHeight - 200);    \n\n    public platePosRadius: number = this.circleRadius * 0.9\n\n    public distanceAngle: number = DISTANCE_ANGLE  //食物和食物之间的间隔(角度)\n    public tableCapacity: number = 360 / this.distanceAngle; //根据间隔计算得到的桌面容量\n    public distanceRad: number = 2 * Math.PI / this.tableCapacity\n    public plates: PhaserImage[] = []\n\n\n    public scene: Scene\n    constructor(scene: Scene, spinSpeed: number) {\n        this.spSpinSpeed = spinSpeed\n        this.scene = scene\n    }\n\n    createTable(){\n        this.circle = new Phaser.Geom.Circle(this.circleCenter.x, this.circleCenter.y, this.circleRadius);       \n        this.tableContainer = this.scene.add.container(this.circleCenter.x, this.circleCenter.y)\n        this.spinTable = this.scene.add.sprite(0, 0, 'table');\n        let bds: Rectagle = this.spinTable.getBounds()\n        let width = bds.width\n        this.spinTable.setScale(this.circleRadius / (width / 2), this.circleRadius / (width / 2))        \n        // if (isPC) {\n        //     this.spinTable.alpha = 0.5\n\n        // }\n        \n        \n        this.tableContainer.add(this.spinTable)\n        this.addPlates()\n    }\n\n    setTableCapacity(tableCapacity: number) {\n        this.tableCapacity = tableCapacity\n        this.distanceAngle = 360 / tableCapacity\n    }\n\n    rotateTableSlightly(){\n        // 角度从x轴正方向开始算  顺时针旋转\n        // rotate 是使用的弧度\n        // angle 是角度\n        this.angleVal += this.spSpinSpeed\n        this.rotationVal += angle2Rad(this.spSpinSpeed)\n        // this.spinTable.rotation = this.rotationVal\n        this.tableContainer.rotation = this.rotationVal\n    }\n\n    getAngle(): number {\n        return this.angleVal\n    }\n\n    getRotation(): number {\n        return this.rotationVal\n    }\n\n\n    addPlates() {\n        for (let i = 0; i < this.tableCapacity; i++) {\n            let rad = this.calcRadByIdx(i)\n            let circle = new Circle(0, 0, this.platePosRadius)\n            let p = this.calcRadToPoint(rad, circle)\n            this.plates[i] = this.scene.add.image(p.x, p.y, 'plate')\n            this.plates[i].setScale(2)\n            this.tableContainer.add(this.plates[i])\n        }\n    }\n\n\n    /**\n     * 计算第 i 个食物的在当前桌面上的角度\n     * 桌子是顺时针旋转  但是食物的摆放顺序是逆时针\n     * i starts from 0\n     * @param i \n     */\n    calcAngleByIndx(i: number):number {\n        let rawAngle = this.getAngle()\n        let angle = rawAngle + this.distanceAngle * (this.tableCapacity - i)\n        return angle\n            // 另外注意一下这里的 angle 按照正始终顺序旋转 在第一象限是 0 ~ -90  第二象限是 -90 ~ -180\n            // 第四象限是 0 ~ 90  第三象限是 90 ~ 180\n    }\n\n    /**\n     * 计算第 i 个食物的在当前桌面上的角度\n     * 桌子是顺时针旋转  但是食物的摆放顺序是逆时针\n     */\n    calcRadByIdx(i) {\n        let rawRad = this.rotationVal\n        let rad = rawRad + this.distanceRad * (this.tableCapacity - i)\n        return rad\n    }\n\n    calcAngleToPoint(angle:number):Point{\n        let point = new Phaser.Geom.Point(0, 0)\n        Phaser.Geom.Circle.CircumferencePoint(this.circle, angle2Rad(angle), point);\n        return point\n    }\n\n    // 默认是以桌面半径计算位置 \n    // 但是有时候半径会不一样  比如盘子和食物\n    calcRadToPoint(rad: number, circle?: Circle): Point {\n        if (!circle) {\n            circle = this.circle\n        }\n\n        let point = new Phaser.Geom.Point(0, 0)\n        Phaser.Geom.Circle.CircumferencePoint(circle, rad, point);\n        return point        \n    }\n}","\n\nimport PhaserImage = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Vector2 = Phaser.Math.Vector2;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport Graphics = Phaser.GameObjects.Graphics;\nimport PhaserText = Phaser.GameObjects.Text;\nimport { Bounds } from \"@root/faceData\";\nimport { Scene, Tilemaps } from \"phaser\";\nimport { MSG_TYPE_FACE_TARGET_POS } from \"@root/constants\";\n\nconst stageWidth = document.body.clientWidth;\nconst stageHeight = document.body.clientWidth / 9 * 16;\n\ninterface FaceInCircle {\n    pass: boolean\n    bounds: Bounds\n}\nexport { FaceInCircle }\n\nexport default class CamFaceCheck {\n    public facePoint: Point[]\n    public faceBounds: Bounds\n    public faceRect: Graphics\n\n\n    public camPreviewArea: Rectagle\n    public firstSetCamPreviewArea: Rectagle\n    public previewRect: Graphics\n    \n    \n    public facePosText: PhaserText\n\n\n    // 第一次被认为 OK 的脸部位置\n    // 之后人脸应该试图保持在这个位置\n    public targetFaceBounds: Bounds\n    public faceCenterPos: Vector2\n\n    public scene: Scene\n    constructor(scene?: Scene) {\n        this.scene = scene\n        this.faceRect = scene.add.graphics()\n        this.previewRect = scene.add.graphics()\n        this.facePosText = scene.add.text(stageWidth - 100, 250, '', { fontFamily: '\"Roboto Condensed\"' });\n    }\n\n    refreshFacePosition(faceBounds: Bounds, facePoints: Point[]) {\n        this.faceBounds = faceBounds \n\n        let centerX = faceBounds.origin.x + faceBounds.size.width/2\n        let centerY = faceBounds.origin.y + faceBounds.size.height/2\n\n        this.faceCenterPos = new Vector2(centerX, centerY)\n    }\n\n    // check if face is in the center of preview\n    // private \n    checkFacePosition(faceBounds: Bounds) {\n        let rs: FaceInCircle = {\n            pass: false,\n            bounds: null\n        }\n        if (!this.camPreviewArea) {\n            return rs\n        }        \n        if (faceBounds) {\n            let minFaceX = faceBounds.origin.x\n            let maxFaceX = faceBounds.origin.x + faceBounds.size.width\n\n            let minFaceY = faceBounds.origin.y\n            let maxFaceY = faceBounds.origin.y + faceBounds.size.height\n\n            this.drawFaceBounds(faceBounds)\n            // this.drawPreviewBounds(this.camPreviewArea)\n            let minPreviewX = this.camPreviewArea.x\n            let maxPreviewX = this.camPreviewArea.x + this.camPreviewArea.width\n            let minPreviewY = this.camPreviewArea.y\n            let maxPreviewY = this.camPreviewArea.y + this.camPreviewArea.height\n\n            let paddingLeft = minFaceX - minPreviewX\n            let paddingRight = maxPreviewX - maxFaceX\n            let paddingTop = maxFaceX - minPreviewX\n            let paddingBottom = maxPreviewY - maxFaceY\n\n            // this.facePosText.text = `${paddingLeft.toFixed(2)} --- ${paddingRight.toFixed(2)}`\n\n            if (paddingLeft / paddingRight > 2) {\n                this.facePosText.text = 'to right slightly'\n            } else if (paddingRight / paddingLeft > 2) {  \n                this.facePosText.text = 'to left slightly'\n            } else {\n                this.facePosText.text = 'Hold your phone!'\n                return {\n                    pass: true,\n                    bounds: faceBounds\n                }\n            }\n\n\n        }\n        return rs\n\n    }\n\n    drawPreviewBounds(previewCamArea: Rectagle) {\n        if (!previewCamArea) {\n            return\n        }\n\n        this.previewRect.clear()\n        this.previewRect.lineStyle(5, 0x00FFFF, 1.0);\n        this.previewRect.beginPath();\n\n        let minPreviewX = previewCamArea.x\n        let maxPreviewX = previewCamArea.x + previewCamArea.width\n        let minPreviewY = previewCamArea.y\n        let maxPreviewY = previewCamArea.y + previewCamArea.height\n\n        let points = [\n            new Point(minPreviewX, minPreviewY), new Point(maxPreviewX, minPreviewY),\n            new Point(maxPreviewX, maxPreviewY), new Point(minPreviewX, maxPreviewY)\n        ]\n\n\n        let idx = 0\n        for (let p of points) {\n            if (idx == 0) {\n                this.previewRect.moveTo(p.x, p.y);\n            } else {\n                this.previewRect.lineTo(p.x, p.y);\n            }\n            idx++\n        }\n\n        let centerX = previewCamArea.x + previewCamArea.width/2\n        let centerY = previewCamArea.y + previewCamArea.height/2\n        this.previewRect.fillStyle(0x00FFFF)\n        this.previewRect.fillRect(centerX,centerY,10,10); \n\n        this.previewRect.closePath();\n        this.previewRect.strokePath();\n    }\n\n\n\n    drawFaceBounds(faceBounds: Bounds) {\n        this.faceRect.clear()\n        this.faceRect.lineStyle(5, 0xFF00FF, 1.0);\n        this.faceRect.beginPath();\n\n        let minFaceX = faceBounds.origin.x\n        let maxFaceX = faceBounds.origin.x + faceBounds.size.width\n\n        let minFaceY = faceBounds.origin.y\n        let maxFaceY = faceBounds.origin.y + faceBounds.size.height\n        let points = [\n            new Point(minFaceX, minFaceY), new Point(maxFaceX, minFaceY),\n            new Point(maxFaceX, maxFaceY), new Point(minFaceX, maxFaceY)\n        ]\n        let idx = 0\n        for (let p of points) {\n            if (idx == 0) {\n                this.faceRect.moveTo(p.x, p.y);\n            } else {\n                this.faceRect.lineTo(p.x, p.y);\n            }\n            idx++\n        }\n\n        let centerX = faceBounds.origin.x + faceBounds.size.width/2\n        let centerY = faceBounds.origin.y + faceBounds.size.height/2\n\n        this.faceRect.fillStyle(0xFF00FF)\n        this.faceRect.fillRect(centerX,centerY,10,10); \n\n        this.faceRect.closePath();\n        this.faceRect.strokePath();\n\n    }\n    setCameraArea(camPreviewArea: Rectagle) {\n        this.camPreviewArea = camPreviewArea\n        if (!this.firstSetCamPreviewArea) {\n            this.firstSetCamPreviewArea = new Rectagle(0,0,0,0)\n            this.firstSetCamPreviewArea.x = this.camPreviewArea.x\n            this.firstSetCamPreviewArea.y = this.camPreviewArea.y\n            this.firstSetCamPreviewArea.width = this.camPreviewArea.width\n            this.firstSetCamPreviewArea.height = this.camPreviewArea.height\n        }\n    }\n\n\n    // setTargetFaceBounds(facebds: Bounds) {\n\n    //     if (this.targetFaceBounds == null) {\n    //         this.targetFaceBounds = facebds\n    //         let centerX = facebds.origin.x + facebds.size.width\n    //         let centerY = facebds.origin.y + facebds.size.height\n    //         let distanceX = this.camPreviewArea.x - centerX\n    //         let distanceY = this.camPreviewArea.y - centerY      \n    //         this.faceCenterPos = new Vector2(centerX, centerY)\n            \n    //         // 同时告知 RN?  //脸的位置确定了\n    //         if (window[\"ReactNativeWebView\"]) {\n    //             let msg = {\n    //                 messageType: MSG_TYPE_FACE_TARGET_POS,                    \n    //                 actualData: {\n    //                     bounds: facebds,\n    //                 },\n    //                 time: +new Date\n    //             }\n    //             window[\"ReactNativeWebView\"].postMessage(JSON.stringify(msg));\n    //         }            \n\n    //     }\n    // }\n\n    getTargetFaceBounds(): Bounds {\n        return this.faceBounds\n    }\n\n    updatePreviewPosByTarget(){\n        // let faceCenterPos = this.faceCenterPos\n        // let firstCamPreviewArea = this.firstSetCamPreviewArea\n        // if (!firstCamPreviewArea){\n        //     return\n        // }\n\n        // if (!faceCenterPos) {\n        //     return \n        // }\n        \n        // let originCamArea = this.firstSetCamPreviewArea\n        // let faceBounds = this.faceBounds\n        // let centerX = faceBounds.origin.x + faceBounds.size.width\n        // let centerY = faceBounds.origin.y + faceBounds.size.height\n\n        // let distanceX = this.camPreviewArea.x - centerX\n        // let distanceY = this.camPreviewArea.y - centerY \n        \n        // let offset = new Point(\n        //     faceCenterPos.x - centerX,\n        //     faceCenterPos.y - centerY\n        // )\n\n        // this.camPreviewArea.x = originCamArea.x + offset.x\n        // this.camPreviewArea.y = originCamArea.y + offset.y\n        // this.drawPreviewBounds(this.camPreviewArea)\n\n    }\n}\n","\nimport Image = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport { DOGLOOK, DOGCOOK, CHECKING_INTERVAL, COOK_LOOKBACK_ANIMI, COOK_TOCOOK_ANIMI } from '@root/constants'\n// import { DOGLOOK, DOGCOOK, CHECKING_INTERVAL, COOK_LOOKBACK_ANIMI, COOK_TOCOOK_ANIMI } from '../constants'\n\n\n// Phaser.Sprite 中可以 play 动画\n// 但是 Phaser.Image 不行\nexport default class Cook extends Sprite {\n    private image: Image;\n\n\n\n    private checking: boolean;  // 已经完成回头  正在观察\n    private cooking: boolean = true; //做饭  \n    //PS  存在时间差 当cooking false checking也是false 的时候表示在扭头的过程中\n\n\n    private startCheckingTime: number = 0\n    private endCheckingTime: number = 0 //\n    public checkTimeCount: number = 0 //回头检查次数\n\n    constructor(scene: Phaser.Scene, x: number, y: number,) {\n        super(scene, x, y, DOGCOOK, 0)\n        // scene.add.image(0, 0, 'dog', 0)\n        // let img = new Image(scene,x,y,texture);\n        // scene.children.add(this);\n        scene.add.existing(this)\n        this.addAnimationListener()\n    }\n\n    setOriginToTopLeft() {\n        this.setOrigin(0, 0)\n    }\n\n    addAnimationListener() {\n        this.on('animationcomplete', (e) => {\n            console.log(\"animationcomplete\", e)\n            let eventKey = e.key // lookback ....\n\n            switch (eventKey) {\n                // 回头继续做饭动画结束  又开始做饭了\n                case COOK_TOCOOK_ANIMI:\n                    this.endCheckingTime = +new Date\n                    console.log(\"looking back\", this.endCheckingTime - this.startCheckingTime)\n                    this.checkTimeCount++\n                    this.cooking = true\n\n                    break;\n                case COOK_LOOKBACK_ANIMI:\n                    // this.startWatchingTime\n                    this.checkIfEatingAnimation()\n                default:\n                    break;\n            }\n        })\n    }\n\n\n    lookBack() {\n        // this.setTexture('doglook', 0)\n        this.cooking = false\n        this.startCheckingTime = +new Date\n        this.play(COOK_LOOKBACK_ANIMI)\n    }\n\n    // 厨师回头检查的时间在 1S-2S范围内\n    checkIfEatingAnimation() {\n        this.checking = true\n        let duration = Math.random() * 1500 + 1000\n        setTimeout(() => {\n            this.cookAgain()\n        }, duration)\n    }\n\n\n    cookAgain() {\n        // this.setTexture('dogcook', 0)\n        this.checking = false\n        // this.cooking = true  应该时动画结束的时候才开始 cooking  转头有一个过程\n         \n        // endCheckingTime 会在动画结束的时候计算\n        this.play(COOK_TOCOOK_ANIMI)\n    }\n\n    isCooking(): boolean {\n        return this.cooking\n    }\n    isChecking(): boolean {\n        return this.checking\n    }\n    isTurning(): boolean {\n        return !this.checking && !this.cooking\n    }\n\n\n    //是否刚刚回头过\n    ifJustChecked(elapsed: number): boolean {\n        if (this.endCheckingTime != 0 && this.endCheckingTime > this.startCheckingTime) {\n            let timeGap = +new Date - this.endCheckingTime\n            return (timeGap < CHECKING_INTERVAL)\n        }\n        return true\n    }\n\n}","import PhaserImage = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport Graphics = Phaser.GameObjects.Graphics;\nimport PhaserText = Phaser.GameObjects.Text;\nimport Animation = Phaser.Animations.Animation;\nimport AnimationFrameType = Phaser.Types.Animations.AnimationFrame;\nimport { Scene } from \"phaser\"\nimport { COOK_LOOKBACK_ANIMI, COOK_TOCOOK_ANIMI, HIT_DIZZY } from \"@root/constants\";\n// import { COOK_LOOKBACK_ANIMI, COOK_TOCOOK_ANIMI, HIT_DIZZY } from \"../constants\";\n\nexport default class AnimateManager {\n    doge: Animation | false\n    dizzy: Animation | false\n\n    scene: Scene\n\n    testDog: Sprite\n\n    constructor(scene: Scene) {\n        // 此刻 scene 还没有准备好\n        this.scene = scene\n    }\n\n    registerAnimation(){\n        this.cookLookback()\n        this.cookAgain()\n        this.hitDizzy()\n    }\n\n    cookLookback() {\n        let scene = this.scene\n        // let makeFrames = ():AnimationFrameType[] => {\n        //     let arr: AnimationFrameType[] = []\n\n        //     let endIndex = 33 // 到 33 的时候停下来\n    \n        //     for(let idx = 0; idx<= endIndex; idx++) {\n        //         let keyname = `frame_${idx}.gif`;\n        //         arr.push( {\n        //             key:  keyname,\n        //         } as AnimationFrameType)\n        //     }       \n        //     return arr     \n        // }\n        \n        // 第一个参数是 atlas 图集资源的key\n        let makeFrames = scene.anims.generateFrameNames('dogeTurn', {\n            start: 0,\n            end: 33,\n            zeroPad: 2,\n            prefix: 'frame_',\n            suffix: '.gif'\n        })\n        // weired !!!\n        this.doge = scene.anims.create({\n            key: COOK_LOOKBACK_ANIMI,\n            frames: makeFrames,\n            frameRate: 1/0.04, // 原始 gif 每一帧仅占用 0.04s\n            // repeat: -1\n        })\n    }\n    \n    cookAgain() {\n        let scene = this.scene\n        // let makeFrames = ():AnimationFrameType[] => {\n        //     let arr: AnimationFrameType[] = []\n\n        //     let endIndex = 47 // 到 33 的时候停下来\n    \n        //     for(let idx = 33; idx<= endIndex; idx++) {\n        //         let keyname = `dogeFrame${idx}`;\n        //         arr.push( {\n        //             key:  keyname,\n        //         } as AnimationFrameType)\n        //     }       \n        //     return arr     \n        // }\n        let makeFrames = scene.anims.generateFrameNames('dogeTurn', {\n            start: 34,\n            end: 47,\n            zeroPad: 2,\n            prefix: 'frame_',\n            suffix: '.gif'\n        })\n\n\n        // weired !!! 动画结束的调用方式很奇怪\n        this.doge = scene.anims.create({\n            key: COOK_TOCOOK_ANIMI,\n            frames: makeFrames,\n            frameRate: 1/0.04, // 原始 gif 每一帧仅占用 0.04s\n            // repeat: -1\n        })\n    }\n\n    hitDizzy() {\n        let scene = this.scene\n        this.doge = scene.anims.create({\n            key: HIT_DIZZY,\n            frames: [\n                {key: 'dizzy1'} as AnimationFrameType, \n                {key: 'dizzy2'} as AnimationFrameType\n            ],\n            frameRate: 1/0.4, \n            repeat: -1 // 不断重复\n        })\n    }\n\n}","import { Scene } from \"phaser\";\nimport HTML5AudioSound = Phaser.Sound.HTML5AudioSound\nimport BaseSound = Phaser.Sound.BaseSound\nimport { SOUNDKEY, MUSICKEY } from \"@root/constants\";\nimport { Base } from \"UI\";\n\nexport default class GameSoundManager {\n    static soundMode: boolean = true\n    static musicMode: boolean = true\n\n    static sound: BaseSound\n    static bgmusic:BaseSound\n\n    static scene: Scene\n    \n\n    static initMusic(scene: Scene){\n        GameSoundManager.scene = scene\n        \n\n        GameSoundManager.sound = GameSoundManager.scene.sound.add(SOUNDKEY, {\n            mute: false,\n            volume: 1,\n            rate: 1,\n            detune: 0,\n            seek: 0,\n            loop: false,\n            delay: 0            \n        });\n\n        GameSoundManager.bgmusic = GameSoundManager.scene.sound.add(MUSICKEY, {\n            mute: false,\n            volume: 1,\n            rate: 1,\n            detune: 0,\n            seek: 0,\n            loop: true,\n            delay: 0\n        })\n        GameSoundManager.bgmusic.play()\n    }\n\n\n\n    static toggleSoundMode(){\n        GameSoundManager.soundMode = !GameSoundManager.soundMode\n        \n        \n    }\n\n    static playSound() {\n        if (GameSoundManager.soundMode && GameSoundManager.sound) {\n            GameSoundManager.sound.play()\n        }\n    }\n\n\n    static toogleMusicMode(){\n        GameSoundManager.musicMode = !GameSoundManager.musicMode\n        if (!GameSoundManager.musicMode) {\n            GameSoundManager.bgmusic.pause()\n        }else{\n            GameSoundManager.bgmusic.resume()\n        }\n    }\n}","\nimport PhaserImage = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport Graphics = Phaser.GameObjects.Graphics;\nimport PhaserText = Phaser.GameObjects.Text;\nimport Container = Phaser.GameObjects.Container\nimport { Scene } from \"phaser\";\nimport { UI_SCENE } from \"@root/constants\";\n\nexport { UIHelper, ImageButton }\n\n\n\nclass UIHelper {\n\n    /**\n     * \n     * @param scene parent scene\n     * @param size size of rectangle\n     * @param radius \n     * @param color mainColor\n     * @param borderWidth \n     * @param outerColor border Color (little darken than main color)\n     */\n    public static drawRoundRectWithBorder(scene: Scene, size: Rectagle, radius: number, color: any, borderWidth?: number, outerColor?: any) {\n\n\n        let bg = scene.add.graphics()\n        bg.clear()\n        bg.beginPath()\n\n        let x = size.x\n        let y = size.y\n        let width = size.width\n        let height = size.height\n        bg.fillStyle(outerColor)\n        // graphics 的 origin 是左上角\n        bg.fillRoundedRect(x, y, width, height, radius)\n\n        if (borderWidth) {\n            let x2 = x + borderWidth\n            let y2 = y + borderWidth\n            bg.fillStyle(color)\n            bg.fillRoundedRect(x2, y2, width - 2 * borderWidth, height - 2 * borderWidth, radius - borderWidth)\n        }\n\n        return bg\n\n    }\n\n\n\n    public static createImageButton(scene: Scene, x: number, y: number, texture: string, callback?: Function, noframes?: boolean): ImageButton {\n        return new ImageButton(scene, x, y, texture, callback, noframes)\n    }\n\n    public static fadeToStartScene(newScene: string, currentScene:Scene){\n        currentScene.cameras.main.fadeOut(250);\n        currentScene.time.addEvent({\n            delay: 250,\n            callback: function () {\n                currentScene.scene.start(newScene);\n            },\n            callbackScope: currentScene\n        });        \n    }\n\n\n    public static fadeToAddAnotherScene(newScene:string, currentScene: Scene) {\n        // 先把目标场景显示\n        currentScene.scene.get(newScene).cameras.main.fadeIn(0);\n\n        // 当前场景慢慢淡出\n        currentScene.cameras.main.fadeOut(250);\n        currentScene.time.addEvent({\n            delay: 250,\n            callback: function () {\n                // if (!currentScene.scene.isActive(newScene) && \n                //     !currentScene.scene.isPaused(newScene) &&\n                //     !currentScene.scene.isSleeping(newScene)\n                // ) {\n                //     currentScene.scene.launch(newScene)\n                // }else {\n                //     if (currentScene.scene.isSleeping(newScene)) {\n                //         currentScene.scene.wake(newScene);\n                //     }                    \n                // }\n                currentScene.scene.switch(newScene)\n            },\n            callbackScope: currentScene\n        });                \n    }\n\n    public static fadeToPrevScene(resumeScene: string, currentScene: Scene) {\n        currentScene.scene.get(resumeScene).cameras.main.fadeIn(0);\n\n\n        currentScene.cameras.main.fadeOut(250);\n        currentScene.time.addEvent({\n            delay: 250,\n            callback: function () {\n                // currentScene.scene.sleep(currentScene.scene.key);\n                currentScene.scene.switch(resumeScene)\n            },\n            callbackScope: currentScene\n        });        \n    }\n\n}\n\n\n\n\n\n\n\nclass ImageButton extends Phaser.GameObjects.Image {\n    constructor( scene: Scene,  x:number, y:number, texture:string, callback?: Function, noframes?: boolean) {\n        super(scene, x, y, texture, 0);\n        this.setInteractive({ useHandCursor: true });\n\n        this.on('pointerup', function () {\n            if (!noframes) {\n                this.setFrame(1);\n            }\n        }, this);\n\n        this.on('pointerdown', function () {\n            if (!noframes) {\n                this.setFrame(2);\n            }\n            callback.call(scene);\n        }, this);\n\n        this.on('pointerover', function () {\n            if (!noframes) {\n                this.setFrame(1);\n            }\n        }, this);\n\n        this.on('pointerout', function () {\n            if (!noframes) {\n                this.setFrame(0);\n            }\n        }, this);\n        // scene.add.existing(this);\n\n    }\n    \n};","import { Scene } from \"phaser\";\nimport PhaserImage = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport Graphics = Phaser.GameObjects.Graphics;\nimport PhaserText = Phaser.GameObjects.Text;\nimport Container = Phaser.GameObjects.Container\nimport InputButton = Phaser.Input.Gamepad.Button\nimport Group = Phaser.GameObjects.Group\n\nimport { UI_SCENE, SETTINGS_SCENE, GAME_SCENE, MAIN_RED_LIGHT, MAIN_RED, stageHeight, stageWidth } from \"../constants\";\nimport { UIHelper, ImageButton } from \"@root/UI/UIHelper\";\n\n// 根据contaienr 的大小计算左上角坐标相对于中心位置的偏移\nconst TopLeftToCenter = (width: number, height: number, topLeftPoint: Point): Point => {\n    let halfW = width / 2\n    let halfH = height / 2\n    return new Point(\n        topLeftPoint.x - halfW,\n        topLeftPoint.y - halfH\n    )\n}\n\n\nconst coinScorePos = new Point(210, 50) // 相对于 0 0 左上角而言\nconst coinSize = 25\nconst originCoinScale = coinSize / 512\n\nexport default class GameUI extends Container{\n    public scene: Scene\n\n    public testGrphics: Graphics\n    public caughtTextTipContainer: Container\n\n    public scoreArea: Container\n    public scoreText: PhaserText\n    \n    private settingsBtn: ImageButton\n\n    /**\n     * \n     * @param scene parent scene\n     * @param x container 左上角X 在 scene 中的位置\n     * @param y contaienr 左上角Y 在 scene 中的位置\n     * @param children \n     */\n    constructor(scene: Phaser.Scene, x?: number, y?: number, children?: Phaser.GameObjects.GameObject[]){ \n        super(scene,x, y, children)    \n           \n        // this.testObject()\n        this.createScoreArea()\n        this.addSettingsBtn()\n        // setInterval( ()=> {\n        //     this.createCaughtText( ()=>{})\n        // }, 2000 )\n        \n    }\n\n    testObject(){\n        this.testGrphics =  new Graphics(this.scene)\n        this.testGrphics.lineStyle(50, 0x44bb44)\n        this.testGrphics.strokeLineShape( new Phaser.Geom.Line(0,0,  300, 0))\n        this.testGrphics.strokeLineShape(new Phaser.Geom.Line(0, 0, 0, 300))\n        this.add(this.testGrphics)\n    }\n    \n\n    createCaughtText(cb: Function): Container {\n        let containerWidth = 400\n        let containerHeight = 100\n\n        // container 的中心点所在父容器的位置\n        let containerPos = new Point(stageWidth / 2, stageHeight / 2 * 1.6)\n        let caughtContainer = this.scene.add.container(containerPos.x, containerPos.y)\n\n\n        let toastPos = TopLeftToCenter(400, 100, new Point(250, 50))\n        let toastText = this.scene.add.text(toastPos.x, toastPos.y,\n            'You get Caught!!',\n            {\n                fontFamily: 'Berlin',\n                stroke: '#000',\n                fontSize: 30,\n                strokeThickness: 4,\n                align: 'center'\n            }\n        )\n\n        toastText.setOrigin(0.5)\n\n        // bg 的位置是相对于 container 中心点而言的\n        let bg = UIHelper.drawRoundRectWithBorder(\n            this.scene,\n            new Rectagle(-containerWidth / 2, -containerHeight / 2, containerWidth, containerHeight),\n            20,\n            MAIN_RED_LIGHT,\n            5,\n            MAIN_RED,\n        )\n\n        let AlternativeEmoji = ['sad', 'cry', 'sour']\n        let hitEmoji = Phaser.Math.RND.pick(AlternativeEmoji)\n\n        let emojiPos = TopLeftToCenter(400, 100, new Point(50, 50))\n\n        let emojiFace = this.scene.add.image(emojiPos.x, emojiPos.y, hitEmoji)\n        emojiFace.setScale(0.2)\n\n\n        caughtContainer.add([bg, emojiFace, toastText])\n        caughtContainer.setScale(0)\n\n        this.add(caughtContainer)\n\n        this.scene.tweens.add({\n            targets: caughtContainer,\n            scale: 1,\n            duration: 132,\n            x: containerPos.x,\n            y: containerPos.y,\n            ease: ' Elastic.In',\n            onComplete: () => {\n                setTimeout(() => {\n                    this.scene.tweens.add({\n                        targets: caughtContainer,\n                        // y: stageHeight * 1.2,\n                        x: containerPos.x,\n                        y: containerPos.y,\n                        scale: 0,\n                        duration: 132,\n                        ease: ' Elastic.Out',\n                        onComplete: () => {\n                            caughtContainer.destroy()\n                        }\n                    })\n                }, 532)\n            }\n        })\n        return caughtContainer\n    }        \n\n\n    // 由于 coin 悬浮在这个界面上方  所以 gameUILayer 要比 gameEffect 低一层\n    createScoreArea(): Container {\n        let scene = this.scene\n\n        // score container 所在 parent container 的位置 \n        let scoreAreaCenter = new Point(stageWidth / 2, 50)\n        this.scoreArea = scene.add.container(scoreAreaCenter.x, scoreAreaCenter.y)\n        this.add(this.scoreArea)\n\n        \n        let graphicsTopLeft = new Point(0 - scoreAreaCenter.x, 0 - scoreAreaCenter.y)\n        let bg = scene.add.graphics()\n        \n        bg.beginPath()\n        bg.fillStyle(MAIN_RED) //yellow\n        bg.fillRect(graphicsTopLeft.x, graphicsTopLeft.y, stageWidth, 100)\n        bg.closePath()\n\n\n        let scoreBoxWidth = 300\n        let scoreBoxHeight = 66\n        let scoreBoxRadius = scoreBoxHeight / 2\n        let scoreBoxBorder = 10\n\n        // rectagle 的左上角会和红色title 的中心区域对齐\n        let scoreBoxRectagle = new Rectagle(\n            -50,\n            0 - scoreBoxHeight/2,\n            scoreBoxWidth,\n            scoreBoxHeight\n        )\n        let scoreBox = UIHelper.drawRoundRectWithBorder(scene, scoreBoxRectagle, scoreBoxRadius, MAIN_RED, scoreBoxBorder, MAIN_RED_LIGHT)\n        \n\n        let scoreTitlePos = new Point(50, 0) // 相对于父元素的中心点而言\n        let scoreTitle = scene.add.text(\n            scoreTitlePos.x,\n            scoreTitlePos.y,\n            'score:',\n            { fontFamily: 'Arial', fontSize: 22, color: '#ffffff' }\n        )\n        scoreTitle.setOrigin(0.5)\n\n        let scorePos = new Point(100, 0) // 相对于父元素的中心点而言\n        let scoreText = this.scoreText = scene.add.text(\n            scorePos.x,\n            scorePos.y,\n            '0',\n            { fontFamily: 'Arial', fontSize: 22, color: '#ffffff' }\n        )\n        scoreText.setOrigin(0.5)\n\n        let coinIcon = scene.add.image(0, 0, 'coin')\n        coinIcon.setScale(originCoinScale)\n            \n        this.scoreArea.add([bg, scoreBox, scoreTitle, scoreText, coinIcon])\n        \n\n\n        return this.scoreArea\n    }\n\n    addSettingsBtn() {\n        let settingsClick = (e) => {\n            UIHelper.fadeToAddAnotherScene(SETTINGS_SCENE, this.scene)\n\n\n            // this.scene.get(SETTINGS_SCENE).cameras.main.fadeIn(0)\n            // this.cameras.main.fadeOut(250);\n\n            // if (!this.scene.isActive(SETTINGS_SCENE) &&\n            //     !this.scene.isPaused(SETTINGS_SCENE) &&\n            //     !this.scene.isSleeping(SETTINGS_SCENE)\n            // ) {\n            //     this.scene.launch(SETTINGS_SCENE)\n            // } else {\n            //     if (this.scene.isSleeping(SETTINGS_SCENE)) {\n            //         this.scene.wake(SETTINGS_SCENE);\n            //     }\n            // }\n        }        \n        settingsClick.bind(this)\n        this.settingsBtn = new ImageButton(this.scene, 50, 50, 'button-settings', settingsClick)\n        this.add(this.settingsBtn)\n    }\n\n}\n","import { Scene } from \"phaser\";\nimport { EF_SCENE, HIT_DIZZY, MAIN_RED, MAIN_RED_LIGHT, stageHeight, stageWidth } from \"../constants\";\nimport PhaserImage = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport Graphics = Phaser.GameObjects.Graphics;\nimport PhaserText = Phaser.GameObjects.Text;\nimport Container = Phaser.GameObjects.Container\n\n\nimport { UIHelper } from \"@root/UI/UIHelper\";\n\ninterface AnimationPlaying {\n    hammer: boolean\n    dropCoin: boolean\n    addCoin: boolean\n\n}\n\nconst coinScorePos = new Point(210, 50)\nconst coinSize = 25\nconst originCoinScale = coinSize / 512\n\nexport default class GameEffectContainer extends Container {\n    public scene: Scene\n\n    public coin: PhaserImage\n    public hammer: PhaserImage\n    public emojiFace: PhaserImage\n    public dizzy: Sprite\n    private droppingCoins: Phaser.Physics.Matter.Image[] = []\n\n    public animationPlaying: AnimationPlaying = {\n        hammer: false,\n        dropCoin: false,\n        addCoin: false,\n    }    \n    constructor(scene: Phaser.Scene, x?: number, y?: number, children?: Phaser.GameObjects.GameObject[]) { \n        super(scene, x, y, children)    \n\n    //     setInterval(  ()=> {\n    //         this.addCoin( ()=> {\n\n    //         })\n    //         this.addHammer( ()=> {\n                \n    //         })\n    //     }, 1000)\n    }   \n\n\n    addCoin(addScoreCount: Function) {\n        let scene = this.scene\n\n        let coin = scene.add.image(stageWidth / 2, stageHeight / 2, 'coin')\n        // this.coin.displayWidth = 64\n        // this.coin.displayHeight = 64\n        // scale 是根据原图的大小而言的。\n\n        coin.setScale(originCoinScale)\n\n        let self = this\n        this.add(coin)\n\n        this.animationPlaying.addCoin = true\n        scene.tweens.add({\n            targets: coin,\n            scale: 0.2,\n            duration: 132,\n            ease: 'Power4',\n            onComplete: () => {\n                // cb()\n\n                scene.tweens.add({\n                    targets: coin,\n                    x: coinScorePos.x,\n                    y: coinScorePos.y,\n                    scale: originCoinScale,\n                    duration: 332,\n                    ease: 'Circ',\n                    onComplete: () => {\n                        addScoreCount(1)\n                        coin.destroy()\n                        this.animationPlaying.addCoin = false\n                    }\n                })\n            }\n        })\n    }\n\n    addHammer(addScoreCount: Function) {\n        let scene = this.scene\n        if (this.animationPlaying.hammer) {\n            return\n        }\n\n\n        this.animationPlaying.hammer = true\n        let hammerPos = new Point(258, 327)\n        let dizzyPos = new Point(284, 389)\n        let AlternativeEmoji = ['sad', 'cry', 'sour']\n        let hitEmoji = Phaser.Math.RND.pick(AlternativeEmoji)\n\n\n        this.hammer = scene.add.image(hammerPos.x, hammerPos.y, 'hammer')\n        // this.emojiFace = this.add.image(285,520, hitEmoji)\n        // this.emojiFace.setScale(0.3)\n\n        this.hammer.setScale(0.3)\n        this.hammer.rotation = 1\n\n        this.addDizzy(dizzyPos).play(HIT_DIZZY)\n\n\n        let animationDuration = 232\n        let holdDuration = 332\n        setTimeout(() => {\n            scene.cameras.main.shake(100, 0.01, true);\n            addScoreCount(-1)\n            this.dropACoin()\n        }, 332)\n        this.scene.tweens.add({\n            targets: this.hammer,\n            rotation: 1.5,\n            duration: animationDuration,\n            hold: holdDuration,\n            yoyo: true,\n            ease: 'Power3',\n            onComplete: () => {\n                this.hammer.destroy()\n                this.dizzy.destroy()\n                // this.emojiFace.destroy()\n\n                this.animationPlaying.hammer = false\n            },\n        })\n    }\n\n    addDizzy(dizzyPos: Point): Sprite {\n        let scene = this.scene\n        this.dizzy = scene.add.sprite(dizzyPos.x, dizzyPos.y, 'dizzy1')\n        return this.dizzy\n\n\n    }\n\n    // 原本这个是放在 UIScene 中的  但是因为addCoin 动画要表现在这里\n    // 如果放在 UIScene (UIScene 在层级上最高) Coin会被UIScene 遮住\n    // createScoreArea(): Container {\n    //     let scoreAreaCenter = new Point(stageWidth / 2 + 100, 50)\n    //     let graphicsTopLeft = new Point(0 - scoreAreaCenter.x, 0 - scoreAreaCenter.y)\n    //     this.scoreArea = this.add.container(scoreAreaCenter.x, scoreAreaCenter.y)\n\n    //     let bg = this.add.graphics()\n    //     bg.beginPath()\n    //     bg.fillStyle(MAIN_RED) //yellow\n    //     bg.fillRect(graphicsTopLeft.x, graphicsTopLeft.y, stageWidth, 100)\n    //     bg.closePath()\n\n\n    //     let scoreBoxWidth = 300\n    //     let scoreBoxHeight = 66\n    //     let scoreBoxRadius = scoreBoxHeight / 2\n    //     let scoreBoxBorder = 10\n    //     let scoreBoxRectagle = new Rectagle(\n    //         (scoreAreaCenter.x - scoreBoxWidth / 2) - scoreAreaCenter.x,\n    //         (scoreAreaCenter.y - scoreBoxHeight / 2) - scoreAreaCenter.y,\n    //         scoreBoxWidth,\n    //         scoreBoxHeight\n    //     )\n    //     let scoreBox = UIHelper.drawRoundRect(this, scoreBoxRectagle, scoreBoxRadius, MAIN_RED, scoreBoxBorder, MAIN_RED_LIGHT)\n\n    //     let scoreTitlePos = new Point(scoreAreaCenter.x - 50, scoreAreaCenter.y)\n    //     let scoreTitle = this.add.text(\n    //         scoreTitlePos.x - scoreAreaCenter.x,\n    //         scoreTitlePos.y - scoreAreaCenter.y,\n    //         'score:',\n    //         { fontFamily: 'Arial', fontSize: 22, color: '#ffffff' }\n    //     )\n    //     scoreTitle.setOrigin(0.5)\n\n    //     let scorePos = new Point(scoreAreaCenter.x + 0, scoreAreaCenter.y)\n    //     let scoreText = this.scoreText = this.add.text(\n    //         scorePos.x - scoreAreaCenter.x,\n    //         scorePos.y - scoreAreaCenter.y,\n    //         '0',\n    //         { fontFamily: 'Arial', fontSize: 22, color: '#ffffff' }\n    //     )\n    //     scoreText.setOrigin(0.5)\n\n\n    //     this.scoreArea.add([bg, scoreBox, scoreTitle, scoreText])\n    //     let coinIcon = this.add.image(coinScorePos.x, coinScorePos.y, 'coin')\n    //     coinIcon.setScale(originCoinScale)\n\n\n    //     return this.scoreArea\n    // }\n\n    dropACoin() {\n        let scene = this.scene\n        let dropCoin = scene.matter.add.image(coinScorePos.x, coinScorePos.y, 'coin')\n        dropCoin.setScale(originCoinScale)\n        this.droppingCoins.push(dropCoin)\n\n\n        dropCoin.setCircle(coinSize / 2);\n        dropCoin.setFriction(0.005);\n        dropCoin.setBounce(0.6);\n        dropCoin.setVelocityX(1);\n        dropCoin.setAngularVelocity(0.15);\n\n\n\n    }    \n}\n","import { Scene } from \"phaser\";\nimport PhaserImage = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport Graphics = Phaser.GameObjects.Graphics;\nimport PhaserText = Phaser.GameObjects.Text;\nimport Container = Phaser.GameObjects.Container\nimport InputButton = Phaser.Input.Gamepad.Button\nimport Group = Phaser.GameObjects.Group\n\nimport { UI_SCENE, SETTINGS_SCENE, GAME_SCENE, MAIN_RED_LIGHT, MAIN_RED, stageHeight, stageWidth } from \"../constants\";\nimport { UIHelper, ImageButton } from \"@root/UI/UIHelper\";\n\n\nexport default class DialogLayer extends Container {\n    public welcome: UI.Dialog\n\n\n    /**\n     * \n     * @param scene parent scene\n     * @param x container 左上角X 在 scene 中的位置\n     * @param y contaienr 左上角Y 在 scene 中的位置\n     * @param children \n     */\n    constructor(scene: Phaser.Scene, x?: number, y?: number, children?: Phaser.GameObjects.GameObject[]) {\n        super(scene, x, y, children)\n        // this.testObject()\n        this.showWelcome()\n\n    }\n\n    testObject() {\n        let testObjj = this.scene.add.image(0, 0,  'plate')\n        this.add(testObjj)\n    }\n\n\n    showWelcome() {\n\n        this.welcome = this.createWelcomeDialog(300, 500)\n        this.welcome.popUp(500)\n    }\n\n\n    createWelcomeDialog(width: number, height: number): UI.Dialog {\n        let scene = this.scene\n        let makeContentLabel = (content: string) => {\n\n            let x = width / 2\n            let y = height / 2\n            let contentLabel = scene.rexUI.add.label({\n                x: 0,\n                y: 0,\n                width: 40, // Minimum width of round-rectangle\n                height: 340, // Minimum height of round-rectangle            \n                background: scene.rexUI.add.roundRectangle(40, 40, 100, 240, 0, 0xffffff),\n                text: scene.add.text(0, 0, content, {\n                    fontSize: '20px',\n                    color: 0x888888,\n                    padding: {\n                        left: 20,\n                        right: 20,\n                        top: 20,\n                        bottom: 20,\n                    },                    \n                    wordWrap: { width: 240, useAdvancedWrap: true }\n                }),\n                space: {\n                    left: 10,\n                    right: 10,\n                    top: 10,\n                    bottom: 10\n                },\n            }).layout()\n\n\n            return contentLabel\n        }\n\n        let makeFixWidthPanel = (maxwidth: number, content: string) => {\n            let sizer = scene.rexUI.add.fixWidthSizer({\n                // child: makeContentLabel(content),\n                space: {\n                    left: 3,\n                    right: 3,\n                    top: 3,\n                    bottom: 3,\n                    item: 8,\n                    line: 8,\n                }\n            })\n            return sizer\n        }\n\n        let makeScrollSizer = (content: string): UI.ScrollablePanel => {\n            // const COLOR_PRIMARY = 0x4e342e;\n            // const COLOR_LIGHT = 0x7b5e57;\n            // const COLOR_DARK = 0x260e04;\n\n            let scrollPanel = scene.rexUI.add.scrollablePanel({\n                x: width / 2,\n                y: height / 2,\n                width: 240, // Minimum width of round-rectangle ???\n                height: 340, // Minimum height of round-rectangle ???      \n                scrollMode: 0,\n                background: scene.rexUI.add.roundRectangle(0, 0, 2, 2, 10, 0xffffff),\n                panel: {\n                    child: makeContentLabel(content),\n                    // child: makeFixWidthPanel(240, content),\n                    mask: {\n                        padding: 1\n                    },\n                },\n\n                // slider: {\n                //     track: this.rexUI.add.roundRectangle(0, 0, 20, 10, 10, COLOR_DARK),\n                //     thumb: this.rexUI.add.roundRectangle(0, 0, 0, 0, 13, COLOR_LIGHT),\n                // },\n\n                space: {\n                    left: 10,\n                    right: 10,\n                    top: 10,\n                    bottom: 10,\n\n                    panel: 0,\n                }\n            }).layout()\n\n            let insertTextToPanel = (panel: UI.ScrollablePanel, content: string) => {\n                var sizer = panel.getElement('panel');\n                var scene = panel.scene;\n\n                sizer.clear(true);\n                var lines = content.split('\\n');\n                for (var li = 0, lcnt = lines.length; li < lcnt; li++) {\n                    var words = lines[li].split(' ');\n                    for (var wi = 0, wcnt = words.length; wi < wcnt; wi++) {\n                        sizer.add(\n                            scene.add.text(0, 0, words[wi], {\n                                fontSize: 18,\n                                color: '#666'\n                            })\n                            // .setInteractive()\n                            // .on('pointerdown', function () {\n                            //     this.scene.print.text = this.text;\n                            //     this.setTint(Phaser.Math.Between(0, 0xffffff))\n                            // })\n                        );\n                    }\n                    if (li < (lcnt - 1)) {\n                        sizer.addNewLine();\n                    }\n                }\n\n\n                panel.layout();\n                return panel;\n\n            }\n            // insertTextToPanel(scrollPanel, content)\n\n            return scrollPanel\n        }\n\n        // x y 用于定位panel的位置  默认 xy 是panel 的中心点\n        let x = stageWidth / 2\n        let y = stageHeight / 2\n\n        let contentStr =\n            `这是一个偷吃汉堡的游戏! \\n\n⚠️你只可以吃汉堡薯条，喝可乐。\\n其他的你都不喜欢吃。\\n另外你没有钱，\\n只能在厨师看不到你的时候吃。\\n\\n\n把整张脸都放在框内， 通过张嘴就可以偷吃啦过张嘴就可以偷吃啦过张嘴就可以偷吃啦过张嘴就可以偷吃啦\n`\n\n        // 默认x y 是 Dialog 中心位置   也就是说 Pivot 默认是 center \n        let dialog = scene.rexUI.add.dialog({\n            x: x,\n            y: y,\n            width: width,\n            // height: height,\n\n            // background 并不在意大小的\n            background: scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, MAIN_RED),\n\n            title: scene.rexUI.add.label({\n                background: scene.rexUI.add.roundRectangle(0, 0, 100, 40, 20, MAIN_RED_LIGHT),\n                text: scene.add.text(0, 0, 'Eat Burger AR Game', {\n                    fontSize: '20px',\n                    color: '#FC6158', //string\n                    \n                }),\n                space: {\n                    left: 10,\n                    right: 10,\n                    top: 10,\n                    bottom: 10\n                }\n            }),\n\n            // content: makeContentLabel(contentStr),\n            content: makeScrollSizer(contentStr),\n            actions: [\n                this.createRexUIButton(this.scene, 'OK', 0xf57f17),\n            ],\n\n            actionsAlign: '  center  ',\n            space: {\n                title: 10,\n                action: 45, // ?? 没有效果 \n                content: 25, //指 content 下方的空白区域高度\n\n                left: 10,\n                right: 10,\n                top: 10,\n                bottom: 10,\n            }\n        })\n\n        dialog\n            .on('button.click', function (button, groupName, index, pointer, event) {\n                // this.print.text += groupName + '-' + index + ': ' + button.text + '\\n';\n                dialog.scaleDownDestroy(100);\n\n                // this.scene.resume(GAME_SCENE)\n\n\n            }, this)\n            .on('button.over', function (button, groupName, index, pointer, event) {\n                button.getElement('background').setStrokeStyle(1, 0xffffff);\n            })\n            .on('button.out', function (button, groupName, index, pointer, event) {\n                button.getElement('background').setStrokeStyle();\n            });\n\n        dialog.layout()//.pushIntoBounds()\n        dialog.setDepth(31)\n        return dialog\n    }    \n\n\n    createRexUIButton(scene: Scene, text: string, color: any, space?: any) {\n        return scene.rexUI.add.label({\n            x: 0,\n            y: 100,\n            width: 40, // Minimum width of round-rectangle\n            height: 40, // Minimum height of round-rectangle\n\n            background: scene.rexUI.add.roundRectangle(0, 0, 100, 40, 20, 0x5e92f3),\n\n            text: scene.add.text(0, 0, text, {\n                fontSize: '24px'\n            }),\n\n            space: space || {\n                left: 10,\n                right: 10,\n                top: 10,\n                bottom: 10\n            }\n        });\n    }    \n\n}","import PhaserImage = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport Graphics = Phaser.GameObjects.Graphics;\nimport PhaserText = Phaser.GameObjects.Text;\nimport Zone = Phaser.GameObjects.Zone;\n\n\n\nconst stageWidth = document.body.clientWidth;\nconst stageHeight = document.body.clientWidth / 9 * 16;\n// 在 RN 中得到的宽和高 是411 * 823\n// 在 webview 得到的宽高是 412 * 804  // 因为我的APP 并没有打开全屏\nimport { MSG_TYPE_FACE, MSG_TYPE_CAM, MSG_TYPE_WEBVIEW_READY, GAME_SCENE, UI_SCENE, EF_SCENE, CHECKING_DURATION, FIRST_CHECK_ELAPSE, ASSETS_SCENE, SETTINGS_SCENE, DISTANCE_ANGLE, FOOD_LIST_FNAME_MAP } from '@root/constants';\nimport { isPC } from '@root/test'\n\n\nimport Mouth from '@game/mouth'\nimport Food from '@game/food'\nimport { FaceData, Bounds } from '@root/faceData';\nimport SpinTable from './spinTable';\nimport CamFaceCheck, { FaceInCircle } from './facePosCheck';\nimport Cook from './cook';\nimport { UIPlugin, Dialog } from 'UI';\nimport { Scene } from 'phaser';\nimport GameUIScene from '@root/UI/GameUIScene';\nimport EffectScene from '@root/UI/EffectScene';\nimport AssetsLoader from './assetsLoader';\nimport AnimateManager from './animate';\nimport { UIHelper, ImageButton } from '@root/UI/UIHelper';\nimport GameSoundManager from './soundManager';\nimport GameUI from './gameUILayer';\nimport GameEffectContainer from './gameEffectLayer';\nimport DialogLayer from './DialogLayer';\n\n\nexport default class Demo extends Phaser.Scene {\n    public assetsLoader: AssetsLoader\n    public animateManager: AnimateManager\n    public timer: Phaser.Time.TimerEvent\n    public score: number = 0\n\n\n    // // 旋转圆心\n    public spinTable: SpinTable\n    public spSpinSpeed: number = 1;\n\n    public distanceAngle: number = DISTANCE_ANGLE  //食物和食物之间的间隔(角度)\n    public tableCapacity: number = 360 / this.distanceAngle; //根据间隔计算得到的桌面容量\n\n    public foodList: Food[] = [...Array(this.tableCapacity)].map(_ => null);\n    \n\n    // mouth\n    public mouthObj: Mouth;\n\n    public camFaceCheck: CamFaceCheck;\n\n    // background\n    public bg: Graphics;\n    public bgImg: PhaserImage;\n\n    // cook\n    public cook: Cook;\n\n\n    //text\n    public mouthStateText: PhaserText;\n    private toastText: PhaserText\n    private fpsText: PhaserText;\n    // private scoreText: PhaserText\n    private testText: PhaserText\n    private hasCaughtToast: boolean\n\n    \n\n    // preview 取景器\n    private previewArea: Rectagle = new Rectagle(0, 0, 0, 0)\n\n    // scene\n    private uiScene: GameUIScene;\n    private effScene: EffectScene;\n\n    private gameUILayer: GameUI\n    private gameEffLayer: GameEffectContainer\n    private dialogLayer: DialogLayer\n\n\n    constructor() {\n        super(GAME_SCENE);\n        this.messageListener()\n    }\n\n    preload() {\n        console.log('game preload')\n        // 用到 rexUI scene 必须加载 scenePlugin\n        this.load.scenePlugin({\n            key: 'rexuiplugin',\n            url: '/rexuiplugin.min.js',\n            sceneKey: 'rexUI'\n        });        \n        // this.scene.launch(EF_SCENE)\n        // this.scene.launch(UI_SCENE)\n    }\n\n\n    // preload 中的资源都加载完毕之后 才会调用 create\n    create() {\n        console.log('game create')\n        GameSoundManager.initMusic(this)\n\n\n        // setTimeout(() => {\n        //     this.scene.launch(SETTINGS_SCENE)\n\n\n        //     setTimeout(  ()=> {\n        //         this.scene.sendToBack(SETTINGS_SCENE)\n        //     }, 500)\n        // }, 500);\n\n\n        // this.scene.get(UI_SCENE).events.on('afterCreate', ()=> {\n        //     (<GameUIScene>this.scene.get(UI_SCENE)).showWelcome()\n        // })\n\n\n\n\n\n        this.timer = this.time.addEvent({\n            // delay: 500,                // ms\n            // callback: callback,\n            //args: [],\n            // callbackScope: thisArg,\n            loop: true\n        });\n\n\n\n        this.drawBackground()\n        this.addCook()\n        this.addFace()\n        this.drawWheel()\n\n        // Phaser会根据 add 的先后顺序决定层级.\n        this.mouthObj = new Mouth(this);\n        this.refreshMouth([], [], [], [])\n\n\n        this.addText();\n\n        // this.uiScene = this.scene.get(UI_SCENE) as GameUIScene\n        // this.effScene = this.scene.get(EF_SCENE) as EffectScene\n        this.gameUILayer = new GameUI(this, 0, 0)\n        this.add.existing(this.gameUILayer)\n        this.gameUILayer.setDepth(10)\n        \n        this.gameEffLayer =  new GameEffectContainer(this, 0, 0 )\n        this.add.existing(this.gameEffLayer)\n        this.gameEffLayer.setDepth(20)\n\n        this.dialogLayer = new DialogLayer(this, 0, 0)\n        this.add.existing(this.dialogLayer)\n        this.dialogLayer.setDepth(30)\n\n        this.animateManager = new AnimateManager(this)\n        this.animateManager.registerAnimation()\n\n        this.addScoreCallback = this.addScoreCallback.bind(this)\n\n\n\n        // Main Scene\n        this.cameras.main.fadeIn(250);\n    }\n\n\n    private frameCounter = 0\n    update(time, delta) {\n        console.log('game ')\n\n        this.rotateTable()\n        this.addFoodIfNeed()\n        this.movingFoodOnTable()\n        this.checkIfCouldEat()\n\n        this.frameCounter += 1\n\n        if (this.frameCounter >= 60) {\n            this.frameCounter = 0\n            this.update60Frame()\n        }\n\n    }\n\n    update60Frame() {\n        let elapsed = this.timer.getElapsedSeconds()\n        this.shouldCookLookBack(elapsed)\n        this.fpsText.text = this.game.loop.actualFps + ''\n    }\n\n    shouldCookLookBack(elapsed: number) {\n        if (this.cook) {\n            let shouldLookBack = Math.random()\n            let isCooking = this.cook.isCooking()\n            if (isCooking) {\n\n                if (this.cook.checkTimeCount == 0) {\n                    if (elapsed > FIRST_CHECK_ELAPSE) {\n                        this.cook.lookBack()\n                    }\n                } else {\n\n                    let isJustChecked = this.cook.ifJustChecked(elapsed)\n                    if (!isJustChecked && shouldLookBack < 0.9) {\n                        this.cook.lookBack()\n                    }\n                }\n            }\n        }\n    }\n\n\n    rotateTable() {\n        // 右手顺时针\n        // this.spSpin.angle += this.spSpinSpeed;\n        this.spinTable.rotateTableSlightly()\n\n    }\n\n    addCounter = 0\n\n\n\n    addFoodIfNeed() {\n        // for (let i = 0; i < this.foodList.length; i++) {\n        for (let {idx, val} of this.foodList.map( (val, idx)=> ({idx, val}) )    ) {    \n            // 盘子是空的, 且恰好转到一个固定的位置. 就添加食物\n            if (!val) {\n\n\n                //\n                //               +\n                //               |\n                //               |\n                //               |\n                //   -90 ~ -180  |    0 ~ -90\n                //               |\n                //               |\n                //               |\n                //               |\n                // +-----------------------------+\n                //               |\n                //               |\n                //               |\n                //     90 - 180  |     0 - 90\n                //               |\n                //               |\n                //               |\n                //               |\n                //               +\n\n\n                // 由于phaser 的坐标不是连续的, 因此为了按照顺时针旋转一周得到 360 的角度, 需要做下面的处理\n                // let rawAngle = this.spinTable.getAngle()\n                // let mathAngle = rawAngle < 0 ? 360 + rawAngle : rawAngle\n                // // 只在圆圈的 0° 这个位置(也就是坐标系 x )这个位置生成新的元素.\n                // // 根据目前的采样率 得不到 mathAngle 为 1 的情况, 最接近1 是 1.79°\n                // if (Math.abs(mathAngle - i * this.distanceAngle) < 2) {\n                //     let foodTextureKey = `food${i}`\n                //     let food = this.add.image(0, 0, foodTextureKey) as Food\n\n                //     food.name = `Food${i}`\n                //     food.setScale(2)\n\n                //     this.foodList[i] = food\n\n                //     // console.log(\"angle add\", rawAngle, mathAngle, food.name)\n                //     // this.foodList.push(food)\n                // }\n\n                // 上面的办法虽然对于人类理解比较直观 但是phaser 操作起来却比较复杂 主要是 phaser 的坐标系划分很诡异\n\n                let spinRad = this.spinTable.getRotation() % (2 * Math.PI)\n                let foodRad = idx * this.spinTable.distanceRad\n                if (Math.abs(spinRad - foodRad) < 0.02) {\n                    let foodTextureKey = `food${idx}`\n                    let food = this.add.sprite(0, 0, \"foods\", FOOD_LIST_FNAME_MAP[foodTextureKey]) as Food\n                    food.name = `Food${idx}`\n                    food.setScale(1)\n                    this.foodList[idx] = food\n                }\n            }\n        }\n    }\n\n    movingFoodOnTable() {\n\n        for (let i = 0; i < this.foodList.length; i++) {\n            let food = this.foodList[i];\n            if (!food) {\n                continue\n            }\n\n            // let rawAngle = this.spinTable.getAngle()\n            // let angle = rawAngle + this.distanceAngle * (this.tableCapacity  - i)\n            // 另外注意一下这里的 angle 按照正始终顺序旋转 在第一象限是 0 ~ -90  第二象限是 -90 ~ -180\n            // 第四象限是 0 ~ 90  第三象限是 90 ~ 180\n\n\n            // let foodAngle = this.spinTable.calcFoodIAngle(i) //当前食物在桌上的角度\n            // let point = this.spinTable.calcAngleToPoint(foodAngle)\n            \n            let foodRad = this.spinTable.calcRadByIdx(i)\n            let circle = new Circle(this.spinTable.circleCenter.x, this.spinTable.circleCenter.y, this.spinTable.platePosRadius)\n            let point = this.spinTable.calcRadToPoint(foodRad, circle)\n\n\n            food.x = point.x\n            food.y = point.y\n        }\n    }\n\n\n    refreshMouth(upperTop: Point[], upperBottom: Point[], lowerTop: Point[], lowerBottom: Point[]) {\n        if (this.mouthObj) {\n            this.mouthObj.setMouthContourPoints(upperTop, upperBottom, lowerTop, lowerBottom)\n\n        } else {\n            console.warn('mouth obj has not ready')\n        }\n\n    }\n\n    messageListener() {\n        window.addEventListener(\"message\", (event) => {\n            switch (event.data.messageType) {\n                case MSG_TYPE_FACE:\n                    // 不论取景器是否有偏移  这里得到的坐标就是相对于 webview 左上角而言的\n                    // offset 的处理已经在 RN 的部分完成\n                    let of: FaceData = event.data.faceData\n                    this.refreshMouth(of.upperLipTop, of.upperLipBottom, of.lowerLipTop, of.lowerLipBottom)\n                    this.refreshFaceBounds(of.bounds, of.face)\n\n                    break;\n                case MSG_TYPE_CAM:\n                    console.log(\"MSG_TYPE_CAM\")\n                    this.setCameraArea(event)\n\n                default:\n                    break;\n            }\n        }, false)\n\n        // 告知 RN webview 事件绑定上了\n        if (window[\"ReactNativeWebView\"]) {\n            let msg = {\n                messageType: MSG_TYPE_WEBVIEW_READY,\n                event: \"bindMessage\",\n                time: +new Date\n            }\n            window[\"ReactNativeWebView\"].postMessage(JSON.stringify(msg));\n        }\n    }\n\n    setCameraArea(event) {\n        if (this.camFaceCheck) {\n\n            let previewArea = event.data.previewArea\n            this.previewArea = previewArea\n            this.camFaceCheck.setCameraArea(previewArea)\n        } else {\n            console.log(\"camFaceCheck not defined!!!\")\n            setTimeout(() => {\n                this.setCameraArea(event)\n            }, 100)\n        }\n    }\n\n\n    // 所有的 offset 都移动到了 RN 的部分处理\n    // offsetPoints(webviewWidth: number,  webviewHeight, mouthPoints: Point[]) {\n    //     let scaleX = webviewWidth / this.previewWidth;\n    //     let scaleY = webviewHeight / this.previewHeight;\n\n    //     let newPoints = mouthPoints.map( p => {\n    //         return new Point(p.x + this.previewOffsetX, p.y + this.previewOffsetY )\n    //     })\n    //     return newPoints\n    // }\n\n\n\n\n    checkIfCouldEat() {\n        if (this.mouthObj.checkIfMouthClose()) {\n            return\n        }\n\n        if (this.previewArea.x == 0) {\n            console.warn(\"offsetXPreview is still zero\")\n            return\n        }\n        let offsetXPreview: number = this.previewArea.x\n        let offsetYPreview: number = this.previewArea.y\n        let previewWidth: number = this.previewArea.width\n        let previewHeight: number = this.previewArea.height\n\n\n        let destPos = this.mouthObj.getMouthCenter();\n        for (let i = 0; i < this.foodList.length; i++) {\n\n            let food = this.foodList[i]\n            if (!food) {\n                continue\n            }\n\n            if (food.eating) {\n                continue\n            }\n\n            let foodx = food.x\n            let foody = food.y\n\n\n            // 重新修改判定条件\n            // 当food 在摄像头范围内就可以吃\n            if (\n                (offsetXPreview < food.x && food.x < offsetXPreview + previewWidth)\n                &&\n                (offsetYPreview < food.y && food.y < offsetYPreview + previewHeight * 1.2)\n                &&\n                !food.eating\n            ) {\n                // this.foodList.splice(i--, 1)\n                this.foodList[i] = null\n                this.eatingAnimation(food, destPos)\n\n\n\n                break\n            }\n\n            // 来到了取景器右边 // 表示miss\n            if (food.x > offsetXPreview + previewWidth && food.y < offsetYPreview + previewHeight * 1.2) {\n                console.log('miss')\n            }\n        }\n    }\n\n    eatingAnimation(food: Food, dest: Point) {\n        food.eating = true\n        var tween = this.tweens.add({\n            targets: food,\n            x: dest.x,\n            y: dest.y,\n            scale: 0,\n            duration: 400,\n            ease: 'Power3',\n            onComplete: () => {\n                food.destroy()\n\n                // if not get caught\n                if (this.cook.isCooking()) {\n                    // this.effScene.addCoin(this.addScore)\n                    // addScoreCallback 已经绑定了 this\n                    this.gameEffLayer.addCoin(this.addScoreCallback)\n                } else {\n                    if (this.cook.isChecking())\n                        this.caughtAnimation()\n\n                }\n\n            }\n        })\n\n    }\n\n    caughtAnimation() {\n        // this.effScene.addHammer(this, this.addScore)\n        // this.uiScene.createCaughtText(stageWidth / 2, stageHeight / 2, () => { })\n        this.gameEffLayer.addHammer(this.addScoreCallback)\n        this.gameUILayer.createCaughtText( ()=> {})\n\n    }\n\n    missAnimation() {\n\n    }\n\n\n\n\n    drawHollowBackground() {\n        let faceCenter = new Point(300, 450)\n        let faceRadius = 200\n        this.bg.beginPath()\n        this.bg.moveTo(0, 0)\n        this.bg.lineTo(stageWidth, 0)\n        this.bg.lineTo(stageWidth, faceCenter.y)\n        this.bg.lineTo(faceCenter.x + faceRadius, faceCenter.y)\n        this.bg.arc(faceCenter.x, faceCenter.y, faceRadius, 0, Math.PI, true);\n        this.bg.lineTo(0, faceCenter.y)\n        this.bg.lineTo(0, 0)\n        this.bg.fillStyle(0xffeeff)\n        this.bg.fill()\n\n\n        this.bg.moveTo(stageWidth, stageHeight)\n        this.bg.lineTo(stageWidth, faceCenter.y)\n        this.bg.arc(faceCenter.x, faceCenter.y, faceRadius, 0, Math.PI, false);\n        this.bg.lineTo(0, faceCenter.y)\n        this.bg.lineTo(0, stageHeight)\n        this.bg.lineTo(stageWidth, stageHeight)\n        this.bg.fillStyle(0xffeeff)\n        this.bg.fill()\n    }\n\n    drawBackground() {\n        this.bg = this.add.graphics()\n        this.bgImg = this.add.image(0, 0, 'bgImg')\n        let bd: Rectagle = this.bgImg.getBounds()\n\n        this.bgImg.setPosition(0, 0)\n        // Phaser 中 Image 的默认 pivot 就是图片的中心点\n\n        this.bgImg.x = stageWidth / 2\n        this.bgImg.y = stageHeight / 2\n        this.bgImg.setScale(stageWidth / bd.width, stageHeight / bd.height)\n        if (isPC) {\n            this.bgImg.alpha = 0.5;\n        }\n\n    }\n\n    drawWheel() {\n        this.spinTable = new SpinTable(this, this.spSpinSpeed)\n        this.spinTable.createTable()\n    }\n\n    addFace() {\n        this.camFaceCheck = new CamFaceCheck(this)\n    }\n\n    addText() {\n        this.fpsText = this.add.text(320, 120, '////////', {\n            fontFamily: '\"Roboto Condensed\"',\n            color: '#ffffff'\n        })\n        // this.mouthStateText = this.add.text(stageWidth - 100, 0, 'Hello World', { fontFamily: '\"Roboto Condensed\"' });\n        // this.testText = this.add.text(170, 170, 'Hello World', { fontFamily: '\"Roboto Condensed\"' });\n\n        // this.scoreText = this.add.text(390, 50, '0', { \n        //     fontFamily: '\"Roboto Condensed\"',\n        //     color: 'red'\n        // })\n\n    }\n\n    refreshFaceBounds(bounds: Bounds, facePoints: Point[]) {\n        if (!this.camFaceCheck) {\n            return\n        }\n\n        this.camFaceCheck.refreshFacePosition(bounds, facePoints)\n        this.camFaceCheck.updatePreviewPosByTarget()\n\n\n        // 脸的矫正都放在客户端做。\n        // let rs: FaceInCircle = this.camFaceCheck.checkFacePosition(bounds)\n        // if (rs.pass) {\n        //     // this.camFaceCheck.setTargetFaceBounds(bounds)\n        // }\n    }\n\n    addCook() {\n        this.cook = new Cook(this, 120, 390)\n        this.cook.setScale(0.7)\n    }\n\n    showScoreToast(text: string, delay: number, cb: Function) {\n        let toastText = this.add.text(0, 0, '', { fontFamily: '\"Roboto Condensed\"' })\n\n        toastText.x = stageWidth / 2\n        toastText.y = stageWidth / 2\n        toastText.text = text\n        toastText.setFontSize(32)\n        toastText.setColor('red')\n\n        let dest = {\n            x: 390, y: 50\n        }\n        setTimeout(() => {\n            this.tweens.add({\n                targets: toastText,\n                x: dest.x,\n                y: dest.y,\n                scale: 0,\n                duration: 1000,\n                ease: 'Power3',\n                onComplete: () => {\n                    cb()\n                    toastText.destroy()\n                }\n            })\n        }, delay)\n\n    }\n\n    addScoreCallback(sc: number) {\n        if (this.score == 0  && sc < 0) {\n            return \n        }\n        this.score = this.score + sc\n        this.gameUILayer.scoreText. text = '' + this.score\n        // this.effScene.scoreText.text = '' + this.score\n    }\n\n\n    \n\n}\n","import { Scene } from \"phaser\";\nimport PhaserImage = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport Graphics = Phaser.GameObjects.Graphics;\nimport PhaserText = Phaser.GameObjects.Text;\nimport Container = Phaser.GameObjects.Container\nimport InputButton = Phaser.Input.Gamepad.Button\n\n\nimport { UI_SCENE, SETTINGS_SCENE, GAME_SCENE, MAIN_RED_LIGHT, MAIN_RED } from \"../constants\";\nimport { World } from \"matter\";\nimport { UIHelper, ImageButton } from \"./UIHelper\";\nconst stageWidth = document.body.clientWidth;\nconst stageHeight = document.body.clientWidth / 9 * 16;\n\nconst TopLeftToCenter = (width: number, height: number, topLeftPoint: Point): Point => {\n    let halfW = width/2\n    let halfH = height/2\n    return new Point( \n        topLeftPoint.x - halfW,\n        topLeftPoint.y - halfH\n    )\n}\n\nexport default class GameUIScene extends Phaser.Scene {\n\n    public testView: UI.Dialog\n    public welcome: UI.Dialog\n    public getCaught: UI.Dialog\n    public getCaughtText: PhaserText\n    public testGraphic: Graphics\n    public scoreArea: Container\n    public scoreText: PhaserText\n\n    // UI \n    private settingsBtn: ImageButton\n\n\n    constructor() {\n        super(UI_SCENE);\n    }\n\n    preload() {\n\n        // 用到 rexUI scene 必须加载 scenePlugin\n        this.load.scenePlugin({\n            key: 'rexuiplugin',\n            url: '/rexuiplugin.min.js',\n            sceneKey: 'rexUI'\n        });\n    }\n\n    create() {\n        this.bindEvents()\n\n        this.addUIBtns()\n\n        // this.showWelcome()\n        // this.welcome.visible = false\n        // this.getCaught = this.createGetCaughtDialog(stageWidth/2, stageHeight/2) \n        \n        \n        // this.testView = this.createDemoDialog(this, 0, 0)\n        // this.testView.visible = false\n\n        // this.testGraphic = this.add.graphics()\n        // this.testGraphic.lineStyle(10, 0x00bb44)\n        // this.testGraphic.strokeLineShape( new Phaser.Geom.Line(200, 300, 250, 300))\n        // this.testGraphic.rotation = 2* Math.PI\n\n        this.events.emit('afterCreate')\n    }\n\n    update(time, delta) {\n    }\n\n    showWelcome() {\n        this.welcome = this.createWelcomeDialog(this, 300, 500)\n        this.welcome.popUp(500)\n    }\n\n    bindEvents() {\n        this.events.on('wake', () => {\n            this.cameras.main.fadeIn(250)\n        }, this)\n    }\n\n\n    createWelcomeDialog(scene: Scene, width: number, height: number): UI.Dialog {\n\n        let makeContentLabel = (content: string) => {\n\n            let x = width / 2\n            let y = height / 2\n            let contentLabel = scene.rexUI.add.label({\n                x: 0,\n                y: 0,\n                width: 40, // Minimum width of round-rectangle\n                height: 340, // Minimum height of round-rectangle            \n                background: scene.rexUI.add.roundRectangle(40, 40, 100, 240, 0, 0x00ccbb),\n                text: scene.add.text(0, 0, content, {\n                    fontSize: '12px',\n                    color: 0x888888\n\n                }),\n                space: {\n                    left: 10,\n                    right: 10,\n                    top: 10,\n                    bottom: 10\n                }\n            }).layout()\n\n\n            return contentLabel\n        }\n\n        let makeFixWidthPanel = (maxwidth: number, content: string) => {\n            let sizer = this.rexUI.add.fixWidthSizer({\n                // child: makeContentLabel(content),\n                space: {\n                    left: 3,\n                    right: 3,\n                    top: 3,\n                    bottom: 3,\n                    item: 8,\n                    line: 8,\n                }\n            })\n            return sizer\n        }\n\n        let makeScrollSizer = (content: string): UI.ScrollablePanel => {\n            // const COLOR_PRIMARY = 0x4e342e;\n            // const COLOR_LIGHT = 0x7b5e57;\n            // const COLOR_DARK = 0x260e04;\n\n            let scrollPanel = scene.rexUI.add.scrollablePanel({\n                x: width / 2,\n                y: height / 2,\n                width: 240, // Minimum width of round-rectangle ???\n                height: 340, // Minimum height of round-rectangle ???      \n\n                scrollMode: 0,\n                background: this.rexUI.add.roundRectangle(0, 0, 2, 2, 10, 0xffffff),\n                panel: {\n                    // child: makeContentLabel(content),\n                    child: makeFixWidthPanel(240, content),\n                    mask: {\n                        padding: 1\n                    },\n                },\n\n                // slider: {\n                //     track: this.rexUI.add.roundRectangle(0, 0, 20, 10, 10, COLOR_DARK),\n                //     thumb: this.rexUI.add.roundRectangle(0, 0, 0, 0, 13, COLOR_LIGHT),\n                // },\n\n                space: {\n                    left: 10,\n                    right: 10,\n                    top: 10,\n                    bottom: 10,\n\n                    panel: 0,\n                }\n            }).layout()\n\n            let insertTextToPanel = (panel: UI.ScrollablePanel, content: string) => {\n                var sizer = panel.getElement('panel');\n                var scene = panel.scene;\n\n                sizer.clear(true);\n                var lines = content.split('\\n');\n                for (var li = 0, lcnt = lines.length; li < lcnt; li++) {\n                    var words = lines[li].split(' ');\n                    for (var wi = 0, wcnt = words.length; wi < wcnt; wi++) {\n                        sizer.add(\n                            scene.add.text(0, 0, words[wi], {\n                                fontSize: 18,\n                                color: '#666'\n                            })\n                            // .setInteractive()\n                            // .on('pointerdown', function () {\n                            //     this.scene.print.text = this.text;\n                            //     this.setTint(Phaser.Math.Between(0, 0xffffff))\n                            // })\n                        );\n                    }\n                    if (li < (lcnt - 1)) {\n                        sizer.addNewLine();\n                    }\n                }\n\n\n                panel.layout();\n                return panel;\n\n            }\n            insertTextToPanel(scrollPanel, content)\n            return scrollPanel\n        }\n\n        // x y 用于定位panel的位置  默认 xy 是panel 的中心点\n        let x = stageWidth / 2\n        let y = stageHeight / 2\n\n        let contentStr = \n`这是一个偷吃汉堡的游戏! \\n\n⚠️你只可以吃汉堡薯条，喝可乐。\\n其他的你都不喜欢吃。\\n另外你没有钱，\\n只能在厨师看不到你的时候吃。\\n\\n\n把整张脸都放在框内， 通过张嘴就可以偷吃啦\n`\n\n        // 默认x y 是 Dialog 中心位置   也就是说 Pivot 默认是 center \n        let dialog = scene.rexUI.add.dialog({\n            x: x,\n            y: y,\n            width: width,\n            // height: height,\n\n            // background 并不在意大小的\n            background: scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, MAIN_RED),\n\n            title: scene.rexUI.add.label({\n                background: scene.rexUI.add.roundRectangle(0, 0, 100, 40, 20, MAIN_RED_LIGHT),\n                text: scene.add.text(0, 0, 'Eat Burger AR Game', {\n                    fontSize: '20px',\n                    color: '#FC6158', //string\n                }),\n                space: {\n                    left: 10,\n                    right: 10,\n                    top: 10,\n                    bottom: 10\n                }\n            }),\n\n            // content: makeContentLabel(contentStr),\n            content: makeScrollSizer(contentStr),\n            actions: [\n                this.createRexUIButton(this, 'OK', 0xf57f17),\n            ],\n\n            actionsAlign: '  center  ',\n            space: {\n                title: 10,\n                action: 45, // ?? 没有效果 \n                content: 25, //指 content 下方的空白区域高度\n\n                left: 10,\n                right: 10,\n                top: 10,\n                bottom: 10,\n            }\n        })\n\n        dialog\n            .on('button.click', function (button, groupName, index, pointer, event) {\n                // this.print.text += groupName + '-' + index + ': ' + button.text + '\\n';\n                dialog.scaleDownDestroy(100);\n\n                this.scene.resume(GAME_SCENE)\n\n\n            }, this)\n            .on('button.over', function (button, groupName, index, pointer, event) {\n                button.getElement('background').setStrokeStyle(1, 0xffffff);\n            })\n            .on('button.out', function (button, groupName, index, pointer, event) {\n                button.getElement('background').setStrokeStyle();\n            });\n\n        dialog.layout()//.pushIntoBounds()\n            \n\n        return dialog\n    }\n\n    createDemoDialog(scene: Scene, x: number, y: number): UI.Dialog {\n\n        scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0xe91e63)\n        return scene.rexUI.add.dialog({\n            x: x,\n            y: y,\n\n            background: scene.rexUI.add.roundRectangle(0, 0, 100, 100, 20, 0xf57f17),\n\n            title: scene.rexUI.add.label({\n                background: scene.rexUI.add.roundRectangle(0, 0, 100, 40, 20, 0xbc5100),\n                text: scene.add.text(0, 0, 'Pick a color', {\n                    fontSize: '20px'\n                }),\n                space: {\n                    left: 15,\n                    right: 15,\n                    top: 10,\n                    bottom: 10\n                }\n            }),\n\n            actions: [\n                scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0xe91e63),\n                scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0x673ab7),\n                scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0x2196f3),\n                scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0x00bcd4),\n                scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0x4caf50),\n                scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0xcddc39),\n            ],\n\n            actionsAlign: 'left',\n\n            space: {\n                title: 10,\n                action: 5,\n\n                left: 10,\n                right: 10,\n                top: 10,\n                bottom: 10,\n            }\n        })\n            .layout()\n            .pushIntoBounds()\n            //.drawBounds(this.add.graphics(), 0xff0000)\n            .popUp(500);\n\n\n\n    }\n\n    createCaughtText(x: number, y: number, cb: Function): Container {\n        let containerWidth = 400\n        let containerHeight = 100\n        let containerPos = new Point(stageWidth / 2, stageHeight / 2 * 1.6)\n        let container = this.add.container(containerPos.x, containerPos.y)\n\n\n        // (250,  50) 这个点是相对于容器左上角而言的\n        let toastPos = TopLeftToCenter(400, 100, new Point(250,  50) )\n        let toastText = this.add.text(toastPos.x, toastPos.y ,\n            'You get Caught!!', \n            { \n                fontFamily: 'Berlin',\n                stroke: '#000',\n                fontSize: 30, \n                strokeThickness: 4, \n                align: 'center'\n            }\n        )\n        // this.hasCaughtToast = true\n        // toastText.x = stageWidth / 2\n        // toastText.y = stageHeight / 2\n        toastText.setOrigin(0.5)\n\n        // let bg = this.rexUI.add.roundRectangle(0, 0, 100, 240, 0, 0x00ccbb)\n        // 使用graphics的时候都是从左上角开始画  \n        // 而 container 的默认origin 是中心位置， （且无法更改？？）\n        // 添加元素的时候也是将子元素的origin 和 父容器的origin 对齐\n        // graphic 的 origin 是左上角\n\n        // f9ebe9\n        let bg = UIHelper.drawRoundRectWithBorder(\n            this,\n            new Rectagle(-containerWidth / 2, -containerHeight / 2, containerWidth, containerHeight),\n            20,\n            MAIN_RED_LIGHT,\n            5,\n            MAIN_RED,\n        )\n        \n        let AlternativeEmoji = ['sad', 'cry', 'sour']\n        let hitEmoji = Phaser.Math.RND.pick(AlternativeEmoji)\n\n        let emojiPos = TopLeftToCenter(400, 100, new Point(50, 50))\n    \n        let emojiFace = this.add.image(emojiPos.x, emojiPos.y, hitEmoji)\n        emojiFace.setScale(0.2)\n\n        \n        container.add([bg, emojiFace, toastText])\n        container.setScale(0)\n\n        this.tweens.add({\n            targets: container,\n            scale: 1,\n            duration: 132,\n            x: containerPos.x,\n            y: containerPos.y,\n            ease: ' Elastic.In',\n            onComplete: () => {\n                setTimeout(() => {\n                    this.tweens.add({\n                        targets: container,\n                        // y: stageHeight * 1.2,\n                        x: containerPos.x,\n                        y: containerPos.y,                        \n                        scale: 0,\n                        duration: 132,\n                        ease: ' Elastic.Out',\n                        onComplete: () => {\n                            container.destroy()\n                        }\n                    })\n                }, 532)\n            }\n        })\n        return container\n    }\n\n    createGetCaughtDialog(x: number, y: number): UI.Dialog {\n        let scene = this\n        scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0xe91e63)\n\n        // 你被抓住了 计划从左移动到右 这样的形式进入屏幕 显示\n        // 然后发现做不到  Dialog 一定会在屏幕区域内显示\n        let popup = scene.rexUI.add.dialog({\n            x: 0, // 所以一开始在左边放起来\n            y: 0,\n\n            background: scene.rexUI.add.roundRectangle(0, 0, 100, 100, 20, 0xf57f17),\n            content: scene.rexUI.add.label({\n                background: scene.rexUI.add.roundRectangle(0, 0, 100, 40, 20, 0xbc5100),\n                text: scene.add.text(0, 0, '\\nYou get Caught!!\\n', {\n                    fontSize: '30px'\n                }),\n                space: {\n                    left: 15,\n                    right: 15,\n                    top: 10,\n                    bottom: 10\n                }\n            }),\n            // title: scene.rexUI.add.label({\n            //     background: scene.rexUI.add.roundRectangle(0, 0, 100, 40, 20, 0xbc5100),\n            //     text: scene.add.text(0, 0, 'Pick a color', {\n            //         fontSize: '20px'\n            //     }),\n            //     space: {\n            //         left: 15,\n            //         right: 15,\n            //         top: 10,\n            //         bottom: 10\n            //     }\n            // }),\n\n            // actions: [\n            //     scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0xe91e63),\n            //     scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0x673ab7),\n            //     scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0x2196f3),\n            //     scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0x00bcd4),\n            //     scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0x4caf50),\n            //     scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0xcddc39),\n            // ],\n\n            actionsAlign: 'left',\n\n            space: {\n                title: 10,\n                action: 5,\n\n                left: 10,\n                right: 10,\n                top: 10,\n                bottom: 10,\n            }\n        })\n            .layout()\n            .pushIntoBounds()\n        //.drawBounds(this.add.graphics(), 0xff0000)\n        // .popUp(500);\n\n        // this.tweens.add({\n        //     targets: popup,\n        //     x: stageWidth/2,\n        //     y: stageHeight/2,\n        //     duration: 400,\n        //     ease: 'Power3',\n        //     yoyo: true,\n        //     onComplete: () => {\n\n        //     }\n        // })\n\n        return popup\n\n    }\n\n    createRexUIButton(scene: Scene, text: string, color: any, space?: any) {\n        return scene.rexUI.add.label({\n            x: 0,\n            y: 100,\n            width: 40, // Minimum width of round-rectangle\n            height: 40, // Minimum height of round-rectangle\n\n            background: scene.rexUI.add.roundRectangle(0, 0, 100, 40, 20, 0x5e92f3),\n\n            text: scene.add.text(0, 0, text, {\n                fontSize: '24px'\n            }),\n\n            space: space || {\n                left: 10,\n                right: 10,\n                top: 10,\n                bottom: 10\n            }\n        });\n    }\n\n\n    addUIBtns() {\n        \n        let settingsClick = (e) => {\n            UIHelper.fadeToAddAnotherScene(SETTINGS_SCENE, this)\n\n\n            // this.scene.get(SETTINGS_SCENE).cameras.main.fadeIn(0)\n            // this.cameras.main.fadeOut(250);\n\n            // if (!this.scene.isActive(SETTINGS_SCENE) &&\n            //     !this.scene.isPaused(SETTINGS_SCENE) &&\n            //     !this.scene.isSleeping(SETTINGS_SCENE)\n            // ) {\n            //     this.scene.launch(SETTINGS_SCENE)\n            // } else {\n            //     if (this.scene.isSleeping(SETTINGS_SCENE)) {\n            //         this.scene.wake(SETTINGS_SCENE);\n            //     }\n            // }\n        }\n        settingsClick.bind(this)\n        this.settingsBtn = new ImageButton(this, 50, 50, 'button-settings', settingsClick)\n        this.add.existing(this.settingsBtn);\n\n    }\n\n}\n\n","import { Scene } from \"phaser\";\nimport { EF_SCENE, HIT_DIZZY, MAIN_RED, MAIN_RED_LIGHT } from \"../constants\";\nimport PhaserImage = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport Graphics = Phaser.GameObjects.Graphics;\nimport PhaserText = Phaser.GameObjects.Text;\nimport Container = Phaser.GameObjects.Container\nimport { UIHelper } from \"./UIHelper\";\n\n\nconst stageWidth = document.body.clientWidth;\nconst stageHeight = document.body.clientWidth / 9 * 16;\n\n\nconst coinScorePos = new Point(210, 50)\nconst coinSize = 25\nconst originCoinScale = coinSize / 512\n\n\n\ninterface AnimationPlaying {\n    hammer: boolean\n    dropCoin: boolean\n    addCoin: boolean\n    \n}\n\nexport default class EffectScene extends Phaser.Scene { \n    public coin: PhaserImage\n    public hammer:PhaserImage\n    public emojiFace: PhaserImage\n    public dizzy: Sprite\n\n\n\n    public scoreArea: Container\n    public scoreText: PhaserText\n\n    private droppingCoins: Phaser.Physics.Matter.Image[] \n\n\n    public animationPlaying: AnimationPlaying = {\n        hammer: false,\n        dropCoin: false,\n        addCoin: false,\n    }\n\n    constructor() {\n        super(EF_SCENE);\n    }\n    preload() {\n        // this.load.scenePlugin({\n        //     key: 'rexuiplugin',\n        //     url: '/rexuiplugin.min.js',\n        //     sceneKey: 'rexUI'\n        // });\n        // this.load.image('coin', 'assets/coin.png');\n        // this.load.image('hammer', 'assets/hammer.png');\n        // this.load.image('dizzy1', 'assets/dizzy1.png');\n        // this.load.image('dizzy2', 'assets/dizzy2.png');\n    }\n\n    create(){\n        this.createScoreArea()\n\n        this.droppingCoins = []\n\n\n        var ground = this.matter.add.image(stageWidth/2, stageHeight, 'ground');\n        ground.setStatic(true);\n        ground.setScale(2, 0.2);\n        // ground.setAngle(10);\n        ground.setFriction(0.005);        \n\n    }\n    \n    update() {\n        \n        for(let idx = 0; idx < this.droppingCoins.length; idx++) {\n            let dropCoin = this.droppingCoins[idx]\n            if ( dropCoin && Math.abs(dropCoin.y + coinSize - stageHeight) < 15 ) {\n                // console.log('drop Coin', idx)\n                this.droppingCoins.splice(idx--, 1);\n                setTimeout( ()=>{\n                    dropCoin.destroy()\n                }, 632 )\n            }\n        }\n    }\n\n    addCoin(addScoreCount: Function) {\n        let coin = this.add.image(stageWidth/2, stageHeight/2, 'coin')\n        // this.coin.displayWidth = 64\n        // this.coin.displayHeight = 64\n        // scale 是根据原图的大小而言的。\n\n        coin.setScale(originCoinScale )\n\n        let self = this\n\n\n        this.animationPlaying.addCoin = true\n        this.tweens.add({\n            targets: coin,\n            scale: 0.2,\n            duration: 132,\n            ease: 'Power4',\n            onComplete: () => {\n                // cb()\n\n                this.tweens.add({\n                    targets: coin,\n                    x: coinScorePos.x,\n                    y: coinScorePos.y,\n                    scale: originCoinScale,\n                    duration: 332,\n                    ease: 'Circ',\n                    onComplete: () => {\n                        addScoreCount(1)\n                        coin.destroy()\n                        this.animationPlaying.addCoin = false\n                    }\n                })                 \n            }            \n        })\n    }\n\n    addHammer(gameScene: Scene, addScoreCount: Function) {\n        if (this.animationPlaying.hammer) {\n            return \n        }\n\n        \n        this.animationPlaying.hammer = true\n        let hammerPos = new Point(258, 327)\n        let dizzyPos = new Point(284, 389)\n        let AlternativeEmoji = ['sad', 'cry', 'sour']\n        let hitEmoji = Phaser.Math.RND.pick(AlternativeEmoji)\n\n\n        this.hammer = this.add.image(hammerPos.x,  hammerPos.y, 'hammer')\n        // this.emojiFace = this.add.image(285,520, hitEmoji)\n        // this.emojiFace.setScale(0.3)\n\n        this.hammer.setScale(0.3)\n        this.hammer.rotation = 1\n        \n        this.addDizzy(dizzyPos).play(HIT_DIZZY)\n\n\n        let animationDuration = 232\n        let holdDuration = 332\n        setTimeout( ()=> {\n            gameScene.cameras.main.shake(100, 0.01, true);       \n            addScoreCount(-1)     \n            this.dropACoin()\n        }, 332 )\n        this.tweens.add({\n            targets: this.hammer,\n            rotation: 1.5,\n            duration: animationDuration,\n            hold: holdDuration,\n            yoyo: true,\n            ease: 'Power3',\n            onComplete: () => {\n                this.hammer.destroy()\n                this.dizzy.destroy()\n                // this.emojiFace.destroy()\n\n                this.animationPlaying.hammer = false\n            },\n        })\n    }\n\n    addDizzy(dizzyPos: Point):Sprite {\n       this.dizzy = this.add.sprite(dizzyPos.x, dizzyPos.y, 'dizzy1')\n       return this.dizzy\n\n\n    }\n\n    // 原本这个是放在 UIScene 中的  但是因为addCoin 动画要表现在这里\n    // 如果放在 UIScene (UIScene 在层级上最高) Coin会被UIScene 遮住\n    createScoreArea(): Container {\n        let scoreAreaCenter = new Point(stageWidth / 2 + 100, 50)\n        let graphicsTopLeft = new Point(0 - scoreAreaCenter.x, 0 - scoreAreaCenter.y)\n        this.scoreArea = this.add.container(scoreAreaCenter.x, scoreAreaCenter.y)\n\n        let bg = this.add.graphics()\n        bg.beginPath()\n        bg.fillStyle(MAIN_RED) //yellow\n        bg.fillRect(graphicsTopLeft.x, graphicsTopLeft.y, stageWidth, 100)\n        bg.closePath()\n\n\n        let scoreBoxWidth = 300\n        let scoreBoxHeight = 66\n        let scoreBoxRadius = scoreBoxHeight / 2\n        let scoreBoxBorder = 10\n        let scoreBoxRectagle = new Rectagle(\n            (scoreAreaCenter.x - scoreBoxWidth / 2) - scoreAreaCenter.x,\n            (scoreAreaCenter.y - scoreBoxHeight / 2) - scoreAreaCenter.y,\n            scoreBoxWidth,\n            scoreBoxHeight\n        )\n        let scoreBox = UIHelper.drawRoundRectWithBorder(this, scoreBoxRectagle, scoreBoxRadius, MAIN_RED, scoreBoxBorder, MAIN_RED_LIGHT)\n\n        let scoreTitlePos = new Point(scoreAreaCenter.x - 50, scoreAreaCenter.y)\n        let scoreTitle = this.add.text(\n            scoreTitlePos.x - scoreAreaCenter.x,\n            scoreTitlePos.y - scoreAreaCenter.y,\n            'score:',\n            { fontFamily: 'Arial', fontSize: 22, color: '#ffffff' }\n        )\n        scoreTitle.setOrigin(0.5)\n\n        let scorePos = new Point(scoreAreaCenter.x + 0, scoreAreaCenter.y)\n        let scoreText = this.scoreText = this.add.text(\n            scorePos.x - scoreAreaCenter.x,\n            scorePos.y - scoreAreaCenter.y,\n            '0',\n            { fontFamily: 'Arial', fontSize: 22, color: '#ffffff' }\n        )\n        scoreText.setOrigin(0.5)\n\n\n        this.scoreArea.add([bg, scoreBox, scoreTitle, scoreText])\n        let coinIcon = this.add.image(coinScorePos.x, coinScorePos.y, 'coin') \n        coinIcon.setScale(originCoinScale)   \n        \n\n        return this.scoreArea\n    }\n\n    dropACoin() {\n        let dropCoin = this.matter.add.image(coinScorePos.x, coinScorePos.y, 'coin')\n        dropCoin.setScale(originCoinScale)\n        this.droppingCoins.push(dropCoin)\n\n    \n        dropCoin.setCircle(coinSize/2);\n        dropCoin.setFriction(0.005);\n        dropCoin.setBounce(0.6);\n        dropCoin.setVelocityX(1);\n        dropCoin.setAngularVelocity(0.15);\n\n\n        \n    }\n}","import { EF_SCENE, SETTINGS_SCENE, BACKGROUND, stageHeight, stageWidth, GAME_SCENE, UI_SCENE } from \"@root/constants\";\nimport { ImageButton, UIHelper } from \"./UIHelper\";\nimport EffectScene from \"./EffectScene\";\nimport GameSoundManager from \"@root/game/soundManager\";\nimport PhaserImage = Phaser.GameObjects.Image;\n\nconst fontTitleStyle = { font: '46px Berlin', fill: '#ffde00', stroke: '#000', strokeThickness: 7, align: 'center' };\nconst fontSettingsStyle = { font: '38px Berlin', fill: '#ffde00', stroke: '#000', strokeThickness: 5, align: 'center' };\n\n\nconst frameWidth = 80\nconst frameHeight = 80\nconst settingsLeft = stageWidth / 2 - 120\nexport default class SettingsScene extends Phaser.Scene {\n    private soundBtn: ImageButton\n    private textSound: PhaserText\n    private musicBtn: ImageButton\n    private textMusic: PhaserText\n    private backBtn: ImageButton\n\n        constructor() {\n            super(SETTINGS_SCENE)\n        }\n\n        preload () {\n\n        }\n\n\n        create() {\n            this.cameras.main.fadeIn(0)\n\n            this.bindEvents()\n\n            this.createBackground()\n            this.createTitle()\n            this.createSoundBtn()\n            this.createMusicBtn()\n            this.createBackBtn()\n            \n        }\n        bindEvents() {\n            this.events.on('wake', () => {\n                this.cameras.main.fadeIn(0)\n            }, this)\n        }\n\n\n        createBackground() {\n            this.add.sprite(0, 0, BACKGROUND).setOrigin(0, 0);\n            \n        }\n\n\n        createTitle() {\n\n            // text 的默认origin 是 0 0\n            let settingsText = this.add.text(stageWidth/2, 50, 'settings', fontTitleStyle);\n            settingsText.setOrigin(0.5, 0.5)\n\n        }\n\n        createBackBtn() {\n\n            let backClick = () => {\n                GameSoundManager.playSound()\n                UIHelper.fadeToPrevScene(GAME_SCENE, this)\n                // this.scene.get(UI_SCENE).cameras.main.fadeIn(0)\n                // this.cameras.main.fadeOut(250);\n                // this.time.addEvent({\n                //     delay: 250,\n                //     callback: function () {\n                //         this.scene.sleep(SETTINGS_SCENE);\n                //     },\n                //     callbackScope: this                    \n                // })\n\n            }\n\n            this.backBtn = new ImageButton(this, 50, 50, 'button-back', backClick)\n            this.add.existing(this.backBtn)\n\n        }\n\n\n        createSoundBtn(){\n            let clickSound = () => {\n                GameSoundManager.toggleSoundMode()\n                if ( GameSoundManager.soundMode) {\n                    this.textSound.text = 'Sound: OFF'\n                }else {\n                    this.textSound.text = 'Sound: ON!'\n\n                }\n            }\n\n            let soundHeight = 150\n            this.soundBtn = new ImageButton(this, settingsLeft, soundHeight, 'button-sound-on', clickSound);\n            this.textSound = this.add.text(settingsLeft + frameHeight / 2, soundHeight, 'Sound: ON!', fontSettingsStyle);\n            this.textSound.setOrigin(0, 0.5);\n            this.add.existing(this.soundBtn)\n        }\n\n\n\n        createMusicBtn(){\n            let clickMusic = () => {\n                GameSoundManager.toogleMusicMode()\n                if (!GameSoundManager.musicMode) {\n                    this.textMusic.text = 'Music: OFF'\n                } else {\n                    this.textMusic.text = 'Music: ON!'\n\n                }\n            }\n\n            let musicHeight = 250\n            this.musicBtn = new ImageButton(this, settingsLeft, musicHeight, 'button-music-on', clickMusic);\n            this.textMusic = this.add.text(settingsLeft + frameHeight / 2, musicHeight, 'Music: ON!', fontSettingsStyle);\n            this.textMusic.setOrigin(0, 0.5);\n\n\n            this.add.existing(this.musicBtn)            \n\n        }\n}","import { BASE_SCENE, GAME_SCENE, EF_SCENE, UI_SCENE, SETTINGS_SCENE, ASSETS_SCENE } from \"./constants\";\nimport { Scene } from \"phaser\";\nimport GameUIScene from \"./UI/GameUIScene\";\nimport EffectScene from \"./UI/EffectScene\";\nconst stageWidth = document.body.clientWidth;\nconst stageHeight = document.body.clientWidth / 9 * 16;\n\nexport default class BaseScene extends Phaser.Scene {\n\n    private dialogScene: GameUIScene\n\n    constructor() {\n        super(BASE_SCENE)\n    }\n\n\n    init() {\n\n    }\n\n    preload() {\n        // this.load.scenePlugin({\n        //     key: 'rexuiplugin',\n        //     url: '/rexuiplugin.min.js',\n        //     sceneKey: 'rexUI'\n        // });\n        window.WebFont.load({ custom: { families: ['Berlin'], urls: ['assets/fonts/BRLNSDB.css'] } });\n        this.scene.start(ASSETS_SCENE)\n\n    }\n    create() {\n\n        // this.scene.launch(UI_SCENE).start();\n        // this.scene.launch(EF_SCENE);        \n\n\n        // this.scene.launch(UI_SCENE)\n        // this.scene.launch(UI_SCENE).start();\n        // this.scene.launch(EF_SCENE);\n        \n        // this.dialogScene.showWelcome()\n        // this.effScene.addHammer()\n        // this.dialogScene = this.scene.get(UI_SCENE) as UIScene\n        // this.effScene = this.scene.get(EF_SCENE) as EffectScene\n\n        // 此刻调用提示 rexUI undefined\n        // this.dialogScene.createGetCaughtDialog(stageWidth/2, stageHeight/2) \n\n    }\n\n\n}","import { Scene } from \"phaser\";\nimport { DOGCOOK, ASSETS_SCENE, UI_SCENE, EF_SCENE, GAME_SCENE, SOUNDKEY, MUSICKEY, stageWidth, stageHeight } from \"@root/constants\";\nimport GameSoundManager from \"@root/game/soundManager\";\n// import { DOGCOOK } from \"../constants\";\n\n\nexport default class AssetsScene extends Scene {\n    private bgColor: Graphics\n    private progressBar: Graphics\n    private loadingText: PhaserText\n    private assetText: PhaserText\n    private percentText:PhaserText\n\n    constructor() {\n        super(ASSETS_SCENE)\n    }\n\n    preload() {    \n        this.addLoadingProgressUI()\n\n        this.load.on('progress', (value) => {\n            value = value.toFixed(2)\n            this.percentText.setText( value * 100 + '%');\n            this.progressBar.clear();\n            this.progressBar.fillStyle(0xffde00, 1);\n            this.progressBar.fillRect(stageWidth/2 - 150, stageHeight/2, 300 * value, 30);\n        });\n\n\n        // not work on PC ?!\n        this.load.on('fileprogress', (file, value)  =>  {\n            this.assetText.setText('Loading asset: ' + file.key);\n        });\n\n        this.load.on('complete', () => {\n            this.progressBar.destroy();\n            // this.progressBox.destroy();\n            this.loadingText.destroy();\n            this.percentText.destroy();\n            this.assetText.destroy();\n        });\n\n\n        this.loadUIAssets()\n        this.loadPics()\n        this.loadEmojiAssets()\n        this.loadDogeAnimationAssets()\n\n        this.loadMusic()        \n\n    }\n\n    create() {\n\n        // 这些逻辑不能放在 index.ts 中  因为他们需要资源加载完成之后才能加载      \n        this.scene.start(GAME_SCENE)\n    }\n\n    addLoadingProgressUI() {\n        this.bgColor = this.add.graphics()\n        this.bgColor.beginPath()\n        // this.bgColor.strokeRoundedRect(0, 0, stageWidth, stageHeight, 20)\n        this.bgColor.fillStyle(0xeeeeee)\n        this.bgColor.fillRoundedRect(0, 0, stageWidth, stageHeight, 20)\n        this.bgColor.closePath()\n\n        this.progressBar = this.add.graphics();\n\n        this.loadingText = this.make.text({\n            x: stageWidth / 2 -50,\n            y: stageHeight / 2 - 50,\n            text: 'Loading... ',\n            style: {\n                font: '18px monospace',\n                fill: '#666666'\n            }\n        }).setOrigin(0.5)\n\n        this.percentText = this.make.text({\n            x: stageWidth / 2 + 50 ,\n            y: stageHeight / 2 - 50,\n            text: '0%',\n            style: {\n                font: '18px monospace',\n                fill: '#666666'\n            }            \n        }).setOrigin(0.5)\n        this.assetText = this.make.text({\n            x: stageWidth / 2,\n            y: stageHeight / 2 + 150,\n            text: '',\n            style: {\n                font: '18px monospace',\n                fill: '#666666'\n            }\n        }).setOrigin(0.5)\n\n    }\n\n\n\n    loadPics() {\n        let scene = this;\n        // yarn run dev 的时候 这个资源也还是从 dist 中读取的\n        scene.load.image('bgImg', 'assets/kitchen.png');\n        scene.load.image('table', 'assets/table.png');\n        scene.load.image('light', 'assets/light.png');\n\n        // online tool https://gammafp.com/tools/\n        scene.load.atlas(\"foods\", \"assets/food/food-by-atlas-packer.png\", \"assets/food/food-by-atlas-packer_atlas.json\")\n\n        // texture packer\n        // scene.load.atlas(\"foods\", \"assets/food/foodspritesheet.png\", \"assets/food/foodspritesheet.json\")\n\n        // scene.load.image('food0', 'assets/food/010-grapes.png')\n        // scene.load.image('food1', 'assets/food/001-burger.png')\n        // ...\n\n        scene.load.image('plate', 'assets/plate.png')\n        scene.load.image('coin', 'assets/coin.png');\n        scene.load.image('hammer', 'assets/hammer.png');\n        scene.load.image('dizzy1', 'assets/dizzy1.png');\n        scene.load.image('dizzy2', 'assets/dizzy2.png');\n           \n        scene.load.image('ground', 'assets/ground.png');\n        // // 应当使用 gif 中的某一帧\n        // // scene.load.image('dogcook', 'assets/back.png');\n        scene.load.image(DOGCOOK, `assets/dogeFrame/frame_00_delay-0.04s.gif`)\n\n    }\n\n    loadDogeAnimationAssets() {\n\n        let scene = this\n        scene.load.atlas(\"dogeTurn\", \"assets/dogeFrame/dogeTurn.png\", \"assets/dogeFrame/dogeTurn.json\")\n        // scene.load.atlas(\"dogeTurnBack\", \"assets/dogeFrame/dogeTurnBack.png\", \"assets/dogeFrame/dogeTurnBack.json\")\n        // scene.load.atlas(\"dogeCookAgain\", \"assets/dogeFrame/dogeCookAgain.png\", \"assets/dogeFrame/dogeCookAgain.json\")\n\n\n\n        // let endIndex = 47\n        // for (let idx = 0; idx <= endIndex; idx++) {\n        //     let idxStr = (idx < 10) ? '0' + idx : '' + idx\n        //     let fname = `assets/dogeFrame/frame_${idxStr}_delay-0.04s.gif`\n        //     let keyname = `dogeFrame${idx}`;\n        //     scene.load.image(keyname, fname)\n        // }\n    }\n\n    loadEmojiAssets() {\n        let scene = this;\n        scene.load.image('sad', `assets/sad.png`)\n        scene.load.image('cry', `assets/cry.png`)\n        scene.load.image('sour', `assets/sour.png`)\n\n    }\n\n    loadUIAssets() {\n        let scene = this;\n\n        // let loadFn = scene.load.spritesheet\n        // loadFn.apply(scene.load, ['button-sound-on', `assets/UI/button-sound-on.png`, { frameWidth: 80, frameHeight: 80 }])\n        // loadFn.apply(scene.load, ['button-sound-off', `assets/UI/button-sound-off.png`, { frameWidth: 80, frameHeight: 80 }])\n        // loadFn.apply(scene.load, ['button-settings', `assets/UI/button-settings.png`, { frameWidth: 80, frameHeight: 80 }])\n\n\n\n        scene.load.image('background', 'assets/UI/background.png');\n        scene.load.spritesheet('button-sound-on', `assets/UI/button-sound-on.png`, { frameWidth: 80, frameHeight: 80 })\n        scene.load.spritesheet('button-sound-off', `assets/UI/button-sound-off.png`, { frameWidth: 80, frameHeight: 80 })\n        scene.load.spritesheet('button-music-on', `assets/UI/button-music-on.png`, { frameWidth: 80, frameHeight: 80 })\n        scene.load.spritesheet('button-music-off', `assets/UI/button-music-off.png`, { frameWidth: 80, frameHeight: 80 })\n\n        scene.load.spritesheet('button-back', `assets/UI/button-back.png`, { frameWidth: 70, frameHeight: 70 })\n        scene.load.spritesheet('button-settings', `assets/UI/button-settings.png`, { frameWidth: 80, frameHeight: 80 })                \n        // scene.load.atlas('UIButtons', 'assets/UI/UIButtons.png', 'assets/UI/UIButtons.json')\n    }\n\n\n    loadMusic(){\n        let scene = this\n        scene.load.audio(SOUNDKEY, ['assets/audio/audio-button.m4a', 'assets/audio/audio-button.mp3', 'assets/audio/audio-button.ogg'])\n        scene.load.audio(MUSICKEY, ['assets/audio/music-bitsnbites-liver.m4a', 'assets/audio/music-bitsnbites-liver.mp3', 'assets/audio/music-bitsnbites-liver.ogg'])\n    }\n\n}","\r\nconsole.log(Phaser.AUTO)\r\nconsole.log(Phaser.AUTO)\r\n\r\n\r\nimport { MSG_TYPE_FACE, MSG_TYPE_CAM, MSG_TYPE_WEBVIEW_READY, UI_SCENE, BASE_SCENE} from '@root/constants';\r\n// import UIPlugin from 'phaser3-rex-plugins/templates/ui/ui-plugin.js';\r\n\r\nconst canvasELlem: HTMLCanvasElement = document.querySelector('#gameCanvas')\r\n\r\nconst stageWidth = document.body.clientWidth;\r\nconst stageHeight = document.body.clientWidth / 9 * 16;\r\n\r\nconst documentWidth = document.body.clientWidth\r\nconst documentHeight = document.body.clientHeight\r\n\r\n// canvasELlem.style.top = `${(documentHeight - stageHeight)/2}px`\r\n\r\n\r\nimport GameScene from '@game/game'\r\nimport GameUIScene from '@root/UI/GameUIScene'\r\nimport EFScene from '@root/UI/EffectScene'\r\nimport SettingsScene from '@root/UI/SettingsScene';\r\n\r\n// import GameScene from 'game/game'\r\n// import UIScene from 'UI/UIScene'\r\n// import EFScene from 'UI/EffectScene'\r\nimport BaseScene from './BaseScene';\r\nimport AssetsScene from '@root/UI/AssetsScene';\r\n\r\n\r\n// 通过指定 parent 元素 在FIT 屏幕的时候可以利用 Phaser 自己的处理机制 \r\n\r\nconst config: Phaser.Types.Core.GameConfig = {\r\n    // canvas: canvasELlem,\r\n    type: Phaser.WEBGL,\r\n    // parent: 'phaser-example',\r\n    width: stageWidth,\r\n    height: stageHeight,\r\n    scale: {\r\n        parent: 'phaser-example',\r\n        mode: Phaser.Scale.FIT,\r\n        autoCenter: Phaser.Scale.CENTER_BOTH,\r\n        width: stageWidth,\r\n        height: stageHeight\r\n    },    \r\n    scene: [BaseScene, AssetsScene, GameScene, EFScene, GameUIScene, SettingsScene],\r\n    transparent: true,\r\n    physics: {\r\n        default: 'matter',\r\n        matter: {\r\n            debug: false,\r\n            enableSleeping: true\r\n        }\r\n    },    \r\n    // physics: {\r\n    //     default: 'arcade',\r\n    //     arcade: {\r\n    //         gravity: { y: 300 },\r\n    //         debug: false\r\n    //     }\r\n    // },\r\n    // 这个 npm 包存在问题 //这样引入会报错\r\n    // plugins: {\r\n    //     scene: [\r\n    //     {´´´´´´´´´´´\r\n    //         key: 'rexUI',\r\n    //         plugin: UIPlugin,\r\n    //         mapping: 'rexUI'\r\n    //     },\r\n    //     ]\r\n    // }    \r\n};\r\nconst game = new Phaser.Game(config);\r\nconsole.log(game.scene.isSleeping(BASE_SCENE)) \r\n// game.scene.add(UI_SCENE, UIManagerScene)\r\n// game.scene.getScene()  game.scene 是 SceneManager  getScene()才是 Phaser.Scene\r\n\r\n\r\n\r\n\r\nimport { changeMouth, setPreview, testClickEvent } from 'test'\r\n\r\nchangeMouth(game)\r\nsetPreview()\r\ntestClickEvent(game)\r\n\r\n"],"names":["stageWidth","stageHeight","Point","Rectagle","Container","coinScorePos","coinSize","originCoinScale","Circle","TopLeftToCenter","UI_SCENE","Scene","GameScene","EFScene"],"mappings":"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"}