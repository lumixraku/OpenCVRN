{"version":3,"file":"game.js","sources":["../node_modules/tslib/tslib.es6.js","../src/game/mouth.ts","../src/game/game.ts","../src/test.ts","../src/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import PhaserImage = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport Graphics = Phaser.GameObjects.Graphics;\nimport PhaserText = Phaser.GameObjects.Text;\n\nconst stageWidth = document.body.clientWidth;\nconst stageHeight = document.body.clientHeight;\n\nexport default class Mouth {\n    public mouthRect: Rectagle = new Rectagle(0, 0, 0, 0);\n    public mouthAllPoints: Point[];\n    public upperTopPoints: Point[];\n    public upperBottomPoints: Point[];\n    public lowerTopPoints: Point[];\n    public lowerBottomPoints: Point[];\n\n    public mouthContour: Graphics;\n    public mouthStateText: PhaserText;\n\n    // private mouthColor: Graphics;\n\n    constructor(scene: Phaser.Scene) {\n        this.mouthContour = scene.add.graphics()\n        this.mouthStateText = scene.add.text(stageWidth - 100, 0, 'Hello World', { fontFamily: '\"Roboto Condensed\"' });\n    }\n\n    setMouthContourPoints(upperTop: Point[], upperBottom: Point[], lowerTop: Point[], lowerBottom: Point[]){\n        this.upperTopPoints = upperTop;\n        this.upperBottomPoints = upperBottom;\n        this.lowerTopPoints = lowerTop;\n        this.lowerBottomPoints = lowerBottom;\n\n        this.mouthAllPoints = [...upperTop, ...upperBottom, ...lowerTop, ...lowerBottom]\n        this.calcMouthRect()\n        this.drawContour()\n    }\n    calcMouthRect(){\n        let mouthPoints = this.mouthAllPoints;\n\n        let xVals = mouthPoints.map(p => {\n            return p.x\n        })\n        let yVals = mouthPoints.map(p => {\n            return p.y\n        })\n\n        let minX = Math.min(...xVals)\n        let maxX = Math.max(...xVals)\n        let minY = Math.min(...yVals)\n        let maxY = Math.max(...yVals)\n\n        this.mouthRect.setPosition(minX, minY);\n        this.mouthRect.setSize(maxX - minX, maxY - minY)\n    }\n    drawContour(){\n        let mouthPoints = this.mouthAllPoints;\n        this.mouthContour.clear()\n        this.mouthContour.lineStyle(5, 0xFF00FF, 1.0);\n        this.mouthContour.beginPath();\n\n        let idx = 0\n        for (let p of mouthPoints) {\n            if (idx == 0) {\n                this.mouthContour.moveTo(p.x, p.y);\n            } else {\n                this.mouthContour.lineTo(p.x, p.y);\n            }\n            idx++\n\n        }\n        this.mouthContour.closePath();\n        this.mouthContour.strokePath();\n    }\n\n    checkIfMouthClose() {\n        return false\n        let isClose = false\n        if (this.mouthRect.height < 10 && this.mouthRect.height / this.mouthRect.width < 0.5) {\n            isClose = true\n        }\n\n        this.mouthStateText.text = \"\" + this.mouthRect.height //isClose ? \"close\" : \"open\"\n\n        return isClose        \n    }\n\n    // 得到嘴巴中心点 用于确定动画结束的位置\n    getMouthCenter(): Point{\n        let mouthCenterX = this.mouthRect.x + this.mouthRect.width / 2;\n        let mouthCenterY = this.mouthRect.y + this.mouthRect.width / 2;\n\n        return new Point(mouthCenterX, mouthCenterY);\n    }\n}","import PhaserImage = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport Graphics = Phaser.GameObjects.Graphics;\nimport PhaserText = Phaser.GameObjects.Text;\n\nconst stageWidth = document.body.clientWidth;\nconst stageHeight = document.body.clientHeight;\n\nimport Mouth from '@game/mouth'\nimport Food from '@game/food'\nimport { FaceData } from '@root/faceData';\n\n\n\nconst angle2Rad = (angle: number) => {\n    return (Math.PI / 180 ) * angle\n}\nexport default class Demo extends Phaser.Scene {\n    public spSpin: Sprite;\n    public circle: Circle;\n    public spSpinSpeed: number = 1;\n\n\n    public distanceAngle: number = 60  //食物和食物之间的间隔(角度)\n    public tableCapacity: number = 360 / this.distanceAngle; //根据间隔计算得到的桌面容量\n\n    public foodList: Food[] = [...Array(this.tableCapacity)].map(_ => null);\n\n    // mouth\n    // public mouthRect: Rectagle = new Rectagle(0, 0, 0, 0);\n    // public mouthContourPoints: Point[];\n    // public mouthContour: Graphics;\n    // private mouthColor: Graphics;\n    public mouthObj: Mouth;\n\n    // 旋转圆心\n    public circleRadius: number = stageWidth\n    public circleCenter: Point = new Point(stageWidth / 2, stageHeight + this.circleRadius/2.3);\n\n    // background\n    public bg: Graphics;\n    public bgImg: PhaserImage;\n\n\n    //text\n    // public mouthStateText: PhaserText;\n\n    constructor() {\n        super('demo');\n    }\n\n    preload() {\n\n        // yarn run dev 的时候 这个资源也还是从 dist 中读取的\n        this.load.image('bgImg', 'assets/kitchen.png');\n        this.load.image('pinWheel', 'assets/pinWheel.png');\n        this.load.image('light', 'assets/light.png');\n\n        this.load.image('food0', 'assets/burger.png');\n        this.load.image('food1', 'assets/burrito.png');\n        this.load.image('food2', 'assets/cheese-burger.png');\n        this.load.image('food3', 'assets/chicken-leg.png');\n        this.load.image('food4', 'assets/french-fries.png');\n        this.load.image('food5', 'assets/donut.png');\n\n        this.load.image('dogFront', 'assets/front.png');\n        this.load.image('dogBack', 'assets/back.png');\n\n\n        this.load.glsl('bundle', 'assets/plasma-bundle.glsl.js');\n        this.load.glsl('stars', 'assets/starfields.glsl.js');\n\n\n    }\n\n    create() {\n        this.bg = this.add.graphics()\n\n        // this.add.shader('RGB Shift Field', 0, 0, 800, 600).setOrigin(0);\n\n        // this.add.shader('Plasma', 0, 412, 800, 172).setOrigin(0);\n\n\n\n\n        // this.tweens.add({\n        //     targets: logo,\n        //     y: 350,\n        //     duration: 1500,\n        //     ease: 'Sine.inOut',\n        //     yoyo: true,\n        //     repeat: -1\n        // })\n        this.drawBackground()\n        this.drawWheel()\n\n\n\n        // this.light = this.add.image(0, 0, 'light');\n        // this.point = new Phaser.Geom.Point(this.light.x, this.light.y)\n\n        // Phaser会根据 add 的先后顺序决定层级.\n        this.mouthObj = new Mouth(this);\n        this.refreshMouth([], [], [], [])\n        \n\n        this.messageListener()\n        this.addText();\n    }\n\n\n    private frameCounter = 0\n    update(time, delta) {\n\n        this.rotateTable()\n        this.movingFoodOnTable()\n        this.checkIfCouldEat()\n\n        // Phaser.Geom.Circle.CircumferencePoint(this.circle, this.spSpin.rotation,  this.point);\n        // this.light.x = this.point.x\n        // this.light.y = this.point.y\n\n        this.frameCounter += 1\n\n        if (this.frameCounter >= 60) {\n            this.frameCounter = 0\n            this.update60Frame()\n        }\n\n    }\n\n    update60Frame() {\n\n    }\n\n    rotateTable() {\n        // 右手顺时针\n        this.spSpin.angle += this.spSpinSpeed;\n        // rotate 是使用的弧度\n        this.addFoodIfNeed()\n\n    }\n\n    addCounter = 0\n    addFoodIfNeed() {\n        for(let i =0; i < this.foodList.length; i++) {\n            // i = 0 angle 0\n            // i = 1 angle 60\n            // 盘子是空的, 且恰好转到合适的位置. 就添加食物\n            if (!this.foodList[i]) {\n\n\n                //\n                //               +\n                //               |\n                //               |\n                //               |\n                //   -90 ~ -180  |    0 ~ -90\n                //               |\n                //               |\n                //               |\n                //               |\n                // +-----------------------------+\n                //               |\n                //               |\n                //               |\n                //     90 - 180  |     0 - 90\n                //               |\n                //               |\n                //               |\n                //               |\n                //               +\n\n\n                // 由于phaser 的坐标不是连续的, 因此为了按照顺时针旋转一周得到 360 的角度, 需要做下面的处理\n                let mathAngle = this.spSpin.angle < 0 ? 360 + this.spSpin.angle : this.spSpin.angle\n\n                // 根据目前的采样率 得不到 mathAngle 为 1 的情况, 最接近1 是 1.79°\n                if ( Math.abs(mathAngle - i *  this.distanceAngle)  < 2) {\n                    let foodTextureKey = `food${i}`\n                    let food = this.add.image(0, 0, foodTextureKey) as Food\n\n                    food.name = `Food${i}`\n                    food.setScale(2,2)\n\n                    this.foodList[i] = food\n\n                    console.log(\"angle add\", this.spSpin.angle, mathAngle, food.name)\n                    // this.foodList.push(food)\n                }\n            }\n        }\n    }\n\n    movingFoodOnTable() {\n\n        for (let i = 0; i < this.foodList.length; i++) {\n            let food = this.foodList[i];\n            if (!food) {\n                continue\n            }\n\n            let point = new Phaser.Geom.Point(0, 0)\n\n\n            // 只在圆圈的 0° 这个位置(也就是坐标系 x )这个位置生成新的元素.\n            let angle = this.spSpin.angle + this.distanceAngle * (this.tableCapacity  - i)\n            // 另外注意一下这里的 angle 按照正始终顺序旋转 在第一象限是 0 ~ -90  第二象限是 -90 ~ -180\n            // 第四象限是 0 ~ 90  第三象限是 90 ~ 180\n\n            Phaser.Geom.Circle.CircumferencePoint(this.circle, angle2Rad(angle) , point);\n\n            food.x = point.x\n            food.y = point.y\n        }\n    }\n\n\n    refreshMouth(upperTop: Point[], upperBottom: Point[], lowerTop: Point[], lowerBottom: Point[]) {\n        this.mouthObj.setMouthContourPoints(upperTop, upperBottom, lowerTop, lowerBottom)\n        // if (!this.mouthContour) {\n        //     this.mouthContour = this.add.graphics()\n\n        // }\n\n\n\n        // this.mouthContourPoints = points\n        // let mouthPoints = points;\n\n        // let xVals = mouthPoints.map(p => {\n        //     return p.x\n        // })\n        // let yVals = mouthPoints.map(p => {\n        //     return p.y\n        // })\n\n        // let minX = Math.min(...xVals)\n        // let maxX = Math.max(...xVals)\n        // let minY = Math.min(...yVals)\n        // let maxY = Math.max(...yVals)\n\n        // this.mouthContour.clear()\n        // this.mouthContour.lineStyle(5, 0xFF00FF, 1.0);\n        // this.mouthContour.beginPath();\n\n        // let idx = 0\n        // for (let p of mouthPoints) {\n        //     if (idx == 0) {\n        //         this. mouthContour.moveTo(p.x, p.y);\n        //     }else {\n        //         this.mouthContour.lineTo(p.x, p.y);\n        //     }\n        //     idx++\n\n        // }\n        // this.mouthContour.closePath();\n        // this.mouthContour.strokePath();\n\n        // this.mouthRect.setPosition(minX, minY);\n        // this.mouthRect.setSize(maxX - minX, maxY - minY)\n        // if (!this.mouthColor) {\n        //     this.mouthColor = this.add.graphics({ fillStyle: { color: 0x0000ff } });\n        // }\n\n\n        // this.mouthColor.clear()\n        // this.mouthColor.fillStyle(0x0000ff)\n        // this.mouthColor.fillRectShape(this.mouth)\n\n    }\n\n    messageListener() {\n        window.addEventListener(\"message\", (event) => {\n            let of: FaceData = event.data\n\n            let mouthPoints = [...of.upperLipBottom, ...of.lowerLipTop]\n            let newPoints = this.offsetPoints(stageWidth, stageHeight, mouthPoints)\n\n            this.refreshMouth(of.upperLipTop, of.upperLipBottom, of.lowerLipTop, of.lowerLipBottom)\n\n        }, false)\n    }\n    private previewWidth = 198\n    private previewHeight = 352\n    private previewOffsetX = 170\n    private previewOffsetY = 250\n    offsetPoints(webviewWidth: number,  webviewHeight, mouthPoints: Point[]) {\n        let scaleX = webviewWidth / this.previewWidth;\n        let scaleY = webviewHeight / this.previewHeight;\n\n        let newPoints = mouthPoints.map( p => {\n            return new Point(p.x + this.previewOffsetX, p.y + this.previewOffsetY )\n        })\n        return newPoints\n    }\n\n\n\n\n    checkIfCouldEat() {\n        if (this.mouthObj.checkIfMouthClose()) {\n            return\n        }\n\n\n        let destPos = this.mouthObj.getMouthCenter();\n        for (let i = 0; i < this.foodList.length; i++) {\n\n\n            let food = this.foodList[i]\n            if (!food) {\n                continue\n            }\n\n            if (food.eating) {\n                continue\n            }\n\n            let foodx = food.x\n            let foody = food.y\n\n\n            // 重新修改判定条件\n            // 当food 在摄像头范围内就可以吃\n            if (\n                ( this.previewOffsetX < food.x &&  food. x < this.previewOffsetX +  this.previewWidth) \n                &&\n                (this.previewOffsetY < food.y && food.y < this.previewOffsetY + this.previewHeight)\n                &&\n                !food.eating\n            ) {\n                // this.foodList.splice(i--, 1)\n                this.foodList[i] = null\n                this.eatingAnimation(food, destPos)\n                break\n            }\n        }\n    }\n\n    eatingAnimation(food: Food, dest: Point) {\n        food.eating = true\n        var tween = this.tweens.add({\n            targets: food,\n            x: dest.x,\n            y: dest.y,\n            scale: 0,\n            duration: 400,\n            ease: 'Power3',\n            onComplete: () => {\n                food.destroy()\n            }\n        })\n    }\n\n    drawHollowBackground() {\n        let faceCenter = new Point(300, 450)\n        let faceRadius = 200\n        this.bg.beginPath()\n        this.bg.moveTo(0,0)\n        this.bg.lineTo(stageWidth, 0)\n        this.bg.lineTo(stageWidth, faceCenter.y)\n        this.bg.lineTo(faceCenter.x + faceRadius, faceCenter.y)\n        this.bg.arc(faceCenter.x, faceCenter.y, faceRadius, 0, Math.PI , true);\n        this.bg.lineTo(0, faceCenter.y)\n        this.bg.lineTo(0,0)\n        this.bg.fillStyle(0xffeeff)\n        this.bg.fill()\n\n\n        this.bg.moveTo(stageWidth, stageHeight)\n        this.bg.lineTo(stageWidth, faceCenter.y)\n        this.bg.arc(faceCenter.x, faceCenter.y, faceRadius, 0, Math.PI, false);\n        this.bg.lineTo(0, faceCenter.y)\n        this.bg.lineTo(0, stageHeight)\n        this.bg.lineTo(stageWidth, stageHeight)\n        this.bg.fillStyle(0xffeeff)\n        this.bg.fill()\n    }\n\n    drawBackground(){\n        this.bgImg = this.add.image(0, 0, 'bgImg')\n        let bd: Rectagle = this.bgImg.getBounds()\n\n        this.bgImg.setPosition(0,0)\n        // Phaser 中 Image 的默认 pivot 就是图片的中心点\n\n        this.bgImg.x = stageWidth/2\n        this.bgImg.y = stageHeight/2\n        this.bgImg.setScale(stageWidth/bd.width , stageHeight/bd.height)\n        this.bgImg.alpha = 0.5;\n    }\n\n    drawWheel(){\n        this.spSpin = this.add.sprite(this.circleCenter.x, this.circleCenter.y, 'pinWheel');\n        this.spSpin.alpha = 0.5\n\n        let bds:Rectagle = this.spSpin.getBounds()\n        let width = bds.width\n\n        this.spSpin.setScale(this.circleRadius / (width/2), this.circleRadius / (width/2) )\n\n        this.circle = new Phaser.Geom.Circle(this.circleCenter.x, this.circleCenter.y, this.circleRadius);\n    }\n\n    addText() {\n        // this.mouthStateText = this.add.text(stageWidth - 100, 0, 'Hello World', { fontFamily: '\"Roboto Condensed\"' });\n\n    }\n}\n","import Image = Phaser.GameObjects.Image;\nimport Sprite = Phaser.GameObjects.Sprite;\nimport Circle = Phaser.Geom.Circle;\nimport Point = Phaser.Geom.Point;\nimport Rectagle = Phaser.Geom.Rectangle;\nimport VConsole from \"vconsole\";\nimport { FaceData } from \"./faceData\";\n\n// 使用 namespace 定义的类型可以直接用\nimport Coco = MyName.Coco\n\n// 使用 module 定义的一定要 import 才能用\nimport { PIPI } from \"./types/myModule\";\n\n// 测试嘴巴位置\nexport default function changeMouth(game: Phaser.Game) {\n\n  //contours sample data\n  window.addEventListener(\"load\", () => {\n\n    let movingDown= (points: Point[]) => {\n      for( let p of points) {\n        p.y = p.y += 1\n      }\n    }\n\n\n    fetch('/assets/sampleContours.json').then(resp => {\n      return resp.json()\n    }).then(data => {\n      new VConsole();\n\n\n      // 在PC上调试\n      if (window.navigator.userAgent.indexOf(\"ONEPLUS\") == -1) {\n        let oneFace: FaceData = data[0]\n        let i = 0\n        setInterval(() => {\n          movingDown(oneFace.lowerLipBottom)\n          movingDown(oneFace.lowerLipTop)\n          movingDown(oneFace.upperLipBottom)\n          movingDown(oneFace.upperLipTop)\n          window.postMessage(oneFace, \"*\")\n\n        }, 100)\n      }\n\n\n    })\n  }, false)\n\n  // let points = [{x:100, y:500}, {x:200, y:600}, {x:100, y:600}, {x:200, y:600}]\n\n\n}","\r\nconsole.log(Phaser.AUTO)\r\nconsole.log(Phaser.AUTO)\r\n\r\n\r\nimport GameScene from '@game/game'\r\nimport changeMouth from 'test'\r\n\r\nconsole.log('.................')\r\nconst stageWidth = document.body.clientWidth;\r\nconst stageHeight = document.body.clientHeight;\r\n\r\n\r\n\r\nconst config: Phaser.Types.Core.GameConfig = {\r\n    type: Phaser.AUTO,\r\n    parent: 'phaser-example',\r\n    width: stageWidth,\r\n    height: stageHeight,\r\n    scene: GameScene,\r\n    transparent: true,\r\n    physics: {\r\n        default: 'arcade',\r\n        arcade: {\r\n            gravity: { y: 300 },\r\n            debug: false\r\n        }\r\n    },\r\n};\r\nconsole.log(\"...............\")\r\nconst game = new Phaser.Game(config);\r\nchangeMouth(game)"],"names":["Point","stageWidth","stageHeight","GameScene"],"mappings":"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"}